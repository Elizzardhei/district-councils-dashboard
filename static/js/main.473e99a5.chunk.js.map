{"version":3,"sources":["../node_modules/encoding/lib sync","constants/dcregion.js","ui/theme/main.js","components/charts/StackedNormalizedHorizontalBarChart.js","components/CampCompareChartContainer.js","components/atoms/Text.js","pages/index.js","utils/features.js","pages/search/AddressSearcher.js","reducers/drawer.js","ContextStore.js","queries/gql.js","pages/search/DistrictSelector.js","pages/search/index.js","components/molecules/ScrollableTabs.js","ui/responsive.js","pages/profile/index.js","components/OLMap.js","components/district/DistrictCard.js","components/district/MainAreas.js","components/molecules/Card.js","components/district/CandidateList.js","components/district/VoterTurnoutChart.js","components/charts/WaffleChart.js","components/district/Metrics.js","pages/district/index.js","components/DCCACompareMap.js","components/atoms/Tag.js","components/atoms/UnstyledLink.js","components/district/Councillor.js","utils/helper.js","components/charts/GroupedBarChart.js","components/DistrictNewVoterChartContainer.js","components/atoms/Columns.js","components/atoms/Rows.js","components/district/DCCAOverview.js","pages/battleground/index.js","ui/theme/index.js","pages/notfound/index.js","pages/test/index.js","components/organisms/MobileAppBar.js","App.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","DCREGION","A","zh_hk","en_us","B","C","D","E","F","G","H","J","K","L","M","N","P","Q","R","S","T","FONT_FAMILY","typography","useNextVariants","fontSize","fontFamily","join","h1","h2","fontWeight","h3","h4","h5","h6","body1","lineHeight","body2","createMuiTheme","palette","primary","main","contrastText","secondary","button","styledComponentTheme","backgroundColor","color","dark","secondaryBackgroundColor","subtextColor","StackedNormalizedHorizontalBarChart","props","_useState","useState","width","height","_useState2","Object","slicedToArray","dimensions","setDimensions","d3Container","useRef","useEffect","data","margin","length","series","d3","columns","slice","offset","domain","map","d","key","range","unknown","y","name","padding","x","svg","current","append","attr","selectAll","enter","i","bandwidth","call","g","style","concat","ticks","remove","tickSizeOuter","middle","legend","text","drawChart","useLayoutEffect","clientWidth","react_default","a","createElement","Fragment","ref","Container","styled","div","_templateObject","FETCH_CAMP_DATA","gql","_templateObject2","CampCompareChartContainer","react_apollo_esm","query","variables","year","_ref2","loading","error","dataForD3","res","建制","count","泛民","其他","total","values","reduce","acc","c","convertToD3Compatible","candidates","byCodes","_","groupBy","candidate","cacode","r","defineProperty","camp","p","val","assign","forEach","k","groupDataByRegionAndCamp","dcd_candidates","StyledSubtTitle","Typography","Text_templateObject","theme","TitleText","variant","SubTitleText","StyledDivier","Divider","pages_templateObject","pages_templateObject2","TopSection","_templateObject3","ExpandedRow","Box","_templateObject4","TabButton","Button","_templateObject5","LandingIcon","_templateObject6","NoteHeader","_templateObject7","NoteContent","_templateObject8","IndexPage","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","state","autoCompleteList","type","onClick","onTabSelected","pages_Container","Text_TitleText","Text_SubTitleText","components_CampCompareChartContainer","renderNote","renderFooter","Component","withStyles","withTheme","getAllFeaturesFromPoint","_ref","lng","lat","pt","turf","result","dc2019","features","feature","poly","geometry","coordinates","properties","CACODE","renderInputComponent","inputProps","classes","_inputProps$inputRef","inputRef","other","objectWithoutProperties","TextField","fullWidth","InputProps","node","input","disableUnderline","endAdornment","InputAdornment","position","IconButton","className","searchButton","aria-label","Search_default","renderSuggestion","suggestion","isHighlighted","matches","match","label","parts","parse","MenuItem","selected","component","part","index","highlight","String","getSuggestionValue","IntegrationAutosuggest","value","suggestions","debounced","handleSuggestionsFetchRequested","cancel","debounce","getSuggestions","then","setState","handleSuggestionsClearRequested","handleChange","event","_ref3","newValue","handleSuggestionSelected","_ref4","constituency","suggestionValue","suggestionIndex","sectionIndex","method","coordinate","handleAddressSelected","inputValue","trim","toLowerCase","AddressParser","records","filter","record","fullAddress","LANG_ZH","_this2","autosuggestProps","onSuggestionsFetchRequested","onSuggestionsClearRequested","onSuggestionSelected","root","dist_default","placeholder","onChange","popperNode","InputLabelProps","shrink","suggestionsList","suggestInput","renderSuggestionsContainer","options","Paper","square","containerProps","children","React","flexGrow","container","suggestionsContainerOpen","zIndex","marginTop","spacing","display","listStyleType","borderRadius","boxShadow","textDecoration","DRAWER_OPEN","DRAWER_CLOSE","drawer","action","open","drawerInitialState","ContextStore","createContext","CONSTITUENCIES_DATA","QUERY_CONSTITUENCIES","gql_templateObject","QUERY_CONSTITUENCY_STATS","gql_templateObject2","QUERY_GET_AREA","gql_templateObject3","DistrictSelector_templateObject","DistrictContainer","DistrictSelector_templateObject2","withRouter","dispatch","useContext","DistrictSelector_Container","dcd_districts","ExpansionPanel","dc_code","ExpansionPanelSummary","aria-controls","dc_name_zh","ExpansionPanelDetails","district","constituencies","history","push","name_zh","search_templateObject","search_templateObject2","search_templateObject3","ContentRowContainer","search_templateObject4","AddressSearchContainer","search_templateObject5","search_templateObject6","TabContainer","search_templateObject7","search_templateObject8","active","NavBarButton","_templateObject9","_React$useState","selectedTab","_React$useState2","setSelectedTab","tab","search_Container","Close_default","search_TabButton","search_StyledDivier","AddressSearcher","search_DistrictSelector","TabPanel","role","hidden","aria-labelledby","a11yProps","ScrollableTabsButtonAuto","setValue","person","allMeetings","flatten","councillors","meeting_attendances","AppBar","Tabs","indicatorColor","textColor","scrollButtons","Tab","Table","TableHead","TableRow","TableCell","align","TableBody","m","scope","meeting","meet_name","meet_type","meet_year","attended","bps","createBreakpoints","GET_PEOPLE_PROFILE","profile_templateObject","FlexRowContainer","profile_templateObject2","up","profile_templateObject3","CandidateHeaderContainer","profile_templateObject4","CandidateAvatar","Avatar","profile_templateObject5","PersonName","profile_templateObject6","YearDiv","profile_templateObject7","profile_templateObject8","profile_templateObject9","_templateObject10","PersonHighlight","_templateObject11","ElectionHistoryPaper","_templateObject12","ElectionHistoryContentGrid","Grid","_templateObject13","ElectionHistoryContentSpan","_templateObject14","ElectionHistoryContentHeaderSpan","_templateObject15","ElectionDetailButton","_templateObject16","ProfilePage","_templateObject17","_templateObject18","handleElectionDetailButton","election","yob","item","xs","md","vote_percentage","is_won","params","homeUrl","dcd_people","currentTerm","lastElection","personHighlight","estimated_yob","title","political_affiliation","career","occupation","src","uuid","imgProps","onError","target","marginBottom","name_en","term_to","Date","MapContainer","OLMap_templateObject","regionStyle","Style","fill","Fill","stroke","Stroke","Text","font","highlightStyle","OLMap","handleMapClick","_this$props","changeDistrict","selectedFeature","getFeatures","highlightFeature","get","getView","fit","getGeometry","getExtent","duration","featuresLayer","_this$props2","dc","dc2003","dc2007","dc2011","dc2015","find","isDCDataExist","featureSource","VectorSource","GeoJSON","readFeatures","VectorLayer","source","getText","setText","getProperties","CNAME","layers","TileLayer","XYZ","url","Map","refs","mapContainer","view","View","projection","center","zoom","featureOverlay","extent","size","getSize","select","Select","addInteraction","on","highlightedFeature","getSource","removeFeature","addFeature","DistrictCard_templateObject","down","InnerContainer","DistrictCard_templateObject2","YearText","DistrictCard_templateObject3","RegionText","DistrictCard_templateObject4","CodeText","DistrictCard_templateObject5","DistrictCard_templateObject6","SeperatedRow","DistrictCard_templateObject7","DistrictCard","onPrevElection","ArrowBack_default","getFullYear","onNextElection","ArrowForward_default","stations","councillor","DistrictCard_Container","border","renderPrevElectionButton","gutterBottom","renderNextElectionButton","DistrictCard_StyledDivier","station","MainAreas_templateObject","MainAreas","areas","MainAreas_Container","flexWrap","alignContent","area","mr","StyledCard","Card","Card_templateObject","PlainCard","CandidateList_templateObject","CandidateList","CandidateList_Container","zingchart","MODULESDIR","chartJSON","chartData","male","female","titles","split","isNaN","parseInt","stacked","stack-type","subtitle","bold","font-size","font-color","background-color","plot","bar-width","hover-state","visible","animation","delay","sequence","valueBox","rules","rule","decimals","scale-x","tick","guide","scale-y","short","line-color","line-style","tooltip","VoterTurnoutChart","render","nextProps","nextState","JSON","stringify","exec","WaffleChart","squareValue","theData","population","units","Math","round","percentage","floor","Array","groupIndex","squareSize","row","col","QUERY_FETCH_VOTES","Metrics_templateObject","Metrics_templateObject2","_data$dc_constituenci","dc_constituencies","vote_stat","voteStats","voteStat","total_votes","total_voters","total_voted_voters","population_excluded_foreign_worker","population_excluded_foreign_worker_lte_age_15","votes","_ref$person","getDataForWaffleChart","stats","station_stats","barVote","cur","age","gender","Metrics_Container","district_VoterTurnoutChart","charts_WaffleChart","FullWidthBox","district_templateObject","LowerBackgroundContainer","district_templateObject2","district_templateObject3","DistrictCardContainer","district_templateObject4","DistrictPage","handleCandidateSelected","candidateId","handleChangeDistrict","_this$props$match$par","_this$props$match$par2","_this$props$match$par3","district_FlexRowContainer","sm","components_OLMap","dcd_constituencies","district_DistrictCard","bind","district_MainAreas","main_areas","Metrics","district_CandidateList","DCCACompareMap_templateObject","DCCACompareMap","DCCACompareMap_MapContainer","StyledChip","Chip","Tag_templateObject","Tag","handleClick","Link","UnstyledLink_templateObject","UnstyledNavLink","NavLink","UnstyledLink_templateObject2","StyledAvatar","Councillor_templateObject","Councillor","filteredDistricts","districts","intersect_area","predecessor","electionResults","sortedElections","sort","b","lastParticipatedYear","participationCount","relectedCount","yearResult","uncontested","myVotes","person_id","highestVotes","v","max","diff","getElectionResults","lastElectionResult","tags","Card_PlainCard","to","tag","Tag_Tag","wrap","pr","alignSelf","GroupedBarChart","maxBy","chart","yScale","x0","s","x1","tickSizeInner","tickFormat","transition","random","labels","DistrictNewVoterChartContainer","filters","filterIndex","setFilterIndex","changeFilter","getDataForChat","stat","category_2","subtype","category_1","console","vote_stats","meta","increased","mostIncreasedGroup","newVotes","groupedByAge","genders","groupedByGender","types","groupedByType","newVoters","totalVoters","getMeta","Columns_templateObject","Rows_templateObject","DCCAOverview_templateObject","DCCAOverview","showGraph","voterData","new_voters_percentage","aggregations","new_voters","all_voters","toFixed","DCCAOverview_Container","Rows","Columns","marginLeft","toggleGraph","KeyboardArrowUp_default","ExpandMore_default","groupVoteStat","VOTERS","NEW_VOTERS","BattleGroundPage","showMap","last_districts","predecessors","district_DCCAOverview","Collapse","in","components_DCCACompareMap","district_Councillor","light","background","default","NotFoundPage","MuiThemeProvider_default","href","content","test_templateObject","test","test_FlexRowContainer","StyledAppBar","MobileAppBar_templateObject","AppBarTitle","MobileAppBar_templateObject2","MobileAppBar","Toolbar","disableGutters","client","ApolloClient","uri","process","useStyles","makeStyles","paper","ContentContainer","App_templateObject","Root","App_templateObject2","App","log","ReactGA","initialize","pageview","window","location","pathname","search","_React$useReducer","useReducer","drawerReducer","_React$useReducer2","drawerState","drawerDispatch","styled_components_browser_esm","src_ContextStore","Provider","App_ContentContainer","CssBaseline","organisms_MobileAppBar","react_router","exact","path","TestPage","NotfoundPage","Drawer","anchor","ReactDOM","react_router_dom","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.473e99a5.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 352;","// deprecated. should use the data from server\nexport const DCREGION = {\n  A: {\n    zh_hk: '中西區',\n    en_us: 'Central and Western',\n  },\n  B: {\n    zh_hk: '灣仔',\n    en_us: 'Wan Chai',\n  },\n  C: {\n    zh_hk: '東區',\n    en_us: 'Eastern',\n  },\n  D: {\n    zh_hk: '南區',\n    en_us: 'Southern',\n  },\n  E: {\n    zh_hk: '油尖旺',\n    en_us: 'Yau Tsim Mong',\n  },\n  F: {\n    zh_hk: '深水埗',\n    en_us: 'Sham Shui Po',\n  },\n  G: {\n    zh_hk: '九龍城',\n    en_us: 'Kowloon City',\n  },\n  H: {\n    zh_hk: '黃大仙',\n    en_us: 'Wong Tai Sin',\n  },\n  J: {\n    zh_hk: '觀塘',\n    en_us: 'Kwun Tong',\n  },\n  K: {\n    zh_hk: '荃灣',\n    en_us: 'Tsuen Wan',\n  },\n  L: {\n    zh_hk: '屯門',\n    en_us: 'Tuen Mun',\n  },\n  M: {\n    zh_hk: '元朗',\n    en_us: 'Yuen Long',\n  },\n  N: {\n    zh_hk: '北區',\n    en_us: 'North',\n  },\n  P: {\n    zh_hk: '大埔',\n    en_us: 'Tai Po',\n  },\n  Q: {\n    zh_hk: '西貢',\n    en_us: 'Sai Kung',\n  },\n  R: {\n    zh_hk: '沙田',\n    en_us: 'Sha Tin',\n  },\n  S: {\n    zh_hk: '葵青',\n    en_us: 'Kwai Tsing',\n  },\n  T: {\n    zh_hk: '離島',\n    en_us: 'Islands',\n  },\n}\n","import { createMuiTheme } from '@material-ui/core/styles'\n\nexport const headingFontFamily = 'Noto Sans TC, sans-serif'\nexport const bodyFontFamily = 'Noto Sans TC, sans-serif'\n\nexport const FONT_FAMILY = [\n  'Noto Sans TC',\n  'sans-serif',\n  '-apple-system',\n  '\"Helvetica Neue\"',\n  'Arial',\n]\n\nexport const typography = {\n  useNextVariants: true,\n  fontSize: 16,\n  fontFamily: FONT_FAMILY.join(','),\n  h1: {\n    fontFamily: headingFontFamily,\n  },\n  h2: {\n    fontFamily: headingFontFamily,\n    fontSize: 24,\n    fontWeight: 500,\n  },\n  h3: {\n    fontFamily: headingFontFamily,\n    fontSize: 22,\n    fontWeight: 500,\n  },\n  h4: {\n    fontFamily: FONT_FAMILY,\n    fontSize: 18,\n    fontWeight: 500,\n  },\n  h5: {\n    fontFamily: headingFontFamily,\n    fontSize: 16,\n    fontWeight: 500,\n  },\n  h6: {\n    fontFamily: headingFontFamily,\n    fontSize: 14,\n    fontWeight: 500,\n  },\n  body1: {\n    fontFamily: bodyFontFamily,\n    fontSize: 14,\n    lineHeight: 1.4,\n  },\n  body2: {\n    fontFamily: bodyFontFamily,\n    fontSize: 12,\n  },\n}\n\nexport default createMuiTheme({\n  typography,\n  palette: {\n    primary: {\n      main: '#fff',\n      contrastText: '#000',\n    },\n    secondary: {\n      main: '#3e474f',\n      contrastText: '#fff',\n    },\n    button: {\n      primary: '#ffd731',\n      secondary: '#ffd731',\n    },\n  },\n})\n\nexport const styledComponentTheme = {\n  main: {\n    backgroundColor: 'white',\n    color: 'black',\n  },\n  dark: {\n    backgroundColor: '#3e474f',\n    color: 'white',\n  },\n  secondaryBackgroundColor: '#f2f2f3', // grey\n  subtextColor: '#ffb500', // organe\n}\n\n/**\n * 泛民 - green #00e676\n建制 - red #e64a19\n本土 - yellow #ffc400\n其他  - blue #4fc3f7\n不明 - grey #999999\n */\nexport const COLOR_CAMP_PAN_DEMO = '#00e676'\nexport const COLOR_CAMP_PAN_EST = '#e64a19'\nexport const COLOR_CAMP_OTHER = '#999999'\n","import React, { useRef, useState, useEffect, useLayoutEffect } from 'react'\nimport * as d3 from 'd3'\nimport { FONT_FAMILY } from 'ui/theme/main'\nconst ROW_HEIGHT = 20\n\nexport default props => {\n  const [dimensions, setDimensions] = useState({ width: 0, height: 0 })\n\n  const d3Container = useRef(null)\n\n  const drawChart = data => {\n    if (dimensions.width === 0) {\n      return\n    }\n\n    const margin = { top: 110, right: 15, bottom: 20, left: 50 }\n    const width = dimensions.width\n    const height = data.length * ROW_HEIGHT + margin.top + margin.bottom\n\n    const labels = ['建制', '其他', '泛民']\n    const series = d3\n      .stack()\n      .keys(data.columns.slice(1))\n      .offset(d3.stackOffsetExpand)(data)\n\n    const yAxis = g =>\n      g\n        .style('font', `12px ${FONT_FAMILY}`)\n        .attr('transform', `translate(${margin.left},0)`)\n        .call(d3.axisLeft(y).tickSizeOuter(0))\n        .call(g => g.selectAll('.domain').remove())\n\n    const xAxis = g =>\n      g\n        .style('font', `12px ${FONT_FAMILY}`)\n        .attr('transform', `translate(0,${margin.top})`)\n        .call(d3.axisTop(x).ticks(width / 100, '%'))\n        .call(g => g.selectAll('.domain').remove())\n\n    const color = d3\n      .scaleOrdinal()\n      .domain(series.map(d => d.key))\n      .range(['#ea3c53', '#eeeeee', '#63b9e9'])\n      .unknown('#ccc')\n\n    const y = d3\n      .scaleBand()\n      .domain(data.map(d => d.name))\n      .range([margin.top, height - margin.bottom])\n      .padding(0.1)\n\n    const x = d3.scaleLinear().range([margin.left, width - margin.right])\n\n    const svg = d3\n      .select(d3Container.current)\n      .append('svg')\n      .attr('width', width)\n      .attr('height', height)\n    // .attr('viewBox', [0, 0, width, height])\n    // .style('overflow', 'visible')\n\n    svg\n      .append('g')\n      .selectAll('g')\n      .data(series)\n      .enter()\n      .append('g')\n      .attr('fill', d => color(d.key))\n      .selectAll('rect')\n      .data(d => d)\n      .join('rect')\n      .attr('x', d => x(d[0]))\n      .attr('y', (d, i) => y(d.data.name))\n      .attr('width', d => x(d[1]) - x(d[0]))\n      .attr('height', y.bandwidth())\n\n    svg.append('g').call(xAxis)\n    svg.append('g').call(yAxis)\n\n    const middle = (width + margin.left - margin.right) / 2\n    svg\n      .append('line')\n      .attr('x1', middle + 1)\n      .attr('y1', margin.top)\n      .attr('x2', middle + 1)\n      .attr('y2', height - margin.bottom)\n      .attr('stroke-width', 1)\n      .attr('stroke', '#3a3a3a')\n      .attr('opacity', '0.6')\n      .style('stroke-dasharray', '10, 4')\n\n    //Legend\n    const legend = svg\n      .selectAll('.legend')\n      .data(labels)\n      .enter()\n      .append('g')\n      .attr('class', 'legend')\n      .attr('transform', (d, i) => `translate(0, ${10 + i * 23})`)\n\n    legend\n      .append('rect')\n      .attr('x', width - margin.right - 50)\n      .attr('width', 18)\n      .attr('height', 18)\n      .style('fill', function(d) {\n        return color(d)\n      })\n\n    legend\n      .append('text')\n      .attr('x', width - margin.right - 20)\n      .attr('y', 9)\n      .attr('dy', '.35em')\n      .style('text-anchor', 'start')\n      .text(function(d) {\n        return d\n      })\n  }\n\n  useEffect(() => {\n    drawChart(props.data)\n  })\n\n  useLayoutEffect(() => {\n    if (d3Container.current) {\n      setDimensions({\n        width: d3Container.current.clientWidth,\n      })\n    }\n  }, [])\n\n  return (\n    <>\n      <div ref={d3Container} style={{ height: 'auto', width: '100%' }}></div>\n    </>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport gql from 'graphql-tag'\nimport { Query } from 'react-apollo'\nimport _ from 'lodash'\nimport { DCREGION } from '../constants/dcregion'\nimport StackedNormalizedHorizontalBarChart from 'components/charts/StackedNormalizedHorizontalBarChart'\n\nconst Container = styled.div`\n  && {\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n  }\n`\n\nconst FETCH_CAMP_DATA = gql`\n  query fetch_camp_data($year: Int!) {\n    dcd_candidates(where: { is_won: { _eq: true }, year: { _eq: $year } }) {\n      cacode\n      camp\n      person {\n        name_zh\n      }\n    }\n  }\n`\n\nfunction groupDataByRegionAndCamp(candidates) {\n  const byCodes = _.groupBy(candidates, candidate => candidate.cacode[0])\n  return Object.keys(byCodes).map(code => ({\n    code,\n    count: byCodes[code]\n      .map(r => ({ [r.camp]: 1 }))\n      .reduce((p, c) => {\n        const val = Object.assign(p)\n        Object.keys(c).forEach(k => (val[k] = c[k] + (val[k] ? val[k] : 0)))\n        return val\n      }, {}),\n  }))\n}\n\nfunction convertToD3Compatible(data) {\n  var res = data.map(d => {\n    return {\n      name: DCREGION[d.code].zh_hk,\n      建制: d.count['建制'] || 0,\n      泛民: d.count['泛民'] || 0,\n      其他: d.count['其他'] || 0,\n      total: Object.values(d.count).reduce((acc, c) => {\n        acc += c\n        return acc\n      }, 0),\n    }\n  })\n  res['columns'] = ['name', '建制', '其他', '泛民']\n  return res\n}\n\nconst CampCompareChartContainer = props => {\n  return (\n    <Query query={FETCH_CAMP_DATA} variables={{ year: 2015 }}>\n      {({ loading, error, data }) => {\n        if (loading) return null\n        if (error) return `Error! ${error}`\n\n        const dataFroGraph = groupDataByRegionAndCamp(data.dcd_candidates)\n        const dataForD3 = convertToD3Compatible(dataFroGraph)\n        return (\n          <Container>\n            <StackedNormalizedHorizontalBarChart\n              data={dataForD3}\n            ></StackedNormalizedHorizontalBarChart>\n          </Container>\n        )\n      }}\n    </Query>\n  )\n}\nexport default CampCompareChartContainer\n","import styled from 'styled-components'\nimport Typography from '@material-ui/core/Typography'\nimport React from 'react'\n\nconst StyledSubtTitle = styled(Typography)`\n  && {\n    color: ${props => props.theme.subtextColor};\n  }\n`\n\nexport const TitleText = props => {\n  return <Typography variant=\"h2\" {...props} />\n}\n\nexport const SubTitleText = props => {\n  return <StyledSubtTitle variant=\"h3\" {...props} />\n}\n","import React, { Component } from 'react'\n\nimport { withStyles } from '@material-ui/core/styles'\nimport Box from '@material-ui/core/Box'\nimport Button from '@material-ui/core/Button'\nimport Divider from '@material-ui/core/Divider'\nimport Typography from '@material-ui/core/Typography'\nimport CampCompareChartContainer from 'components/CampCompareChartContainer'\nimport styled from 'styled-components'\n\nimport { TitleText, SubTitleText } from 'components/atoms/Text'\n\nconst styles = theme => ({})\n\nconst StyledDivier = styled(Divider)`\n  && {\n    background-color: #ececec;\n    width: 100%;\n    margin-top: 30px;\n    margin-bottom: 20px;\n  }\n`\n\nconst Container = styled.div`\n  width: 100%;\n  padding-top: 30px;\n  margin: auto;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: baseline;\n  padding-left: 16px;\n  padding-right: 16px;\n  flex-grow: 1;\n`\n\nconst TopSection = styled(Container)`\n  && {\n    background-color: #f2f2f3;\n  }\n`\n\nconst ExpandedRow = styled(Box)`\n  && {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n    flex-grow: 1;\n  }\n`\n\nconst TabButton = styled(Button)`\n  && {\n    width: 136px;\n    height: 52px;\n    border-radius: 2px;\n    box-shadow: 1px 1px 6px 1px rgba(51, 51, 51, 0.1);\n    background-color: ${props => props.theme.main.backgroundColor};\n    text-align: center;\n\n    &:hover {\n      text-decoration: none;\n    }\n  }\n`\n\nconst LandingIcon = styled.div`\n  margin-top: 70px;\n  margin-left: auto;\n  margin-right: auto;\n  width: 200px;\n  height: 128px;\n  background: url('/static/images/landingIcon.svg') no-repeat;\n  background-size: cover;\n`\n\nconst NoteHeader = styled(TitleText)`\n  && {\n    text-align: center;\n    width: 100%;\n  }\n`\n\nconst NoteContent = styled(Typography)`\n  && {\n    width: 100%;\n  }\n`\n\nclass IndexPage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      autoCompleteList: [],\n    }\n  }\n\n  async componentDidMount() {}\n\n  renderNote() {\n    return (\n      <>\n        <NoteHeader>為什麼你的一票很重要？</NoteHeader>\n        <NoteContent>\n          除非你有投票權、競選公職權，並且參與政治，否則政府不會回應你的利益。如果自己支持的人當選，即使自己的一票不會影響勝選結果，\n        </NoteContent>\n      </>\n    )\n  }\n\n  onTabSelected(type) {}\n\n  renderFooter() {\n    return <></>\n  }\n\n  render() {\n    return (\n      <>\n        <TopSection>\n          <ExpandedRow>\n            <TabButton onClick={this.onTabSelected('district')}>\n              <Typography variant=\"h4\">找選區</Typography>\n            </TabButton>\n            <TabButton onClick={this.onTabSelected('people')}>\n              <Typography variant=\"h4\">找議員</Typography>\n            </TabButton>\n          </ExpandedRow>\n          <LandingIcon />\n        </TopSection>\n        <Container>\n          <ExpandedRow>\n            <TitleText>議會觀測</TitleText>\n            <SubTitleText>了解更多</SubTitleText>\n          </ExpandedRow>\n          <CampCompareChartContainer />\n          <StyledDivier />\n          <ExpandedRow>\n            <TitleText>熱門議題</TitleText>\n            <SubTitleText>所有議題</SubTitleText>\n          </ExpandedRow>\n          <StyledDivier />\n          {this.renderNote()}\n          {this.renderFooter()}\n        </Container>\n      </>\n    )\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(IndexPage)\n","import * as turf from '@turf/turf'\n\nimport dc2019 from '../data/DCCA_2019'\n\nexport const getAllFeaturesFromPoint = ({ lng, lat }) => {\n  const pt = turf.point([lng, lat])\n  // TODO: consider using different year in future\n  // but need to take care of app size\n  const result = {\n    code: null,\n    year: 2019,\n  }\n  for (let i = 0; i < dc2019.features.length; i++) {\n    const feature = dc2019.features[i]\n    const poly = turf.polygon(feature.geometry.coordinates)\n    if (turf.booleanPointInPolygon(pt, poly)) {\n      result.code = feature.properties.CACODE\n      break\n    }\n  }\n  return result\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Autosuggest from 'react-autosuggest'\nimport match from 'autosuggest-highlight/match'\nimport parse from 'autosuggest-highlight/parse'\nimport TextField from '@material-ui/core/TextField'\nimport Paper from '@material-ui/core/Paper'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport { withStyles } from '@material-ui/core/styles'\nimport IconButton from '@material-ui/core/IconButton'\nimport SearchIcon from '@material-ui/icons/Search'\nimport InputAdornment from '@material-ui/core/InputAdornment'\nimport * as AddressParser from 'hk-address-parser-lib'\nimport { getAllFeaturesFromPoint } from 'utils/features'\nimport _ from 'lodash'\n\nfunction renderInputComponent(inputProps) {\n  const { classes, inputRef = () => {}, ref, ...other } = inputProps\n\n  return (\n    <>\n      <TextField\n        fullWidth\n        InputProps={{\n          inputRef: node => {\n            ref(node)\n            inputRef(node)\n          },\n          classes: {\n            input: classes.input,\n          },\n          disableUnderline: true,\n          endAdornment: (\n            <InputAdornment position=\"end\">\n              <IconButton className={classes.searchButton} aria-label=\"Search\">\n                <SearchIcon />\n              </IconButton>\n            </InputAdornment>\n          ),\n        }}\n        {...other}\n      />\n    </>\n  )\n}\n\nfunction renderSuggestion(suggestion, { query, isHighlighted }) {\n  const matches = match(suggestion.label, query)\n  const parts = parse(suggestion.label, matches)\n\n  return (\n    <MenuItem selected={isHighlighted} component=\"div\">\n      {parts.map((part, index) =>\n        part.highlight ? (\n          <span key={String(index)} style={{ fontWeight: 500 }}>\n            {part.text}\n          </span>\n        ) : (\n          <strong key={String(index)} style={{ fontWeight: 300 }}>\n            {part.text}\n          </strong>\n        )\n      )}\n    </MenuItem>\n  )\n}\n\nfunction getSuggestionValue(suggestion) {\n  return suggestion.label\n}\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n  },\n  container: {\n    position: 'relative',\n  },\n  suggestionsContainerOpen: {\n    position: 'absolute',\n    zIndex: 1,\n    marginTop: theme.spacing(1),\n    // left: 0,\n    // right: 0,\n  },\n  suggestion: {\n    display: 'block',\n  },\n  suggestionsList: {\n    margin: 0,\n    padding: 0,\n    listStyleType: 'none',\n  },\n  suggestInput: {\n    height: '60px',\n    borderRadius: '4px',\n    boxShadow: '0 2px 16px 0 rgba(0, 0, 0, 0.1)',\n    backgroundColor: '#ffffff',\n    padding: '10px 20px',\n  },\n  input: {\n    textDecoration: 'none',\n  },\n  searchButton: {\n    color: '#ffd731',\n  },\n})\n\nclass IntegrationAutosuggest extends React.Component {\n  state = {\n    value: '',\n    suggestions: [],\n  }\n\n  debounced = null\n\n  async getSuggestions(value) {\n    const inputValue = value.trim().toLowerCase()\n    const inputLength = inputValue.length\n\n    if (inputLength > 0) {\n      const records = await AddressParser.parse(inputValue)\n      const result = records\n        .filter((_, index) => index < 10)\n        .map(record => ({\n          coordinate: record.coordinate(),\n          label: record.fullAddress(AddressParser.Address.LANG_ZH),\n        }))\n\n      return result\n    }\n\n    return []\n  }\n\n  handleSuggestionsFetchRequested = ({ value }) => {\n    if (this.debounced) {\n      this.debounced.cancel()\n    }\n    this.debounced = _.debounce(() => {\n      this.getSuggestions(value).then(result => {\n        this.setState({\n          suggestions: result,\n        })\n      })\n    }, 300)\n    this.debounced()\n  }\n\n  handleSuggestionsClearRequested = () => {\n    this.setState({\n      suggestions: [],\n    })\n  }\n\n  handleChange = name => (event, { newValue }) => {\n    this.setState({\n      [name]: newValue,\n    })\n  }\n\n  handleSuggestionSelected = (\n    event,\n    { suggestion, suggestionValue, suggestionIndex, sectionIndex, method }\n  ) => {\n    const constituency = getAllFeaturesFromPoint(suggestion.coordinate)\n    // TODO: better to use action to dispatch this event\n    this.props.handleAddressSelected(constituency)\n\n    this.setState({\n      value: '',\n    })\n  }\n\n  render() {\n    const { classes } = this.props\n\n    const autosuggestProps = {\n      renderInputComponent,\n      suggestions: this.state.suggestions,\n      onSuggestionsFetchRequested: this.handleSuggestionsFetchRequested,\n      onSuggestionsClearRequested: this.handleSuggestionsClearRequested,\n      onSuggestionSelected: this.handleSuggestionSelected,\n      getSuggestionValue,\n      renderSuggestion,\n    }\n\n    return (\n      <div className={classes.root}>\n        <Autosuggest\n          {...autosuggestProps}\n          inputProps={{\n            classes,\n            placeholder: '尋找選區...',\n            value: this.state.value,\n            onChange: this.handleChange('value'),\n            inputRef: node => {\n              this.popperNode = node\n            },\n            InputLabelProps: {\n              shrink: true,\n            },\n          }}\n          theme={{\n            suggestionsList: classes.suggestionsList,\n            suggestion: classes.suggestion,\n            input: classes.suggestInput,\n          }}\n          renderSuggestionsContainer={options => (\n            <Paper\n              square\n              {...options.containerProps}\n              style={{\n                width: '100%',\n              }}\n            >\n              {options.children}\n            </Paper>\n          )}\n        />\n      </div>\n    )\n  }\n}\n\nIntegrationAutosuggest.propTypes = {\n  classes: PropTypes.object.isRequired,\n}\n\nexport default withStyles(styles)(IntegrationAutosuggest)\n","export const DRAWER_OPEN = 'drawer_open'\nexport const DRAWER_CLOSE = 'drawer_close'\n\nexport default (state, action) => {\n  switch (action.type) {\n    case DRAWER_OPEN:\n      return { open: true }\n    default:\n      return { open: false }\n  }\n}\n","import React from 'react'\nimport drawerReducer from 'reducers/drawer'\n\nexport const drawerInitialState = {\n  open: false,\n}\n\nconst ContextStore = React.createContext({\n  drawer: drawerInitialState,\n})\n\nexport const ContextStoreProvider = props => {\n  const [drawerState, drawerDispatch] = React.useReducer(\n    drawerReducer,\n    drawerInitialState\n  )\n\n  return (\n    <ContextStore.Provider\n      value={{\n        drawer: {\n          state: drawerState,\n          dispatch: drawerDispatch,\n        },\n      }}\n      {...props}\n    />\n  )\n}\n\nexport default ContextStore\n","// TODO: split this\nimport gql from 'graphql-tag'\n\nconst CONSTITUENCIES_DATA = `\nname_zh\nname_en\ndistrict {\n  dc_name_en\n  dc_name_zh\n  area_name_en\n  area_name_zh\n}\ncode\ndeviation_percentage\nexpected_population\nmain_areas\nvote_stats {\n  count\n  type\n  subtype\n  category_1\n  category_2\n}\nstations {\n  station_code\n  name_en\n  name_zh\n  location\n}\ntags {\n  tag\n}\ncouncillors {\n  political_affiliation\n  person {\n    id\n    uuid\n    name_zh\n    name_en\n    candidates { # to get the tags for the councilors\n      year\n      is_won\n      votes\n      constituency {\n        year\n        candidates {\n          person_id\n          votes\n        }\n      }\n    }\n    councillors { # to get the tags for the councilors\n      year\n      constituency {\n        code\n        name_zh\n      }\n    } \n  }\n}\ncandidates {\n  candidate_number\n  political_affiliation\n  camp\n  person {\n    id\n    uuid\n    name_zh\n    name_en\n    candidates { # to get the tags for the councilors\n      year\n      is_won\n      votes\n      constituency {\n        year\n        candidates {\n          person_id\n          votes\n        }\n      }\n    }\n    councillors { # to get the tags for the councilors\n      year\n      constituency {\n        code\n      }\n    } \n  }\n  vote_percentage\n  votes\n  is_won\n}\n`\n\nexport const QUERY_CONSTITUENCIES = gql`\nquery($year: Int!, $code: String!) {\n  dcd_constituencies(where: { year: { _eq: $year }, code: { _eq: $code } }) {\n    ${CONSTITUENCIES_DATA}\n    predecessors {\n      intersect_area\n      predecessor {\n        ${CONSTITUENCIES_DATA}\n      }\n    }\n  }  \n}\n`\n\nexport const QUERY_CONSTITUENCY_STATS = gql`\n  query($year: Int!, $code: String!) {\n    dcd_constituencies(where: { year: { _eq: $year }, code: { _eq: $code } }) {\n      vote_stats {\n        count\n        type\n        subtype\n        category_1\n        category_2\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_AREA = gql`\n  query {\n    dcd_districts {\n      dc_code\n      dc_name_zh\n      constituencies(where: { year: { _eq: 2019 } }) {\n        code\n        name_zh\n      }\n    }\n  }\n`\n","import React from 'react'\nimport { Typography, Button } from '@material-ui/core'\nimport styled from 'styled-components'\nimport {\n  ExpansionPanel,\n  ExpansionPanelSummary,\n  ExpansionPanelDetails,\n} from '@material-ui/core'\nimport { DRAWER_CLOSE } from 'reducers/drawer'\nimport ContextStore from 'ContextStore'\nimport { withRouter } from 'react-router-dom'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_AREA } from 'queries/gql'\n\nconst Container = styled.div`\n  && {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n`\n\nconst DistrictContainer = styled(Button)`\n  && {\n    width: 120px;\n    justify-content: left;\n  }\n`\n\nconst DistrictSelector = props => {\n  const {\n    drawer: { dispatch },\n  } = React.useContext(ContextStore)\n  const renderDCCA = district => {\n    return (\n      <div>\n        {district.constituencies.map(c => {\n          return (\n            <DistrictContainer\n              key={c.code}\n              onClick={() => {\n                dispatch({ type: DRAWER_CLOSE })\n                props.history.push(`/district/2019/${c.code}`)\n              }}\n              color=\"secondary\"\n            >\n              <Typography variant=\"h6\">{c.name_zh}</Typography>\n            </DistrictContainer>\n          )\n        })}\n      </div>\n    )\n  }\n\n  return (\n    <Container>\n      <Query query={QUERY_GET_AREA}>\n        {({ loading, error, data }) => {\n          if (loading) return null\n          if (error) return `Error! ${error}`\n\n          return (\n            <>\n              {data.dcd_districts.map(d => (\n                <ExpansionPanel key={d.dc_code}>\n                  <ExpansionPanelSummary\n                    aria-controls=\"panel1a-content\"\n                    id=\"panel1a-header\"\n                  >\n                    <Typography>{d.dc_name_zh}</Typography>\n                  </ExpansionPanelSummary>\n                  <ExpansionPanelDetails>{renderDCCA(d)}</ExpansionPanelDetails>\n                </ExpansionPanel>\n              ))}\n            </>\n          )\n        }}\n      </Query>\n    </Container>\n  )\n}\n\nexport default withRouter(DistrictSelector)\n","import React from 'react'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport AddressSearcher from './AddressSearcher'\nimport DistrictSelector from './DistrictSelector'\nimport IconButton from '@material-ui/core/IconButton'\nimport CloseIcon from '@material-ui/icons/Close'\nimport Button from '@material-ui/core/Button'\nimport Typography from '@material-ui/core/Typography'\nimport Divider from '@material-ui/core/Divider'\nimport { withRouter } from 'react-router-dom'\nimport ContextStore from 'ContextStore'\nimport { DRAWER_CLOSE } from 'reducers/drawer'\n\nconst StyledDivier = styled(Divider)`\n  && {\n    background-color: #ececec;\n    width: 100%;\n  }\n`\n\nconst Container = styled(Box)`\n  && {\n    width: 100%;\n  }\n`\n\nconst ExpandedRow = styled(Box)`\n  && {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n    flex-grow: 1;\n  }\n`\n\nconst ContentRowContainer = styled(ExpandedRow)`\n  && {\n    flex-flow: column;\n  }\n`\n\nconst ContentContainer = styled(Box)`\n  && {\n    width: 100%;\n    justify-content: center;\n  }\n`\n\nconst AddressSearchContainer = styled(Box)`\n  && {\n    width: 100%;\n    padding: 21px 16px 21px 16px;\n    background-color: ${props => props.theme.secondaryBackgroundColor};\n  }\n`\n\nconst TabContainer = styled(Box)`\n  && {\n    display: flex;\n    width: 100%;\n    justify-content: center;\n  }\n`\n\nconst TabButton = styled(Button)`\n  && {\n    margin: 10px 10px 0px 10px;\n    padding-bottom: 15px;\n\n    color: ${props =>\n      props.active === 'active'\n        ? props.theme.subtextColor\n        : props.theme.main.color};\n    border-bottom: ${props =>\n      props.active === 'active'\n        ? `1px solid ${props.theme.subtextColor}`\n        : 'none'};\n  }\n`\n\nconst NavBarButton = styled(IconButton)`\n  && {\n    position: fixed;\n    top: 0px;\n    right: 0px;\n  }\n`\n\nfunction SearchPage(props) {\n  const {\n    drawer: { dispatch },\n  } = React.useContext(ContextStore)\n  const [selectedTab, setSelectedTab] = React.useState(\n    props.selectedTab || 'district'\n  )\n  function handleAddressSelected(result) {\n    /* TODO: \n      Use context (?) to store the Global district result array\n      When user select click previous button in district page, \n      the CACODE should follow follow the above result\n    */\n\n    props.history.push(`/district/${result.year}/${result.code}`)\n    dispatch({ type: DRAWER_CLOSE })\n  }\n\n  function onTabSelected(tab) {\n    return () => {\n      setSelectedTab(tab)\n    }\n  }\n\n  function renderSearchDistrict() {\n    return (\n      <ContentRowContainer>\n        <AddressSearchContainer>\n          <AddressSearcher handleAddressSelected={handleAddressSelected} />\n        </AddressSearchContainer>\n        <DistrictSelector />\n      </ContentRowContainer>\n    )\n  }\n\n  function renderSearchPeople() {\n    return <ContentRowContainer></ContentRowContainer>\n  }\n\n  return (\n    <Container>\n      <NavBarButton\n        color=\"inherit\"\n        component=\"span\"\n        aria-label=\"Menu\"\n        onClick={() => {\n          dispatch({ type: DRAWER_CLOSE })\n        }}\n      >\n        <CloseIcon fontSize=\"small\" />\n      </NavBarButton>\n      <TabContainer>\n        <TabButton\n          active={selectedTab === 'district' ? 'active' : 'inactive'}\n          onClick={onTabSelected('district')}\n        >\n          <Typography variant=\"h3\">找選區</Typography>\n        </TabButton>\n        <TabButton\n          active={selectedTab === 'people' ? 'active' : 'inactive'}\n          onClick={onTabSelected('people')}\n        >\n          <Typography variant=\"h3\">找候選人</Typography>\n        </TabButton>\n      </TabContainer>\n      <StyledDivier />\n      {selectedTab === 'district'\n        ? renderSearchDistrict()\n        : renderSearchPeople()}\n    </Container>\n  )\n}\n\nexport default withRouter(SearchPage)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport AppBar from '@material-ui/core/AppBar'\nimport Tabs from '@material-ui/core/Tabs'\nimport Tab from '@material-ui/core/Tab'\nimport Typography from '@material-ui/core/Typography'\nimport Box from '@material-ui/core/Box'\nimport Table from '@material-ui/core/Table'\nimport TableBody from '@material-ui/core/TableBody'\nimport TableCell from '@material-ui/core/TableCell'\nimport TableHead from '@material-ui/core/TableHead'\nimport TableRow from '@material-ui/core/TableRow'\nimport _ from 'lodash'\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props\n\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`scrollable-auto-tabpanel-${index}`}\n      aria-labelledby={`scrollable-auto-tab-${index}`}\n      {...other}\n    >\n      <Box p={3}>{children}</Box>\n    </Typography>\n  )\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  value: PropTypes.any.isRequired,\n}\n\nfunction a11yProps(index) {\n  return {\n    id: `scrollable-auto-tab-${index}`,\n    'aria-controls': `scrollable-auto-tabpanel-${index}`,\n  }\n}\n\nexport default function ScrollableTabsButtonAuto(props) {\n  const [value, setValue] = React.useState(0)\n  const { person } = props\n\n  // Get all the me\n  const allMeetings = _.flatten(\n    person.councillors.map(c => c.meeting_attendances)\n  )\n  function handleChange(event, newValue) {\n    setValue(newValue)\n  }\n\n  return (\n    <>\n      <AppBar position=\"static\">\n        <Tabs\n          value={value}\n          onChange={handleChange}\n          indicatorColor=\"primary\"\n          textColor=\"primary\"\n          variant=\"scrollable\"\n          scrollButtons=\"auto\"\n          aria-label=\"scrollable auto tabs example\"\n        >\n          <Tab label=\"Item One\" {...a11yProps(0)} />\n          <Tab label=\"會議記錄\" {...a11yProps(1)} />\n          <Tab label=\"Item Three\" {...a11yProps(2)} />\n          <Tab label=\"Item Four\" {...a11yProps(3)} />\n          <Tab label=\"Item Five\" {...a11yProps(4)} />\n          <Tab label=\"Item Six\" {...a11yProps(5)} />\n          <Tab label=\"Item Seven\" {...a11yProps(6)} />\n        </Tabs>\n      </AppBar>\n      <TabPanel value={value} index={0}>\n        Item One\n      </TabPanel>\n      <TabPanel value={value} index={1}>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell align=\"right\">會議</TableCell>\n              <TableCell align=\"right\">性質</TableCell>\n              <TableCell align=\"right\">年份</TableCell>\n              <TableCell align=\"right\">與席</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {allMeetings.map((m, index) => (\n              <TableRow key={index}>\n                <TableCell component=\"th\" scope=\"row\">\n                  {m.meeting.meet_name}\n                </TableCell>\n                <TableCell align=\"right\">{m.meeting.meet_type}</TableCell>\n                <TableCell align=\"right\">{m.meeting.meet_year}</TableCell>\n                <TableCell align=\"right\">\n                  {m.attended}/{m.total}\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TabPanel>\n      <TabPanel value={value} index={2}>\n        Item Three\n      </TabPanel>\n      <TabPanel value={value} index={3}>\n        Item Four\n      </TabPanel>\n      <TabPanel value={value} index={4}>\n        Item Five\n      </TabPanel>\n      <TabPanel value={value} index={5}>\n        Item Six\n      </TabPanel>\n      <TabPanel value={value} index={6}>\n        Item Seven\n      </TabPanel>\n    </>\n  )\n}\n","import createBreakpoints from '@material-ui/core/styles/createBreakpoints'\nimport createMuiTheme from '@material-ui/core/styles/createMuiTheme'\n\nexport const bps = createBreakpoints({})\n\nexport const headingFontFamily = 'Source Serif Pro, sans-serif'\nexport const bodyFontFamily = 'PT Serif, sans-serif'\n\nexport const fontFamily = ['PingFangTC-Semibold', 'PingFangTC-Medium']\n\nexport const typography = {}\n\nexport const theme = createMuiTheme()\n","import React, { Component } from 'react'\nimport Box from '@material-ui/core/Box'\nimport styled, { css } from 'styled-components'\nimport Typography from '@material-ui/core/Typography'\nimport Avatar from '@material-ui/core/Avatar'\nimport Paper from '@material-ui/core/Paper'\nimport Grid from '@material-ui/core/Grid'\nimport ScrollableTabsButtonAuto from '../../components/molecules/ScrollableTabs'\nimport gql from 'graphql-tag'\nimport { Query } from 'react-apollo'\nimport { bps } from 'ui/responsive'\n\n// TODO: add age, camp & political_affiliation\nconst GET_PEOPLE_PROFILE = gql`\n  query($id: Int!) {\n    dcd_people(where: { id: { _eq: $id } }) {\n      id\n      uuid\n      name_zh\n      name_en\n      gender\n      estimated_yob\n      councillors {\n        year\n        cacode\n        term_from\n        term_to\n        career\n        district {\n          dc_name_zh\n        }\n        political_affiliation\n        post\n        constituency {\n          id\n          name_zh\n        }\n        meeting_attendances(\n          order_by: { meeting: { meet_year: desc }, total: desc }\n        ) {\n          meeting {\n            meet_name\n            meet_type\n            meet_year\n          }\n          attended\n          total\n        }\n      }\n      candidates {\n        candidate_number\n        is_won\n        occupation\n        political_affiliation\n        age\n        cacode\n        camp\n        election_type\n        year\n      }\n    }\n  }\n`\n\nconst DistrictName = styled.div`\n   {\n    font-size: 14px;\n    font-weight: 600;\n    color: #ffffff;\n    ${bps.up('sm')} {\n      font-size: 20px;\n    }\n\n    ${bps.up('md')} {\n      font-size: 36px;\n    }\n  }\n`\n\nconst FlexRowContainer = styled(Box)`\n  && {\n    width: 100%;\n  }\n`\n\nconst CandidateHeaderContainer = styled(FlexRowContainer)`\n  && {\n    height: 116px;\n    position: relative;\n    display: flex;\n    background: linear-gradient(#f6416e 84px, rgba(255, 255, 255, 0) 32px);\n  }\n`\n\nconst CandidateAvatar = styled(Avatar)`\n  && {\n    position: absolute;\n    left: 16px;\n    bottom: 8px;\n    width: 84px;\n    height: 84px;\n  }\n`\n\nconst PersonName = styled.div`\n   {\n    position: absolute;\n    left: 116px;\n    top: 32px;\n  }\n`\n\nconst BasicInfoHeader = styled.div`\n  && {\n    font-size: 32px;\n    font-weight: 600;\n    width: 100%;\n\n    ${bps.up('md')} {\n      margin-left: 65px;\n    }\n  }\n`\nconst ElectionHistoryContainer = styled(FlexRowContainer)`\n  && {\n    padding: 20px;\n    background-color: #fafafa;\n    ${bps.up('sm')} {\n      padding-left: 40px;\n    }\n\n    ${bps.up('md')} {\n      padding-left: 120px;\n      height: 100%;\n    }\n  }\n`\nconst ElectionHistoryHeader = styled.div`\n  && {\n    font-size: 32px;\n    font-weight: 600;\n    color: #333333;\n    margin-top: 4px;\n  }\n`\n\nconst YearDiv = styled.div`\n  && {\n    font-size: 24px;\n    font-weight: 600;\n    color: #9b9b9b;\n    margin-bottom: 20px;\n  }\n`\n\nconst PersonHighlight = styled.div`\n  && {\n    display: flex;\n  }\n`\nconst ElectionHistoryPaper = styled(Paper)`\n  && {\n    padding: 20px;\n  }\n`\n\nconst ElectionHistoryContentGrid = styled(Grid)`\n  && {\n    padding: 15px;\n  }\n`\n\nconst ElectionHistoryContentSpan = styled(Grid)`\n  && {\n    font-size: 18px;\n    color: #4a4a4a;\n  }\n`\n\nconst ElectionHistoryContentHeaderSpan = styled(ElectionHistoryContentSpan)`\n  && {\n    font-weight: 500;\n  }\n`\nconst ElectionDetailButton = styled.div`\n  && {\n    padding: 15px;\n    font-weight: 600;\n    color: #ffb700;\n    width: 100%;\n    text-align: center;\n    border-radius: 4px;\n    border: 2px solid #ffb700;\n    cursor: pointer;\n  }\n`\n\nconst BasicInfoGridHeader = styled(Grid)`\n  && {\n    font-weight: 600;\n    color: #4a4a4a;\n    font-size: 18px;\n  }\n`\n\nconst BasicInfoGridContent = styled(Grid)`\n  && {\n    color: #4a4a4a;\n    font-size: 18px;\n  }\n`\nclass ProfilePage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  async componentDidMount() {}\n\n  handleElectionDetailButton = (year, code) => {\n    this.props.history.push(`/district/${year}/${code}`)\n  }\n\n  renderElectionInfoCard(election, yob) {\n    return (\n      <Grid item xs={12} md={4}>\n        <YearDiv>{`${election.year}年`}</YearDiv>\n        <ElectionHistoryPaper>\n          <ElectionHistoryContentGrid container spacing={1}>\n            <ElectionHistoryContentHeaderSpan item xs={12} md={4}>\n              地區\n            </ElectionHistoryContentHeaderSpan>\n            <ElectionHistoryContentSpan item xs={12} md={8}>\n              {' '}\n              {election.constituency && election.constituency.name\n                ? election.constituency.name\n                : '-'}{' '}\n            </ElectionHistoryContentSpan>\n          </ElectionHistoryContentGrid>\n          <hr />\n          <ElectionHistoryContentGrid container spacing={1}>\n            <ElectionHistoryContentHeaderSpan item xs={12} md={4}>\n              選區\n            </ElectionHistoryContentHeaderSpan>\n            <ElectionHistoryContentSpan item xs={12} md={8}>\n              {`${election.constituency.name_zh} （${election.cacode}）`}\n            </ElectionHistoryContentSpan>\n          </ElectionHistoryContentGrid>\n          <hr />\n          <ElectionHistoryContentGrid container spacing={1}>\n            <ElectionHistoryContentHeaderSpan item xs={12} md={4}>\n              陣營\n            </ElectionHistoryContentHeaderSpan>\n            <ElectionHistoryContentSpan item xs={12} md={8}>\n              {election.camp ? election.camp : '-'}\n            </ElectionHistoryContentSpan>\n          </ElectionHistoryContentGrid>\n          <hr />\n          <ElectionHistoryContentGrid container spacing={1}>\n            <ElectionHistoryContentHeaderSpan item xs={12} md={4}>\n              得票率\n            </ElectionHistoryContentHeaderSpan>\n            <ElectionHistoryContentSpan item xs={12} md={8}>\n              {`${election.vote_percentage}% （${\n                election.is_won ? '當選' : '落敗'\n              }）`}\n            </ElectionHistoryContentSpan>\n          </ElectionHistoryContentGrid>\n          <ElectionHistoryContentGrid container spacing={1}>\n            <ElectionDetailButton\n              onClick={() => {\n                this.handleElectionDetailButton(election.year, election.cacode)\n              }}\n            >\n              查看選舉資料\n            </ElectionDetailButton>\n          </ElectionHistoryContentGrid>\n        </ElectionHistoryPaper>\n      </Grid>\n    )\n  }\n\n  render() {\n    const {\n      match: {\n        params: { id },\n      },\n    } = this.props\n\n    // todo: use ENV_VAR\n    const homeUrl = 'https://cswbrian.github.io/district-councils-dashboard/'\n\n    return (\n      <Query query={GET_PEOPLE_PROFILE} variables={{ id }}>\n        {({ loading, error, data }) => {\n          if (loading) return null\n          if (error) return `Error! ${error}`\n          const person = data.dcd_people[0]\n\n          const currentTerm =\n            person.councillors &&\n            person.councillors[person.councillors.length - 1]\n          const lastElection =\n            person.candidates && person.candidates[person.candidates.length - 1]\n\n          const personHighlight = []\n\n          if (person.estimated_yob) {\n            personHighlight.push({\n              title: '年齡',\n              text: `${2019 - person.estimated_yob}歲`,\n            })\n          }\n\n          if (currentTerm && currentTerm.political_affiliation) {\n            personHighlight.push({\n              title: '報稱政治聯繫',\n              text: `${currentTerm.political_affiliation}`,\n            })\n          } else if (lastElection && lastElection.political_affiliation) {\n            personHighlight.push({\n              title: '報稱政治聯繫',\n              text:\n                `${lastElection.political_affiliation}` +\n                (lastElection.camp && `（${lastElection.camp}）`),\n            })\n          }\n\n          personHighlight.push({\n            title: '職業',\n            text:\n              (currentTerm && currentTerm.career) || lastElection.occupation,\n          })\n\n          return (\n            <>\n              <CandidateHeaderContainer>\n                <Box>\n                  <CandidateAvatar\n                    src={`${homeUrl}/static/images/avatar/${person.uuid}.jpg`}\n                    imgProps={{\n                      onError: e => {\n                        e.target.src = `${homeUrl}/static/images/avatar/default.png`\n                      },\n                    }}\n                  />\n                </Box>\n                <Box>\n                  <PersonName>\n                    <Typography\n                      variant=\"h3\"\n                      style={{ marginBottom: '2px', color: 'white' }}\n                    >\n                      {person.name_zh || ''}\n                    </Typography>\n                    <Typography\n                      variant=\"h5\"\n                      style={{ marginBottom: '8px', color: 'white' }}\n                    >\n                      {person.name_en || ''}\n                    </Typography>\n                    {currentTerm &&\n                      currentTerm.term_to &&\n                      Date.parse(new Date()) <\n                        Date.parse(currentTerm.term_to) && (\n                        <Typography\n                          variant=\"h6\"\n                          color=\"secondary\"\n                        >{`現任${currentTerm.district.dc_name_zh}區議員（${currentTerm.constituency.name_zh}）`}</Typography>\n                      )}\n                  </PersonName>\n                </Box>\n              </CandidateHeaderContainer>\n\n              <PersonHighlight>\n                {personHighlight.map((highlight, index) => (\n                  <Box key={index} p={2}>\n                    <Typography variant=\"h5\">{highlight.text}</Typography>\n                    <Typography variant=\"h6\">{highlight.title}</Typography>\n                  </Box>\n                ))}\n              </PersonHighlight>\n\n              <ScrollableTabsButtonAuto person={person} />\n              {/* <ElectionHistoryContainer>\n                <Grid container spacing={3}>\n                  <Grid item xs={12}>\n                    <ElectionHistoryHeader>區議會選舉</ElectionHistoryHeader>\n                  </Grid>\n\n                  {person.elections\n                    .sort((a, b) => b.year - a.year)\n                    .map(election =>\n                      this.renderElectionInfoCard(\n                        election,\n                        person.estimated_yob\n                      )\n                    )}\n                </Grid>\n              </ElectionHistoryContainer> */}\n            </>\n          )\n        }}\n      </Query>\n    )\n  }\n}\n\nexport default ProfilePage\n","import React, { Component } from 'react'\nimport Map from 'ol/Map'\nimport View from 'ol/View'\nimport TileLayer from 'ol/layer/Tile'\nimport VectorLayer from 'ol/layer/Vector'\nimport VectorSource from 'ol/source/Vector'\nimport XYZ from 'ol/source/XYZ'\nimport GeoJSON from 'ol/format/GeoJSON'\nimport { Style, Stroke, Fill, Text } from 'ol/style'\nimport Select from 'ol/interaction/Select'\nimport styled from 'styled-components'\n\nimport dc2003 from '../data/DCCA_2003'\nimport dc2007 from '../data/DCCA_2007'\nimport dc2011 from '../data/DCCA_2011'\nimport dc2015 from '../data/DCCA_2015'\nimport dc2019 from '../data/DCCA_2019'\n\nconst MapContainer = styled.div`\n  width: 100%;\n  height: 100%;\n`\n\nconst regionStyle = new Style({\n  fill: new Fill({\n    color: 'rgba(255, 255, 255, 0.2)',\n  }),\n  stroke: new Stroke({\n    color: '#319FD3',\n    width: 1,\n  }),\n  text: new Text({\n    font: '16px Calibri,sans-serif',\n    fill: new Fill({\n      color: '#000',\n    }),\n    stroke: new Stroke({\n      color: '#fff',\n      width: 2,\n    }),\n  }),\n})\n\nconst highlightStyle = new Style({\n  stroke: new Stroke({\n    color: '#f00',\n    width: 1,\n  }),\n  fill: new Fill({\n    color: 'rgba(255,0,0,0.1)',\n  }),\n  text: new Text({\n    font: '16px Calibri,sans-serif',\n    fill: new Fill({\n      color: '#000',\n    }),\n    stroke: new Stroke({\n      color: '#f00',\n      width: 2,\n    }),\n  }),\n})\n\nclass OLMap extends Component {\n  featureOverlay\n  highlightedFeature\n\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  componentDidMount() {\n    const { year, code } = this.props\n    const dc = [dc2003, dc2007, dc2011, dc2015, dc2019].find(\n      d => d.name === `DCCA_${year}`\n    )\n    let isDCDataExist = dc ? true : false\n    let featuresLayer\n\n    if (isDCDataExist) {\n      this.featureSource = new VectorSource({\n        features: new GeoJSON().readFeatures(dc),\n      })\n\n      featuresLayer = new VectorLayer({\n        source: this.featureSource,\n        style: feature => {\n          regionStyle.getText().setText(feature.getProperties().CNAME)\n          return regionStyle\n        },\n      })\n    }\n\n    // create map object with feature layer\n    const layers = [\n      //default OSM layer\n      new TileLayer({\n        source: new XYZ({\n          url:\n            'https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}',\n        }),\n      }),\n    ]\n\n    if (isDCDataExist) {\n      layers.push(featuresLayer)\n    }\n\n    const map = new Map({\n      target: this.refs.mapContainer,\n      layers,\n      view: new View({\n        projection: 'EPSG:4326',\n        center: [114.2029, 22.3844],\n        zoom: 13,\n      }),\n    })\n\n    this.featureOverlay = new VectorLayer({\n      source: new VectorSource(),\n      map: map,\n      style: function(feature) {\n        highlightStyle.getText().setText(`${feature.getProperties().CNAME}`)\n        return highlightStyle\n      },\n    })\n\n    if (isDCDataExist) {\n      // Fit to feature\n      const features = this.featureSource.getFeatures()\n      for (let i = 0; i < features.length; i++) {\n        if (features[i].getProperties().CACODE === code) {\n          const extent = features[i].getGeometry().getExtent()\n          map.getView().fit(extent, {\n            size: map.getSize(),\n            padding: [10, 10, 10, 10],\n          })\n\n          this.highlightFeature(features[i])\n          break\n        }\n      }\n    }\n\n    this.setState({\n      map,\n      view: map.getView(),\n      featuresLayer: isDCDataExist ? featuresLayer : null,\n    })\n\n    const select = new Select()\n\n    if (select !== null) {\n      map.addInteraction(select)\n      select.on('select', this.handleMapClick)\n    }\n  }\n\n  highlightFeature(feature) {\n    if (this.highlightedFeature) {\n      this.featureOverlay.getSource().removeFeature(this.highlightedFeature)\n    }\n\n    this.featureOverlay.getSource().addFeature(feature)\n    this.highlightedFeature = feature\n  }\n\n  handleMapClick = e => {\n    const { year, changeDistrict } = this.props\n    const selectedFeature = e.target.getFeatures().item(0)\n\n    if (selectedFeature) {\n      this.highlightFeature(selectedFeature)\n      changeDistrict(year, selectedFeature.get('CACODE'))\n      this.state.map.getView().fit(selectedFeature.getGeometry().getExtent(), {\n        duration: 200,\n      })\n    }\n  }\n\n  render() {\n    return <MapContainer ref=\"mapContainer\"> </MapContainer>\n  }\n}\n\nexport default OLMap\n","import React, { Component } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport Paper from '@material-ui/core/Paper'\nimport IconButton from '@material-ui/core/IconButton'\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward'\nimport Divider from '@material-ui/core/Divider'\nimport Box from '@material-ui/core/Box'\nimport PropTypes from 'prop-types'\nimport { bps } from 'ui/responsive'\n\nconst Container = styled(Paper)`\n  && {\n    width: 400px;\n    height: 400px;\n    background-color: #f6f6f6;\n    padding: 0;\n\n    ${bps.down('md')} {\n      width: 100%;\n    }\n  }\n`\n\nconst InnerContainer = styled(Box)`\n  && {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    align-items: baseline;\n    padding-left: 32px;\n    padding-right: 32px;\n  }\n`\n\nconst YearText = styled(Typography)`\n  && {\n    font-family: Avenir;\n    font-size: 30px;\n    font-weight: 900;\n    color: #333333;\n  }\n`\n\nconst RegionText = styled(Typography)`\n  && {\n    width: 100%;\n    font-family: PingFangTC-Medium;\n    font-size: 20px;\n    font-weight: 500;\n    color: #ffb700;\n  }\n`\n\nconst CodeText = styled(Typography)`\n  && {\n    margin-left: 10px;\n    font-family: PingFangTC-Light;\n    font-size: 40px;\n    font-weight: 300;\n    color: #9b9b9b;\n  }\n`\n\nconst StyledDivier = styled(Divider)`\n  && {\n    margin-top: 40px;\n    background-color: #cecece;\n    width: 100%;\n  }\n`\n\nconst SeperatedRow = styled(Box)`\n  && {\n    margin-top: 20px;\n    display: flex;\n    width: 100%;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n  }\n`\n\nclass DistrictCard extends Component {\n  static propTypes = {\n    year: PropTypes.number.isRequired,\n    code: PropTypes.string.isRequired,\n    name_zh: PropTypes.string.isRequired,\n    name_en: PropTypes.string.isRequired,\n    onPrevElection: PropTypes.func.isRequired,\n    onNextElection: PropTypes.func.isRequired,\n    councillors: PropTypes.array.isRequired,\n    district: PropTypes.object.isRequired,\n  }\n\n  renderPrevElectionButton(year) {\n    return year > 1999 ? (\n      <IconButton aria-label=\"arrow_back\" onClick={this.props.onPrevElection}>\n        <ArrowBackIcon />\n      </IconButton>\n    ) : (\n      // if there is no next button, show a 48x48 empty box to align the 2 elements on the right\n      <div style={{ width: '48px', height: '48px' }}></div>\n    )\n  }\n\n  renderNextElectionButton(year) {\n    const nextElectionYear = year + 4\n    const currentYear = new Date().getFullYear()\n    return nextElectionYear <= currentYear ? (\n      <IconButton\n        aria-label=\"arrow_forward\"\n        onClick={this.props.onNextElection}\n      >\n        <ArrowForwardIcon />\n      </IconButton>\n    ) : (\n      // if there is no next button, show a 48x48 empty box to align the 2 elements on the left\n      <div style={{ width: '48px', height: '48px' }}></div>\n    )\n  }\n\n  render() {\n    const { name_zh, year, code, councillors, district, stations } = this.props\n    const councillor = councillors.length > 0 ? councillors[0] : {}\n    return (\n      <Container>\n        <InnerContainer border={0} color=\"primary.minor\">\n          <SeperatedRow>\n            {this.renderPrevElectionButton(year)}\n            <YearText variant=\"button\" gutterBottom>\n              {year}\n            </YearText>\n            {this.renderNextElectionButton(year)}\n          </SeperatedRow>\n          <RegionText>{district.dc_name_zh}</RegionText>\n          <Typography variant=\"h3\">{name_zh}</Typography>\n          <CodeText>{code}</CodeText>\n          <StyledDivier />\n          <SeperatedRow>\n            <Typography variant=\"h6\">區議員</Typography>\n            <Typography>\n              {councillor.person ? councillor.person.name_zh : '-'}\n            </Typography>\n          </SeperatedRow>\n          <SeperatedRow>\n            <Typography variant=\"h6\">政治聯繫</Typography>\n            <Typography>{councillor.political_affiliation || '-'}</Typography>\n          </SeperatedRow>\n          <SeperatedRow>\n            <Typography variant=\"h6\">投票站</Typography>\n            {stations.map((station, index) => (\n              <Typography key={index} variant=\"subtitle2\">\n                {station.name_zh}\n              </Typography>\n            ))}\n          </SeperatedRow>\n        </InnerContainer>\n      </Container>\n    )\n  }\n}\n\nexport default DistrictCard\n","import React, { Component } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport PropTypes from 'prop-types'\n\nconst Container = styled.div`\n   {\n    padding: 16px;\n  }\n`\n\nclass MainAreas extends Component {\n  static propTypes = {\n    areas: PropTypes.array.isRequired,\n  }\n\n  render() {\n    const { areas } = this.props\n    return (\n      <Container>\n        <Typography variant=\"h6\" gutterBottom>\n          主要屋邨 / 地區\n        </Typography>\n        <Box display=\"flex\" flexWrap=\"wrap\" alignContent=\"flex-start\">\n          {areas.map((area, index) => (\n            <Box mr={1} key={index}>\n              <Typography variant=\"body1\">\n                {`${Object.keys(area)[0]} ${area[Object.keys(area)[0]]}`}\n              </Typography>\n            </Box>\n          ))}\n        </Box>\n      </Container>\n    )\n  }\n}\n\nexport default MainAreas\n","import styled from 'styled-components'\nimport Card from '@material-ui/core/Card'\nimport React from 'react'\n\nconst StyledCard = styled(Card)`\n  && {\n    padding: 16px;\n    margin: 16px;\n    background-color: #fafafa;\n  }\n`\n\nexport const PlainCard = props => {\n  return <StyledCard {...props}>{props.children}</StyledCard>\n}\n","import React, { Component } from 'react'\nimport styled from 'styled-components'\nimport PropTypes from 'prop-types'\nimport Typography from '@material-ui/core/Typography'\nimport { PlainCard } from '../molecules/Card'\n\nconst Container = styled.div`\n   {\n    padding: 16px;\n  }\n`\n\nclass CandidateList extends Component {\n  static propTypes = {\n    candidates: PropTypes.array.isRequired,\n    year: PropTypes.number.isRequired,\n    code: PropTypes.string.isRequired,\n  }\n\n  // todo: use ENV_VAR\n  homeUrl = 'https://cswbrian.github.io/district-councils-dashboard/'\n\n  render() {\n    const { candidates } = this.props\n\n    return (\n      <Container>\n        <Typography variant=\"h6\" gutterBottom>\n          候選人\n        </Typography>\n        <Typography variant=\"body1\">\n          2019年區議會提名期為10月2日至15日，稍後會更新潛在候選人\n        </Typography>\n      </Container>\n    )\n  }\n}\n\nexport default CandidateList\n","import React, { Component } from 'react'\nimport zingchart from 'zingchart'\n\n// MUST define modulesdir for VoterTurnoutChart\n// https://www.zingchart.com/docs/api/modules/standard/#modules__modules_list\nzingchart.MODULESDIR = 'https://cdn.zingchart.com/modules/'\n\nconst chartJSON = chartData => {\n  const data = { male: [], female: [] }\n\n  Object.values(chartData.data).forEach(value => {\n    data['male'].push(value['male'])\n    data['female'].push(value['female'])\n  })\n\n  // TODO: replace this hacky code\n  const titles = Object.keys(chartData.data).map(\n    key =>\n      key\n        .split('_')\n        .filter(val => !isNaN(parseInt(val)))\n        .join('-') + '歲'\n  )\n  titles[titles.length - 1] += '及以上'\n  // Demo\n  // https://codepen.io/pen/?editors=1010\n\n  return {\n    type: 'bar',\n    stacked: true,\n    'stack-type': 'normal',\n    title: {\n      text: '投票人士年齡分布',\n      x: '40px',\n      y: '5px',\n      align: 'left',\n    },\n    subtitle: {\n      text: '佔全部',\n      x: '175px',\n      y: '5px',\n      align: 'left',\n      bold: false,\n      'font-size': '10px',\n      'font-color': '#7E7E7E',\n      'background-color': 'none',\n    },\n    plot: {\n      'bar-width': '25px',\n      'hover-state': {\n        visible: false,\n      },\n      animation: {\n        delay: 300,\n        sequence: 1,\n      },\n      valueBox: {\n        text: '%total',\n        rules: [\n          {\n            rule: '%stack-top == 0',\n            visible: 0,\n          },\n        ],\n        decimals: 0,\n      },\n    },\n    'scale-x': {\n      values: titles,\n      tick: {\n        visible: false,\n      },\n      guide: {\n        visible: false,\n      },\n      item: {\n        'font-color': '#8B8B8B',\n      },\n    },\n    'scale-y': {\n      short: true,\n      'line-color': '#7E7E7E',\n      tick: {\n        visible: false,\n      },\n      guide: {\n        'line-style': 'solid',\n      },\n      item: {\n        'font-color': '#8B8B8B',\n      },\n    },\n    series: [\n      {\n        values: data.male,\n        'background-color': '#003f5c',\n      },\n      {\n        values: data.female,\n        'background-color': '#ff6361',\n      },\n    ],\n    tooltip: {\n      visible: false,\n    },\n  }\n}\n\nclass VoterTurnoutChart extends Component {\n  componentDidMount() {\n    zingchart.render({\n      id: this.props.id,\n      // data: this.props.data,\n      data: chartJSON(this.props.data),\n    })\n  }\n\n  //Used to check the values being passed in to avoid unnecessary changes.\n  shouldComponentUpdate(nextProps, nextState) {\n    //Lazy object comparison\n    return !(JSON.stringify(nextProps.data) === JSON.stringify(this.props.data))\n  }\n\n  componentWillUpdate(nextProps) {\n    zingchart.exec(this.props.id, 'setdata', {\n      data: chartJSON(nextProps.data), //nextProps.data,\n    })\n  }\n\n  render() {\n    return (\n      <div\n        id={this.props.id}\n        style={{\n          width: this.props.width || '100%',\n          height: this.props.height || '450px',\n        }}\n      ></div>\n    )\n  }\n}\n\nexport default VoterTurnoutChart\n","import React, { Component } from 'react'\nimport * as d3 from 'd3'\n\n/**\n * Idea from https://gist.github.com/XavierGimenez/8070956\n */\n\nclass WaffleChart extends Component {\n  drawChart(data) {\n    var total = 0\n    var width,\n      height,\n      widthSquares = 20,\n      heightSquares = 20,\n      squareSize = 20,\n      squareValue = 0,\n      gap = 1,\n      theData = []\n    var color = d3.scaleOrdinal(d3.schemeCategory10)\n    //total\n\n    total = d3.sum(data, function(d) {\n      return d.population\n    })\n    //value of a square\n    squareValue = total / (widthSquares * heightSquares)\n    //remap data\n    data.forEach(function(d, i) {\n      d.population = +d.population\n      d.units = Math.round(d.population / squareValue)\n      d.percentage = Math.floor((d.population * 100) / total)\n      theData = theData.concat(\n        Array(d.units + 1)\n          .join(1)\n          .split('')\n          .map(function() {\n            return {\n              squareValue: squareValue,\n              units: d.units,\n              population: d.population,\n              percentage: d.percentage,\n              groupIndex: i,\n            }\n          })\n      )\n    })\n    width = squareSize * widthSquares + widthSquares * gap + 25\n    height = squareSize * heightSquares + heightSquares * gap + 25\n    d3.select('#waffle')\n      .append('svg')\n      .attr('width', width)\n      .attr('height', height)\n      .append('g')\n      .selectAll('div')\n      .data(theData)\n      .enter()\n      .append('rect')\n      .attr('width', squareSize)\n      .attr('height', squareSize)\n      .attr('fill', function(d) {\n        return color(d.groupIndex)\n      })\n      .attr('y', function(d, i) {\n        // const row = i % heightSquares;\n        // return (heightSquares * squareSize) - ((row * squareSize) + (row * gap))\n        const row = Math.floor(i / widthSquares)\n        return row * squareSize + row * gap\n      })\n      .attr('x', function(d, i) {\n        //group n squares for column\n        // const col = Math.floor(i / heightSquares);\n        // return (col * squareSize) + (col * gap);\n        const col = i % widthSquares\n        return col * squareSize + col * gap\n      })\n      .append('title')\n      .text(function(d, i) {\n        return (\n          data[d.groupIndex].name +\n          ' | ' +\n          d.population +\n          ' , ' +\n          d.percentage +\n          '%'\n        )\n      })\n    //add legend with categorical data\n    var legend = d3\n      .select('#legend')\n      .append('svg')\n      .attr('width', 300)\n      .attr('height', 200)\n      .append('g')\n      .selectAll('div')\n      .data(data)\n      .enter()\n      .append('g')\n      .attr('transform', function(d, i) {\n        return 'translate(0,' + i * 20 + ')'\n      })\n    legend\n      .append('rect')\n      .attr('width', 18)\n      .attr('height', 18)\n      .style('fill', function(d, i) {\n        return color(i)\n      })\n    legend\n      .append('text')\n      .attr('x', 25)\n      .attr('y', 13)\n      .text(function(d) {\n        return d.name\n      })\n    //add value of a unit square\n    var legend2 = d3\n      .select('#legend')\n      .select('svg')\n      .append('g')\n      .attr('transform', 'translate(200,0)')\n    legend2\n      .append('text')\n      .attr('y', '14')\n      .attr('font-size', '18px')\n      .text('Total: ' + total)\n      .attr('fill', '#444444')\n  }\n\n  componentDidMount() {\n    this.drawChart(this.props.data)\n  }\n\n  render() {\n    return (\n      <>\n        <div id=\"waffle\"></div>\n\n        <div id=\"legend\"></div>\n      </>\n    )\n  }\n}\n\nexport default WaffleChart\n","import React, { Component } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport PropTypes from 'prop-types'\nimport gql from 'graphql-tag'\nimport { Query } from 'react-apollo'\nimport VoterTurnoutChart from './VoterTurnoutChart'\nimport WaffleChart from '../charts/WaffleChart'\n\n// TODO: change this to dcd data\nconst QUERY_FETCH_VOTES = gql`\n  query($year: Int!, $code: String!) {\n    dc_constituencies(where: { year: { _eq: $year }, code: { _eq: $code } }) {\n      candidates_aggregate {\n        aggregate {\n          sum {\n            votes\n          }\n        }\n      }\n      candidates {\n        votes\n        person {\n          name_zh\n          name_en\n        }\n      }\n      vote_stat {\n        total_votes\n        total_voters\n        total_voted_voters\n        population_excluded_foreign_worker\n        population_excluded_foreign_worker_lte_age_15\n        population_excluded_foreign_worker_lte_age_20\n      }\n      station_stats {\n        station_code\n        name_en\n        name_zh\n        votes {\n          votes\n          age\n          gender\n        }\n      }\n    }\n  }\n`\nconst Container = styled.div`\n   {\n    padding: 0px 15px 100px 25px;\n  }\n`\n\nconst getDataForWaffleChart = (voteStat, candidates) => {\n  const {\n    total_votes,\n    total_voters,\n    total_voted_voters,\n    population_excluded_foreign_worker,\n    population_excluded_foreign_worker_lte_age_15,\n    // population_excluded_foreign_worker_lte_age_20\n  } = voteStat\n\n  // check first the data\n  // TODO: the data should be good enough to remove this checking\n  if (\n    population_excluded_foreign_worker_lte_age_15 < total_voters ||\n    total_voters === 0 ||\n    total_voted_voters === 0\n  ) {\n    return []\n  }\n\n  const voteStats = [\n    {\n      name: '不能投票',\n      // population: population_excluded_foreign_worker - population_excluded_foreign_worker_lte_age_15,\n      population: population_excluded_foreign_worker - total_voters,\n    },\n    {\n      name: '沒有投票',\n      population:\n        population_excluded_foreign_worker_lte_age_15 - total_voted_voters,\n      // total_votes - total_voted_voters = registered but didn't vote?\n    },\n    {\n      name: '投票失效',\n      population: total_voted_voters - total_votes,\n      // total_votes - total_voted_voters = registered but didn't vote?\n    },\n  ]\n\n  candidates.forEach(({ votes, person: { name_zh, name_en } }) => {\n    voteStats.push({\n      name: `投給${name_zh || name_en}`,\n      population: votes,\n      // total_votes - total_voted_voters = registered but didn't vote?\n    })\n  })\n\n  return voteStats\n}\n\nclass MainAreas extends Component {\n  static propTypes = {\n    year: PropTypes.number.isRequired,\n    code: PropTypes.string.isRequired,\n    district: PropTypes.object.isRequired,\n  }\n\n  render() {\n    const { year, code } = this.props\n    return (\n      <Query\n        query={QUERY_FETCH_VOTES}\n        variables={{ year: parseInt(year, 10), code }}\n      >\n        {({ loading, error, data }) => {\n          if (loading) return null\n          if (error) return `Error! ${error}`\n          const { candidates, vote_stat } = data.dc_constituencies[0]\n\n          let voteStats = []\n          if (vote_stat) {\n            voteStats = getDataForWaffleChart(vote_stat, candidates)\n          }\n\n          const stats = data.dc_constituencies[0].station_stats\n          const barVote = { data: {} }\n          barVote.total = stats.reduce((acc, cur) => {\n            const sub_total = cur.votes.reduce((acc, cur) => {\n              if (typeof barVote.data[cur.age] === 'undefined') {\n                barVote.data[cur.age] = {}\n              }\n              if (typeof barVote.data[cur.age][cur.gender] === 'undefined') {\n                barVote.data[cur.age][cur.gender] = 0\n              }\n              barVote.data[cur.age][cur.gender] += cur.votes\n              return acc + cur.votes\n            }, 0)\n            return acc + sub_total\n          }, 0)\n          return (\n            <Container>\n              <Typography variant=\"h4\">人口資料</Typography>\n              <VoterTurnoutChart\n                id={`${year}_${code}_voter_turnout`}\n                data={barVote}\n              />\n              {voteStats.length > 0 ? (\n                <WaffleChart\n                  id={`${year}_${code}_voter_treemap`}\n                  data={voteStats}\n                />\n              ) : (\n                ''\n              )}\n            </Container>\n          )\n        }}\n      </Query>\n    )\n  }\n}\n\nexport default MainAreas\n","import React, { Component } from 'react'\nimport Box from '@material-ui/core/Box'\nimport OLMap from '../../components/OLMap'\nimport { Query } from 'react-apollo'\nimport DistrictCard from 'components/district/DistrictCard'\nimport MainAreas from 'components/district/MainAreas'\nimport CandidateList from 'components/district/CandidateList'\nimport Metrics from 'components/district/Metrics'\nimport styled from 'styled-components'\nimport { bps } from 'ui/responsive'\n\nimport { QUERY_CONSTITUENCIES } from 'queries/gql'\n\nconst FullWidthBox = styled(Box)`\n  && {\n    padding-top: 4rem;\n    width: 100%;\n  }\n`\n\nconst LowerBackgroundContainer = styled(Box)`\n  && {\n    width: 100vw;\n    position: relative;\n    margin-left: -50vw;\n    left: 50%;\n    background-color: #fafafa;\n  }\n`\n\nconst FlexRowContainer = styled(Box)`\n  && {\n    display: flex;\n    flex-wrap: wrap;\n    align-content: flex-start;\n    ${bps.up('md')} {\n      width: 100%;\n    }\n\n    ${bps.up('lg')} {\n      width: 1440px;\n    }\n    margin: auto;\n  }\n`\n\nconst DistrictCardContainer = styled(Box)`\n  && {\n    padding-left: 30px;\n    margin: 0px;\n    width: 400px;\n    height: 400px;\n\n    ${bps.down('md')} {\n      margin: 10px;\n      width: 100%;\n      padding: 0px;\n    }\n  }\n`\n\nclass DistrictPage extends Component {\n  shouldComponentUpdate(nextProps, nextState) {\n    //  if (this.props.route.path === nextProps.route.path) return false;\n    return true\n  }\n\n  handleCandidateSelected = candidateId => {\n    this.props.history.push(`/profile/${candidateId}`)\n  }\n\n  handleChangeDistrict = (year, code) => {\n    if (!year || !code) return\n    this.props.history.push(`/district/${year}/${code}`)\n  }\n\n  onPrevElection() {\n    const {\n      match: {\n        params: { year, code },\n      },\n    } = this.props\n    this.props.history.push(`/district/${parseInt(year, 10) - 4}/${code}`)\n  }\n\n  onNextElection() {\n    const {\n      match: {\n        params: { year, code },\n      },\n    } = this.props\n    this.props.history.push(`/district/${parseInt(year, 10) + 4}/${code}`)\n  }\n\n  render() {\n    const {\n      match: {\n        params: { year, code },\n      },\n    } = this.props\n\n    return (\n      <>\n        <FlexRowContainer>\n          <Box\n            width={{ sm: '100%', md: '960px' }}\n            height={{ sm: '300px', md: '400px' }}\n          >\n            <OLMap\n              year={year}\n              code={code}\n              changeDistrict={this.handleChangeDistrict}\n            />\n          </Box>\n          <Query query={QUERY_CONSTITUENCIES} variables={{ year, code }}>\n            {({ loading, error, data }) => {\n              if (loading) return null\n              if (error) return `Error! ${error}`\n              const district = data.dcd_constituencies[0]\n              return (\n                <>\n                  <DistrictCardContainer>\n                    <DistrictCard\n                      {...district}\n                      year={parseInt(year, 10)}\n                      code={code}\n                      onNextElection={this.onNextElection.bind(this)}\n                      onPrevElection={this.onPrevElection.bind(this)}\n                    />\n                  </DistrictCardContainer>\n                  <FullWidthBox>\n                    <MainAreas areas={district.main_areas || []} />\n                  </FullWidthBox>\n                  <LowerBackgroundContainer>\n                    <FlexRowContainer>\n                      <FullWidthBox>\n                        <Metrics\n                          year={parseInt(year, 10)}\n                          code={code}\n                          district={district}\n                        ></Metrics>\n                      </FullWidthBox>\n                      <FullWidthBox>\n                        <CandidateList\n                          candidates={district.candidates}\n                          year={parseInt(year, 10)}\n                          code={code}\n                          handleCandidateSelected={this.handleCandidateSelected}\n                        />\n                      </FullWidthBox>\n                    </FlexRowContainer>\n                  </LowerBackgroundContainer>\n                </>\n              )\n            }}\n          </Query>\n        </FlexRowContainer>\n      </>\n    )\n  }\n}\n\nexport default DistrictPage\n","import React, { Component } from 'react'\nimport Map from 'ol/Map'\nimport View from 'ol/View'\nimport TileLayer from 'ol/layer/Tile'\nimport VectorLayer from 'ol/layer/Vector'\nimport VectorSource from 'ol/source/Vector'\nimport XYZ from 'ol/source/XYZ'\nimport GeoJSON from 'ol/format/GeoJSON'\nimport { Style, Stroke, Fill, Text } from 'ol/style'\nimport Select from 'ol/interaction/Select'\nimport styled from 'styled-components'\n\nimport dc2003 from '../data/DCCA_2003'\nimport dc2007 from '../data/DCCA_2007'\nimport dc2011 from '../data/DCCA_2011'\nimport dc2015 from '../data/DCCA_2015'\nimport dc2019 from '../data/DCCA_2019'\n\nconst MapContainer = styled.div`\n  width: 100%;\n  height: 100%;\n`\n\nconst regionStyle = new Style({\n  fill: new Fill({\n    color: 'rgba(255, 255, 255, 0.2)',\n  }),\n  stroke: new Stroke({\n    color: '#319FD3',\n    width: 1,\n  }),\n  text: new Text({\n    font: '16px Calibri,sans-serif',\n    fill: new Fill({\n      color: '#000',\n    }),\n    stroke: new Stroke({\n      color: '#fff',\n      width: 2,\n    }),\n  }),\n})\n\nconst highlightStyle = new Style({\n  stroke: new Stroke({\n    color: '#f00',\n    width: 1,\n  }),\n  fill: new Fill({\n    color: 'rgba(255,0,0,0.1)',\n  }),\n  text: new Text({\n    font: '16px Calibri,sans-serif',\n    fill: new Fill({\n      color: '#000',\n    }),\n    stroke: new Stroke({\n      color: '#f00',\n      width: 2,\n    }),\n  }),\n})\n\nclass DCCACompareMap extends Component {\n  featureOverlay\n  highlightedFeature\n\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  componentDidMount() {\n    const { year, code } = this.props\n    const dc = [dc2003, dc2007, dc2011, dc2015, dc2019].find(\n      d => d.name === `DCCA_${year}`\n    )\n    let isDCDataExist = dc ? true : false\n    let featuresLayer\n\n    if (isDCDataExist) {\n      this.featureSource = new VectorSource({\n        features: new GeoJSON().readFeatures(dc),\n      })\n\n      featuresLayer = new VectorLayer({\n        source: this.featureSource,\n        style: feature => {\n          regionStyle.getText().setText(feature.getProperties().CNAME)\n          return regionStyle\n        },\n      })\n    }\n\n    // create map object with feature layer\n    const layers = [\n      //default OSM layer\n      new TileLayer({\n        source: new XYZ({\n          url:\n            'https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}',\n        }),\n      }),\n    ]\n\n    if (isDCDataExist) {\n      layers.push(featuresLayer)\n    }\n\n    const map = new Map({\n      target: this.refs.mapContainer,\n      layers,\n      view: new View({\n        projection: 'EPSG:4326',\n        center: [114.2029, 22.3844],\n        zoom: 13,\n      }),\n    })\n\n    this.featureOverlay = new VectorLayer({\n      source: new VectorSource(),\n      map: map,\n      style: function(feature) {\n        highlightStyle.getText().setText(`${feature.getProperties().CNAME}`)\n        return highlightStyle\n      },\n    })\n\n    if (isDCDataExist) {\n      // Fit to feature\n      const features = this.featureSource.getFeatures()\n      for (let i = 0; i < features.length; i++) {\n        if (features[i].getProperties().CACODE === code) {\n          const extent = features[i].getGeometry().getExtent()\n          map.getView().fit(extent, {\n            size: map.getSize(),\n            padding: [10, 10, 10, 10],\n          })\n\n          this.highlightFeature(features[i])\n          break\n        }\n      }\n    }\n\n    this.setState({\n      map,\n      view: map.getView(),\n      featuresLayer: isDCDataExist ? featuresLayer : null,\n    })\n\n    const select = new Select()\n\n    if (select !== null) {\n      map.addInteraction(select)\n      select.on('select', this.handleMapClick)\n    }\n  }\n\n  highlightFeature(feature) {\n    if (this.highlightedFeature) {\n      this.featureOverlay.getSource().removeFeature(this.highlightedFeature)\n    }\n\n    this.featureOverlay.getSource().addFeature(feature)\n    this.highlightedFeature = feature\n  }\n\n  handleMapClick = e => {\n    const { year, changeDistrict } = this.props\n    const selectedFeature = e.target.getFeatures().item(0)\n\n    if (selectedFeature) {\n      this.highlightFeature(selectedFeature)\n      changeDistrict(year, selectedFeature.get('CACODE'))\n      this.state.map.getView().fit(selectedFeature.getGeometry().getExtent(), {\n        duration: 200,\n      })\n    }\n  }\n\n  render() {\n    return <MapContainer ref=\"mapContainer\"> </MapContainer>\n  }\n}\n\nexport default DCCACompareMap\n","import styled from 'styled-components'\nimport Chip from '@material-ui/core/Chip'\nimport React from 'react'\n\nconst StyledChip = styled(Chip)`\n  && {\n    color: ${props => props.color};\n  }\n`\n\nexport const Tag = props => {\n  return (\n    <StyledChip\n      label={props.value}\n      variant=\"outlined\"\n      color=\"secondary\"\n      // avatar={<Avatar>MB</Avatar>}\n      onClick={props.handleClick}\n    />\n  )\n}\n","import styled from 'styled-components'\nimport { NavLink } from 'react-router-dom'\nimport Link from '@material-ui/core/Link'\n\nexport const UnstyledLink = styled(Link)`\n  text-decoration: unset;\n  color: unset;\n  font-style: unset;\n  cursor: pointer;\n`\n\nexport const UnstyledNavLink = styled(NavLink)`\n  text-decoration: unset;\n  color: unset;\n  font-style: unset;\n  cursor: pointer;\n`\n","import React, { Component } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport Grid from '@material-ui/core/Grid'\nimport Box from '@material-ui/core/Box'\nimport Avatar from '@material-ui/core/Avatar'\nimport { UnStyledPlainCard, PlainCard } from '../molecules/Card'\nimport { Tag } from '../atoms/Tag'\nimport { UnstyledNavLink } from '../atoms/UnstyledLink'\nimport { getTagsForPerson, getElectionResults } from 'utils/helper'\n\nconst StyledAvatar = styled(Avatar)`\n  && {\n    margin: 10px;\n    width: 60px;\n    height: 60px;\n  }\n`\nclass Councillor extends Component {\n  static propTypes = {\n    // areas: PropTypes.array.isRequired\n  }\n\n  homeUrl = 'https://cswbrian.github.io/district-councils-dashboard'\n\n  render() {\n    const { districts } = this.props\n\n    // Filter out small intersect area\n    const filteredDistricts = districts.filter(\n      district =>\n        district.intersect_area === null || district.intersect_area > 1000\n    )\n\n    // Reformat the councillor object\n    const councillors = filteredDistricts.map(district => {\n      const predecessor = district.predecessor\n      const electionResults = getElectionResults(\n        predecessor.councillors[0].person\n      )\n      return {\n        code: predecessor.code,\n        name_zh: predecessor.name_zh,\n        person: predecessor.councillors[0].person,\n        political_affiliation: predecessor.councillors[0].political_affiliation,\n        electionResults,\n        lastElectionResult:\n          electionResults[electionResults.lastParticipatedYear],\n      }\n    })\n\n    const tags = ['競逐連任'] //getTagsForPerson(councillor.person)\n    return (\n      <PlainCard>\n        <Typography variant=\"h6\">現任區議員</Typography>\n        {filteredDistricts.length > 1 && (\n          <Typography variant=\"h6\">{`此區與上屆${filteredDistricts.length}個選區重疊`}</Typography>\n        )}\n        {councillors.map(councillor => (\n          <UnstyledNavLink\n            key={councillor.code}\n            to={`/profile/${councillor.person.id}`}\n          >\n            <Box>\n              <Box display=\"flex\">\n                <Box flexGrow={1}>\n                  <Typography variant=\"h6\" gutterBottom>\n                    2015{' '}\n                    {`${\n                      councillor.person.councillors.find(\n                        c =>\n                          c.year ===\n                          councillor.electionResults.lastParticipatedYear\n                      ).constituency.name_zh\n                    }（${\n                      councillor.person.councillors.find(\n                        c =>\n                          c.year ===\n                          councillor.electionResults.lastParticipatedYear\n                      ).constituency.code\n                    }）`}\n                  </Typography>\n                </Box>\n                <Box>\n                  {tags.length > 0 &&\n                    tags.map((tag, index) => <Tag value={tag} key={index} />)}\n                </Box>\n              </Box>\n\n              <Grid container wrap=\"nowrap\" spacing={0}>\n                <Grid item>\n                  <StyledAvatar\n                    src={`${this.homeUrl}/static/images/avatar/${councillor.person.uuid}.jpg`}\n                    imgProps={{\n                      onError: e => {\n                        e.target.src =\n                          this.homeUrl + '/static/images/avatar/default.png'\n                      },\n                    }}\n                  />\n                </Grid>\n                <Grid item xs>\n                  <Typography variant=\"h4\" gutterBottom>\n                    {councillor.person.name_zh}\n                  </Typography>\n                  <Box display=\"flex\">\n                    <Box pr={1} alignSelf=\"flex-end\">\n                      <Typography variant=\"body2\">報稱政治聯繫</Typography>\n                    </Box>\n                    <Box>\n                      <Typography variant=\"body1\">\n                        {councillor.political_affiliation}\n                      </Typography>\n                    </Box>\n                  </Box>\n\n                  <Box display=\"flex\">\n                    <Box pr={1} alignSelf=\"flex-end\">\n                      <Typography variant=\"body2\">\n                        {councillor.electionResults.lastParticipatedYear}\n                        選舉結果\n                      </Typography>\n                    </Box>\n                    <Box>\n                      <Typography variant=\"body1\">\n                        {councillor.lastElectionResult.diff === 0 && '自動當選'}\n                        {councillor.lastElectionResult.diff > 0 &&\n                          `${\n                            councillor.lastElectionResult.diff /\n                              councillor.lastElectionResult.votes >\n                            0.2\n                              ? '大'\n                              : councillor.lastElectionResult.diff /\n                                  councillor.lastElectionResult.votes <\n                                0.05\n                              ? '險'\n                              : ''\n                          }勝${councillor.lastElectionResult.diff}票`}\n                      </Typography>\n                    </Box>\n                  </Box>\n                </Grid>\n              </Grid>\n            </Box>\n          </UnstyledNavLink>\n        ))}\n      </PlainCard>\n    )\n  }\n}\n\nexport default Councillor\n","export const getTagsForPerson = person => {\n  const tags = []\n  if (!person.candidates && !person.councillors) {\n    return tags\n  }\n  // TODO: remove this if he is not attending the 2019 election\n  const attending2019Election = true\n\n  if (person.councillors) {\n    const current = person.councillors.find(c => c.year === 2015)\n    if (current && attending2019Election) {\n      tags.push('競逐連任')\n    }\n  }\n\n  if (person.candidates) {\n    const sortedElections = person.candidates.sort((a, b) => b.year - a.year)\n    if (attending2019Election) {\n      tags.push(`曾參選${sortedElections.length}屆`)\n    }\n\n    let electedCount = 0\n    for (let i = 0; i < sortedElections.length; i++) {\n      const { is_won } = sortedElections[i]\n      if (!is_won) {\n        break\n      }\n      electedCount++\n    }\n\n    if (electedCount > 1) {\n      tags.push(`連任${electedCount}屆`)\n    }\n\n    const lastElection = sortedElections[0]\n\n    if (lastElection.constituency.candidates.length === 1) {\n      tags.push(`自動當選`)\n    }\n\n    if (lastElection.constituency.year === 2015) {\n      const myVotes = lastElection.constituency.candidates.find(\n        c => c.person_id === person.id\n      ).votes\n      const highestVotes = lastElection.constituency.candidates\n        .filter(c => c.person_id !== person.id)\n        .map(c => c.votes)\n        .reduce((c, v) => Math.max(c, v), 0)\n\n      const diff = myVotes - highestVotes\n      if (diff > 0) {\n        // win\n        if (diff <= 50 && highestVotes > 1000) {\n          tags.push(`險勝${diff}票`)\n        } else {\n          tags.push(`贏${diff}票`)\n        }\n      } else if (diff < 0) {\n        // lose\n        tags.push(`輸${-diff}票`)\n      }\n    }\n  }\n\n  return tags\n}\n\nexport const getElectionResults = person => {\n  const result = {}\n  if (!person.candidates && !person.councillors) {\n    return result\n  }\n\n  if (person.candidates) {\n    const sortedElections = person.candidates.sort((a, b) => b.year - a.year)\n    result.lastParticipatedYear = sortedElections[0].year\n    result.participationCount = sortedElections.length\n\n    let relectedCount = 0\n    for (let i = 0; i < sortedElections.length; i++) {\n      const { is_won } = sortedElections[i]\n      if (!is_won) {\n        break\n      }\n      relectedCount++\n    }\n\n    result.relectedCount = relectedCount - 1\n\n    sortedElections.forEach(election => {\n      const year = election.constituency.year\n      const yearResult = {}\n\n      yearResult.uncontested =\n        election.constituency.candidates.length === 1 ? true : false\n\n      const myVotes = election.constituency.candidates.find(\n        c => c.person_id === person.id\n      ).votes\n      const highestVotes = election.constituency.candidates\n        .filter(c => c.person_id !== person.id)\n        .map(c => c.votes)\n        .reduce((c, v) => Math.max(c, v), 0)\n\n      yearResult.votes = myVotes\n      yearResult.diff = myVotes - highestVotes\n\n      result[year] = yearResult\n    })\n  }\n\n  return result\n}\n","import React, { useRef, useState, useEffect, useLayoutEffect } from 'react'\nimport * as d3 from 'd3'\nimport _ from 'lodash'\n\nexport default props => {\n  const [dimensions, setDimensions] = useState({ width: 0, height: 0 })\n\n  const d3Container = useRef(null)\n\n  const drawChart = data => {\n    if (dimensions.width === 0) {\n      return\n    }\n\n    const color = d3.scaleOrdinal().range(['#ca0020', '#f4a582'])\n\n    const margin = { top: 50, right: 20, bottom: 30, left: 40 }\n\n    const width = dimensions.width - margin.left - margin.right\n    const height = dimensions.width - margin.top - margin.bottom\n\n    const max = _.max(_.maxBy(data, r => _.max(r.values)).values)\n\n    const svg = d3\n      .select(d3Container.current)\n      .attr('width', width + margin.left + margin.right)\n      .attr('height', height + margin.top + margin.bottom)\n\n    svg.selectAll('g').remove()\n    const chart = svg\n      .append('g')\n      .attr('transform', `translate(${margin.left}, ${margin.top})`)\n\n    const yScale = d3\n      .scaleLinear()\n      .range([height, 0])\n      .domain([0, max]) // space for showing legend\n\n    const x0 = d3\n      .scaleBand()\n      .range([0, width])\n      .domain(data.map(s => s.label))\n      .padding(0.1)\n\n    const x1 = d3\n      .scaleBand()\n      .domain(d3.range(2))\n      .range([0, x0.bandwidth() - 10])\n    // y axis\n    chart.append('g').call(d3.axisLeft(yScale))\n\n    // draw the lines\n    chart\n      .append('g')\n      .style('color', 'lightgrey')\n      .style('stroke-opacity', '0.7')\n      .call(\n        d3\n          .axisLeft(yScale)\n          .tickSizeOuter(0)\n          .tickSizeInner(-width)\n          .tickFormat('')\n      )\n\n    // x axis\n    chart\n      .append('g')\n      .attr('transform', `translate(0, ${height})`)\n      .call(d3.axisBottom(x0))\n      .selectAll('text')\n      .attr('transform', 'translate(0,0)rotate(-45)')\n      .style('text-anchor', 'end')\n      .style('fill', '#69a3b2')\n\n    const slice = svg\n      .selectAll('.slice')\n      .data(data)\n      .enter()\n      .append('g')\n      .attr('class', 'g')\n      .attr(\n        'transform',\n        d => `translate(${x0(d.label) + margin.left + 5},${margin.top})`\n      )\n\n    slice\n      .selectAll('rect')\n      .data(d => d.values)\n      .enter()\n      .append('rect')\n      .attr('width', x1.bandwidth())\n      .attr('x', (d, i) => x1(i))\n      .attr('y', d => yScale(0))\n      .attr('height', d => height - yScale(0))\n      .style('fill', (d, i) => color(i))\n\n    slice\n      .selectAll('rect')\n      .transition()\n      .delay(function(d) {\n        return Math.random() * 1000\n      })\n      .duration(1000)\n      .attr('y', d => yScale(d))\n      .attr('height', d => height - yScale(d))\n\n    //Legend\n    const legend = svg\n      .selectAll('.legend')\n      .data(data[0].labels)\n      .enter()\n      .append('g')\n      .attr('class', 'legend')\n      .attr('transform', (d, i) => `translate(0, ${i * 20})`)\n\n    legend\n      .append('rect')\n      .attr('x', width - 20)\n      .attr('width', 14)\n      .attr('height', 14)\n      .style('fill', function(d) {\n        return color(d)\n      })\n\n    legend\n      .append('text')\n      .attr('x', width)\n      .attr('y', 7)\n      .attr('dy', '.35em')\n      .style('text-anchor', 'start')\n      .text(function(d) {\n        return d\n      })\n  }\n\n  useEffect(() => {\n    drawChart(props.data)\n  })\n\n  useLayoutEffect(() => {\n    if (d3Container.current) {\n      setDimensions({\n        width: d3Container.current.clientWidth,\n      })\n    }\n  }, [])\n\n  return (\n    <>\n      <svg\n        ref={d3Container}\n        style={{ height: dimensions.width, width: '100%' }}\n      ></svg>\n    </>\n  )\n}\n","import React, { useState } from 'react'\nimport GroupedBarChart from 'components/charts/GroupedBarChart'\nimport { Query } from 'react-apollo'\nimport _ from 'lodash'\nimport { QUERY_CONSTITUENCY_STATS } from 'queries/gql'\nimport { Button, Typography } from '@material-ui/core'\n\nexport default props => {\n  const filters = [null, 'FEMALE', 'MALE']\n  const [filterIndex, setFilterIndex] = useState(0)\n\n  const changeFilter = () => {\n    let index = filterIndex + 1\n    if (index === filters.length) {\n      index = 0\n    }\n    setFilterIndex(index)\n  }\n\n  const getDataForChat = voteStats => {\n    /**\n     * voteStats = [{\n     *  type: \"BY_GENDER_AGE\",\n     *  subtype: \"VOTERS/NEW_VOTERS\",\n     *  category_1: \"FEMALE/MALE\",\n     *  category_2: \"21-25\"\n     *  count: 10\n     * }]\n     */\n\n    const isFiltered = gender => {\n      if (gender === 'MALE' && filterIndex === 1) {\n        return false\n      } else if (gender === 'FEMALE' && filterIndex === 2) {\n        return false\n      }\n      return true\n    }\n    const data = _.values(_.groupBy(voteStats, stat => stat.category_2))\n    data.forEach(row => {\n      row.label = row[0].category_2\n      row.values = _.values(_.groupBy(row, r => r.subtype)).map(r =>\n        r\n          .filter(v => isFiltered(v.category_1))\n          .map(v => v.count)\n          .reduce((c, v) => c + v, 0)\n      )\n      row.values = [row.values[0] - row.values[1], row.values[0]]\n      row.labels = ['2018', '2019']\n    })\n\n    /**\n     * [{\n     *  label: \"21-22\",\n     *  values: [200, 159] // -> 2019 vs 2018\n     * }]\n     */\n\n    return data\n  }\n\n  const getMeta = voteStats => {\n    const meta = {\n      increased: 0,\n      mostIncreasedGroup: null,\n    }\n    const total = voteStats\n      .filter(v => v.subtype === 'VOTERS')\n      .map(v => v.count)\n      .reduce((c, v) => c + v, 0)\n\n    const newVotes = voteStats\n      .filter(v => v.subtype === 'NEW_VOTERS')\n      .map(v => v.count)\n      .reduce((c, v) => c + v, 0)\n\n    let max = 0\n    const groupedByAge = _.groupBy(voteStats, v => v.category_2)\n    Object.keys(groupedByAge).forEach(age => {\n      const genders = groupedByAge[age]\n      const groupedByGender = _.groupBy(genders, v => v.category_1)\n      Object.keys(groupedByGender).forEach(gender => {\n        const types = groupedByGender[gender]\n        const groupedByType = _.groupBy(types, v => v.subtype)\n        const newVoters = groupedByType['NEW_VOTERS'][0].count\n        const totalVoters = groupedByType['VOTERS'][0].count\n        if (newVoters / totalVoters > max) {\n          max = _.round(newVoters / totalVoters, 4)\n          meta.mostIncreasedGroup = {\n            gender,\n            age,\n            max,\n          }\n        }\n      })\n    })\n    // .filter(v => v.subtype === 'NEW_VOTERS')\n    // .forEach(v => {\n    //   if (v.count > max) {\n    //     meta.mostIncreasedGroup = {\n    //       gender: v.category_1,\n    //       age: v.category_2\n    //     }\n    //   }\n    // })\n    meta.increased = _.round(newVotes / total, 4)\n\n    return meta\n  }\n\n  return (\n    // TODO: support page other than battleground page\n    <>\n      <Query\n        query={QUERY_CONSTITUENCY_STATS}\n        variables={{ year: 2019, code: props.code }}\n      >\n        {({ loading, error, data }) => {\n          if (loading) return null\n          if (error) return `Error! ${error}`\n\n          if (data.dcd_constituencies.length === 0) {\n            console.error(`cannot find constituency. code: ${props.code}`)\n            return `Error!`\n          }\n          // transform the data to desire format\n          const chartData = getDataForChat(\n            data.dcd_constituencies[0].vote_stats\n          )\n          const meta = getMeta(data.dcd_constituencies[0].vote_stats)\n          return (\n            <>\n              <Typography variant=\"h2\">\n                選民增加{_.round(meta.increased * 100, 2)}%\n              </Typography>\n              <Typography variant=\"h4\">\n                {meta.mostIncreasedGroup.age}歲的\n                {meta.mostIncreasedGroup.gender === 'MALE' ? '男' : '女'}\n                性選民增加了\n                {_.round(meta.mostIncreasedGroup.max * 100, 2)}%\n              </Typography>\n              <Button onClick={changeFilter}>\n                {filterIndex === 0\n                  ? '顯示所有'\n                  : filterIndex === 1\n                  ? '只顯示男性選民'\n                  : '只顯示女性選民'}\n              </Button>\n              <GroupedBarChart data={chartData} />\n            </>\n          )\n        }}\n      </Query>\n    </>\n  )\n}\n","import styled from 'styled-components'\nimport Chip from '@material-ui/core/Chip'\nimport React from 'react'\nimport Box from '@material-ui/core/Box'\nimport { bps } from 'ui/responsive'\n\nexport default styled(Box)`\n  && {\n    display: flex;\n    flex-wrap: wrap;\n    align-content: flex-start;\n    width: 100%;\n    margin: auto;\n  }\n`\n","import styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\n\nexport default styled(Box)`\n  && {\n    display: flex;\n    flex-direction: column;\n    flex-wrap: wrap;\n    align-items: flex-start;\n    width: 100%;\n    margin: auto;\n  }\n`\n","import React, { Component } from 'react'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport Typography from '@material-ui/core/Typography'\nimport Paper from '@material-ui/core/Paper'\nimport IconButton from '@material-ui/core/IconButton'\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward'\nimport { Tag } from '../atoms/Tag'\nimport { Button } from '@material-ui/core'\nimport DistrictNewVoterChartContainer from 'components/DistrictNewVoterChartContainer'\nimport Columns from 'components/atoms/Columns'\nimport Rows from 'components/atoms/Rows'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport KeyboardArrowUp from '@material-ui/icons/KeyboardArrowUp'\nconst Container = styled(Paper)`\n  && {\n    width: 100%;\n    padding: 16px;\n    box-shadow: none;\n  }\n`\n\nclass DCCAOverview extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      showGraph: false,\n    }\n  }\n\n  renderPrevElectionButton(year) {\n    return year > 1999 ? (\n      <IconButton aria-label=\"arrow_back\" onClick={this.props.onPrevElection}>\n        <ArrowBackIcon />\n      </IconButton>\n    ) : (\n      // if there is no next button, show a 48x48 empty box to align the 2 elements on the right\n      <div style={{ width: '48px', height: '48px' }}></div>\n    )\n  }\n\n  renderNextElectionButton(year) {\n    const nextElectionYear = year + 4\n    const currentYear = new Date().getFullYear()\n    return nextElectionYear <= currentYear ? (\n      <IconButton\n        aria-label=\"arrow_forward\"\n        onClick={this.props.onNextElection}\n      >\n        <ArrowForwardIcon />\n      </IconButton>\n    ) : (\n      // if there is no next button, show a 48x48 empty box to align the 2 elements on the left\n      <div style={{ width: '48px', height: '48px' }}></div>\n    )\n  }\n\n  toggleGraph() {\n    this.setState({\n      showGraph: !this.state.showGraph,\n    })\n  }\n\n  render() {\n    const { name_zh, year, code, dc_name_zh, tags, voterData } = this.props\n\n    const new_voters_percentage = (\n      (100 * voterData.aggregations.new_voters) /\n      voterData.aggregations.all_voters\n    ).toFixed(2)\n    return (\n      <Container>\n        <Rows>\n          <Columns>\n            <Typography variant=\"h6\" gutterBottom>\n              {year} {dc_name_zh}\n            </Typography>\n            {tags.map((tag, index) => (\n              <Tag key={index} value={tag.tag} />\n            ))}\n          </Columns>\n\n          <Columns>\n            <Typography variant=\"h3\" style={{ display: 'inline-block' }}>\n              {name_zh}\n            </Typography>\n            <Typography\n              variant=\"h5\"\n              style={{ display: 'inline-block', marginLeft: '8px' }}\n            >\n              {code}\n            </Typography>\n          </Columns>\n\n          <Button onClick={this.toggleGraph.bind(this)}>\n            <Typography variant=\"h6\">\n              選民人數 {voterData.aggregations.all_voters}{' '}\n              {`(${\n                new_voters_percentage > 0 ? '+' : '-'\n              }${new_voters_percentage}%)`}\n            </Typography>\n            {this.state.showGraph ? (\n              <KeyboardArrowUp fontSize=\"small\" />\n            ) : (\n              <ExpandMoreIcon fontSize=\"small\" />\n            )}\n          </Button>\n          {this.state.showGraph && (\n            <DistrictNewVoterChartContainer code={code} />\n          )}\n        </Rows>\n      </Container>\n    )\n  }\n}\n\nexport default DCCAOverview\n","import React, { Component } from 'react'\nimport Box from '@material-ui/core/Box'\nimport DCCACompareMap from '../../components/DCCACompareMap'\nimport { Query } from 'react-apollo'\nimport MainAreas from 'components/district/MainAreas'\nimport Councillor from 'components/district/Councillor'\nimport CandidateList from 'components/district/CandidateList'\nimport DCCAOverview from 'components/district/DCCAOverview'\nimport Button from '@material-ui/core/Button'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport Collapse from '@material-ui/core/Collapse'\nimport _ from 'lodash'\nimport { QUERY_CONSTITUENCIES } from 'queries/gql'\n\nconst groupVoteStat = voteStats => {\n  const data = _.groupBy(voteStats, stat => stat.subtype)\n  data.aggregations = {\n    all_voters: data.VOTERS.map(v => v.count).reduce((c, v) => c + v, 0),\n    new_voters: data.NEW_VOTERS.map(v => v.count).reduce((c, v) => c + v, 0),\n  }\n  return data\n}\nclass BattleGroundPage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      showMap: false,\n    }\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    //  if (this.props.route.path === nextProps.route.path) return false;\n    return true\n  }\n\n  handleCandidateSelected = candidateId => {\n    this.props.history.push(`/profile/${candidateId}`)\n  }\n\n  handleChangeDistrict = (year, code) => {\n    if (!year || !code) return\n    this.props.history.push(`/district/${year}/${code}`)\n  }\n\n  onPrevElection() {\n    const {\n      match: {\n        params: { code },\n      },\n    } = this.props\n    this.props.history.push(`/district/2015/${code}`)\n  }\n\n  onNextElection() {\n    const {\n      match: {\n        params: { year, code },\n      },\n    } = this.props\n    this.props.history.push(`/district/${parseInt(year, 10) + 4}/${code}`)\n  }\n\n  render() {\n    const { showMap } = this.state\n    const {\n      match: {\n        params: { year = 2019, code },\n      },\n    } = this.props\n\n    return (\n      <>\n        <Query query={QUERY_CONSTITUENCIES} variables={{ year, code }}>\n          {({ loading, error, data }) => {\n            if (loading) return null\n            if (error) return `Error! ${error}`\n            const district = data.dcd_constituencies[0]\n            const last_districts = district.predecessors\n\n            return (\n              <>\n                <DCCAOverview\n                  year={year}\n                  name_zh={district.name_zh}\n                  dc_name_zh={district.district.dc_name_zh}\n                  code={district.code}\n                  tags={district.tags}\n                  voterData={groupVoteStat(district.vote_stats)}\n                />\n                <Button onClick={() => this.setState({ showMap: !showMap })}>\n                  {showMap ? '隱藏地圖' : '顯示地圖'}\n                  <ExpandMoreIcon />\n                </Button>\n                <Collapse in={showMap}>\n                  <Box\n                    width={{ sm: '100%', md: '960px' }}\n                    height={{ sm: '300px', md: '400px' }}\n                  >\n                    <DCCACompareMap\n                      year={year}\n                      code={code}\n                      changeDistrict={this.handleChangeDistrict}\n                    />\n                  </Box>\n                </Collapse>\n                <MainAreas areas={district.main_areas || []} />\n                <Councillor districts={last_districts} />\n                <CandidateList\n                  candidates={district.candidates}\n                  // year={parseInt(year, 10)}\n                  // code={code}\n                  // handleCandidateSelected={this.handleCandidateSelected}\n                />\n              </>\n            )\n          }}\n        </Query>\n      </>\n    )\n  }\n}\n\nexport default BattleGroundPage\n","import { createMuiTheme } from '@material-ui/core/styles'\n\nexport const headingFontFamily = 'PingFangTC-Medium, sans-serif'\nexport const bodyFontFamily = 'PT Serif, sans-serif'\n\nexport const FONT_FAMILY = [\n  'PingFangTC',\n  'Noto Sans TC',\n  'sans-serif',\n  '-apple-system',\n  '\"Helvetica Neue\"',\n  'Arial',\n]\n\nexport const typography = {\n  useNextVariants: true,\n  fontSize: 16,\n  fontFamily: FONT_FAMILY.join(','),\n  h1: {\n    fontFamily: headingFontFamily,\n  },\n  h2: {\n    fontFamily: headingFontFamily,\n    fontSize: 50,\n    fontWeight: 500,\n  },\n  h3: {\n    fontFamily: headingFontFamily,\n    fontSize: 40,\n    fontWeight: 500,\n  },\n  h4: {\n    fontFamily: headingFontFamily,\n    fontSize: 30,\n    fontWeight: 500,\n  },\n  h5: {\n    fontFamily: headingFontFamily,\n    fontSize: 24,\n    fontWeight: 500,\n  },\n  h6: {\n    fontFamily: headingFontFamily,\n    fontSize: 18,\n    fontWeight: 500,\n  },\n  body1: {\n    fontFamily: bodyFontFamily,\n  },\n}\n\nexport default createMuiTheme({\n  typography,\n  palette: {\n    primary: {\n      light: '#ffffff',\n      main: '#000000',\n      dark: '#cccccc',\n    },\n    secondary: {\n      light: '#2c2c2c',\n      main: '#000000',\n      dark: '#000000',\n    },\n    background: {\n      default: '#ffffff',\n    },\n    button: {\n      primary: '#ffd731',\n      secondary: '#ffd731',\n    },\n  },\n})\n","import React, { Component } from 'react'\nimport { withStyles } from '@material-ui/core/styles'\nimport createMuiTheme from '../../ui/theme'\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider'\n\nconst theme = createMuiTheme\n\nconst styles = theme => ({\n  content: {},\n})\n\nclass NotFoundPage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  render() {\n    return (\n      <MuiThemeProvider theme={theme}>\n        TODO - <a href=\"https://notfound.collaction.hk/\">404</a>\n      </MuiThemeProvider>\n    )\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(NotFoundPage)\n","import DistrictNewVoterChartContainer from 'components/DistrictNewVoterChartContainer'\nimport React from 'react'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\n\nconst FlexRowContainer = styled(Box)`\n  && {\n    width: 100%;\n  }\n`\n\nexport default props => {\n  return (\n    <>\n      <FlexRowContainer>\n        <DistrictNewVoterChartContainer code={'A01'} />\n      </FlexRowContainer>\n    </>\n  )\n}\n","import React from 'react'\nimport AppBar from '@material-ui/core/AppBar'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport IconButton from '@material-ui/core/IconButton'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport SearchIcon from '@material-ui/icons/Search'\nimport styled from 'styled-components'\nimport Typography from '@material-ui/core/Typography'\nimport Slide from '@material-ui/core/Slide'\nimport { DRAWER_OPEN } from '../../reducers/drawer'\nimport ContextStore from 'ContextStore'\nimport { UnstyledNavLink } from '../atoms/UnstyledLink'\n\nconst StyledAppBar = styled(AppBar)`\n  && {\n    width: 100%;\n    box-shadow: none;\n  }\n`\n\nconst AppBarTitle = styled(UnstyledNavLink)`\n  && {\n    left: auto;\n    right: auto;\n    width: 100%;\n    position: absolute;\n  }\n`\n\nfunction MobileAppBar(props) {\n  const {\n    drawer: { dispatch },\n  } = React.useContext(ContextStore)\n\n  return (\n    <>\n      <StyledAppBar position=\"sticky\" color=\"primary\">\n        <Toolbar disableGutters>\n          <AppBarTitle to={'/'}>\n            <Typography variant=\"h3\" align=\"center\">\n              ✋🧡⚡\n            </Typography>\n          </AppBarTitle>\n\n          <IconButton\n            color=\"inherit\"\n            component=\"span\"\n            aria-label=\"Search\"\n            onClick={() => dispatch({ type: DRAWER_OPEN })}\n          >\n            <SearchIcon />\n          </IconButton>\n        </Toolbar>\n      </StyledAppBar>\n    </>\n  )\n}\n\nexport default MobileAppBar\n","import React from 'react'\nimport { Route, Switch } from 'react-router-dom'\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider'\nimport { ThemeProvider } from 'styled-components/'\nimport IndexPage from './pages'\nimport SearchPage from './pages/search'\nimport ProfilePage from './pages/profile'\nimport DistrictPage from './pages/district'\nimport BattleGroundPage from './pages/battleground'\nimport NotfoundPage from './pages/notfound'\nimport TestPage from 'pages/test'\nimport ApolloClient from 'apollo-boost'\nimport { ApolloProvider } from 'react-apollo'\nimport theme, { styledComponentTheme } from 'ui/theme/main'\nimport './App.css'\nimport Box from '@material-ui/core/Box'\nimport styled from 'styled-components'\nimport Drawer from '@material-ui/core/Drawer'\nimport MobileAppBar from './components/organisms/MobileAppBar'\nimport { makeStyles } from '@material-ui/core/styles'\nimport drawerReducer from 'reducers/drawer'\nimport ContextStore, { drawerInitialState } from 'ContextStore'\nimport ReactGA from \"react-ga\";\n\nconst client = new ApolloClient({\n  uri: process.env.REACT_APP_GRAPHQL_URI,\n})\n\nconst useStyles = makeStyles({\n  paper: {\n    width: '100%',\n  },\n})\n\nconst ContentContainer = styled(Box)`\n  && {\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n  }\n`\n\nconst Root = styled(Box)`\n  && {\n    display: flex;\n    margin: auto;\n    overflow: hidden;\n  }\n`\n\nconst App = props => {\n\n  const trackingId = process.env.REACT_APP_GA_TRACKING_ID\n  if (!trackingId) {\n    throw new Error('Invalid google tracking ID. or set to UA-000000-01 if you dont have any')\n  }\n\n  if (!process.env.REACT_APP_GRAPHQL_URI) {\n    throw new Error('Graphql host not yet set')\n  }\n  \n  console.log(trackingId)\n  ReactGA.initialize(trackingId);\n  ReactGA.pageview(window.location.pathname + window.location.search)\n\n  const [drawerState, drawerDispatch] = React.useReducer(\n    drawerReducer,\n    drawerInitialState\n  )\n\n  const classes = useStyles()\n\n  return (\n    <ApolloProvider client={client}>\n      <ThemeProvider theme={styledComponentTheme}>\n        <MuiThemeProvider theme={theme}>\n          <ContextStore.Provider\n            value={{\n              drawer: {\n                state: drawerState,\n                dispatch: drawerDispatch,\n              },\n            }}\n          >\n            <Root>\n              <ContentContainer>\n                <CssBaseline />\n                <MobileAppBar />\n                <main>\n                  <Switch>\n                    <Route exact path=\"/\" component={IndexPage} />\n                    <Route path=\"/profile/:id\" component={ProfilePage} />\n                    <Route path=\"/test\" component={TestPage} />\n                    <Route\n                      path=\"/district/2019/:code\"\n                      component={BattleGroundPage}\n                    />\n                    <Route\n                      path=\"/district/:year/:code\"\n                      component={DistrictPage}\n                    />\n                    <Route component={NotfoundPage} />\n                  </Switch>\n                </main>\n              </ContentContainer>\n              <Drawer\n                anchor=\"left\"\n                open={drawerState.open}\n                variant=\"persistent\"\n                classes={{\n                  paper: classes.paper,\n                }}\n              >\n                <SearchPage />\n              </Drawer>\n            </Root>\n          </ContextStore.Provider>\n        </MuiThemeProvider>\n      </ThemeProvider>\n    </ApolloProvider>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { HashRouter as Router } from 'react-router-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <Router>\n    <App />\n  </Router>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}