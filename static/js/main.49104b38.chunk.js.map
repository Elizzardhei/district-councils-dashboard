{"version":3,"sources":["../node_modules/encoding/lib sync","constants/dcregion.js","components/StackedNormalizedHorizontalBarChart.js","components/CampCompareChartContainer.js","components/atom/Text.js","pages/search/index.js","utils/responsive.js","pages/profile/index.js","components/OLMap.js","components/district/DistrictCard.js","components/district/MainAreas.js","components/BorderLinearProgress.js","components/district/CandidateList.js","helpers/candidate.js","components/district/VoterTurnoutChart.js","components/charts/WaffleChart.js","components/district/Metrics.js","pages/district/index.js","pages/battleground/index.js","ui/theme/index.js","pages/notfound/index.js","ui/theme/main.js","utils/features.js","components/AddressSearcher.js","reducers/drawer.js","ContextStore.js","components/search/DistrictSelector.js","components/search/SearchDrawer.js","components/atom/MobileAppBar.js","App.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","DCREGION","A","zh_hk","en_us","B","C","D","E","F","G","H","J","K","L","M","N","P","Q","R","S","T","StackedNormalizedHorizontalBarChart","data","margin","height","length","series","d3","columns","slice","offset","color","domain","map","d","key","range","t","reverse","unknown","y","name","padding","x","svg","append","attr","style","selectAll","enter","join","i","bandwidth","call","g","concat","ticks","width","remove","tickSizeOuter","this","props","drawChart","react_default","a","createElement","Fragment","Component","Container","styled","div","_templateObject","FETCH_CAMP_DATA","Button","_templateObject2","gql","_templateObject3","CampCompareChartContainer","react_apollo_esm","query","variables","year","_ref2","loading","error","dataForD3","res","counts","Object","values","count","建制","其他","泛民","total","reduce","acc","c","convertToD3Compatible","candidates","byCodes","_","groupBy","candidate","cacode","r","defineProperty","camp","p","val","assign","forEach","k","groupDataByRegionAndCamp","dc_candidates","console","log","components_StackedNormalizedHorizontalBarChart","StyledSubtTitle","Typography","Text_templateObject","theme","subtextColor","TitleText","variant","SubTitleText","StyledDivier","Divider","search_templateObject","search_templateObject2","TopSection","search_templateObject3","ExpandedRow","Box","_templateObject4","TabButton","_templateObject5","main","backgroundColor","LandingIcon","_templateObject6","NoteHeader","_templateObject7","NoteContent","_templateObject8","SearchPage","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","state","autoCompleteList","type","onClick","onTabSelected","search_Container","Text_TitleText","Text_SubTitleText","components_CampCompareChartContainer","renderNote","renderFooter","withStyles","withTheme","bps","createBreakpoints","createMuiTheme","GET_PEOPLE_PROFILE","profile_templateObject","commonFontStyle","css","profile_templateObject2","CandidateName","profile_templateObject3","up","DistrictName","profile_templateObject4","FlexRowContainer","profile_templateObject5","CandidateHeaderContainer","profile_templateObject6","CandidateAvatar","Avatar","profile_templateObject7","BasicInfoHeader","profile_templateObject8","ElectionHistoryContainer","_templateObject9","ElectionHistoryHeader","_templateObject10","YearDiv","_templateObject11","ElectionHistoryPaper","Paper","_templateObject12","ElectionHistoryContentGrid","Grid","_templateObject13","ElectionHistoryContentSpan","_templateObject14","ElectionHistoryContentHeaderSpan","_templateObject15","ElectionDetailButton","_templateObject16","BasicInfoGridContainer","_templateObject17","BasicInfoGridHeader","_templateObject18","BasicInfoGridContent","_templateObject19","ProfilePage","handleElectionDetailButton","history","push","election","yob","_this2","item","xs","md","container","spacing","constituency","name_zh","vote_percentage","is_won","_this3","match","params","homeUrl","_ref","person","dc_people","sm","src","imgProps","onError","target","name_en","gender","estimated_yob","moment","elections","occupation","sort","b","renderElectionInfoCard","MapContainer","OLMap_templateObject","regionStyle","Style","fill","Fill","stroke","Stroke","text","Text","font","highlightStyle","OLMap","handleMapClick","_this$props","changeDistrict","selectedFeature","getFeatures","highlightFeature","get","getView","fit","getGeometry","getExtent","duration","featuresLayer","_this$props2","dc","dc2003","dc2007","dc2011","dc2015","dc2019","find","isDCDataExist","featureSource","VectorSource","features","GeoJSON","readFeatures","VectorLayer","source","feature","getText","setText","getProperties","CACODE","layers","TileLayer","XYZ","url","Map","refs","mapContainer","view","View","projection","center","zoom","featureOverlay","extent","size","getSize","setState","select","Select","addInteraction","on","highlightedFeature","getSource","removeFeature","addFeature","ref","DistrictCard_templateObject","down","InnerContainer","DistrictCard_templateObject2","YearText","DistrictCard_templateObject3","RegionText","DistrictCard_templateObject4","CodeText","DistrictCard_templateObject5","DistrictCard_templateObject6","SeperatedRow","DistrictCard_templateObject7","DistrictCard","IconButton","aria-label","onPrevElection","ArrowBack_default","Date","getFullYear","onNextElection","ArrowForward_default","councillor","politicalAffiliation","electedCandidate","political_affiliations","political_affiliation","getCouncillor","DistrictCard_Container","border","renderPrevElectionButton","gutterBottom","renderNextElectionButton","DistrictCard_StyledDivier","MainAreas_templateObject","MainAreas","areas","MainAreas_Container","maxWidth","display","flexWrap","alignContent","area","index","mr","useStyles","makeStyles","root","flexGrow","BorderLinearProgress","lighten","bgcolor","bar","borderRadius","LinearProgress","CustomizedProgressBars","classes","className","value","fontBoldStyle","CandidateList_templateObject","fontNormalStyle","CandidateList_templateObject2","OvalButton","CandidateList_templateObject3","CandidateList_templateObject4","RowsContainer","CandidateList_templateObject5","CandidateList_templateObject6","FlexColumn","CandidateList_templateObject7","AvatarColumn","CandidateList_templateObject8","NameColumn","CandidateList_templateObject9","PoliticalColumn","CandidateList_templateObject10","CandidateList_templateObject11","CandidateListTitle","CandidateList_templateObject12","CandidateList_templateObject13","BlueVoteContainer","CandidateList_templateObject14","RedVoteContainer","CandidateList_templateObject15","ContentHeader","CandidateList_templateObject16","Content","CandidateList_templateObject17","CandidateList","CandidateList_Container","candidate_number","CandidateList_StyledDivier","CandidateList_FlexRowContainer","handleCandidateSelected","CandidateList_CandidateName","err","getCamp","pa","getPoliticalAffiliation","votes","parseFloat","zingchart","MODULESDIR","chartJSON","chartData","male","female","titles","split","filter","isNaN","parseInt","stacked","stack-type","title","align","subtitle","bold","font-size","font-color","background-color","plot","bar-width","hover-state","visible","animation","delay","sequence","valueBox","rules","rule","decimals","scale-x","tick","guide","scale-y","short","line-color","line-style","tooltip","VoterTurnoutChart","render","nextProps","nextState","JSON","stringify","exec","WaffleChart","squareValue","theData","population","units","Math","round","percentage","floor","Array","groupIndex","squareSize","row","col","legend","QUERY_FETCH_VOTES","Metrics_templateObject","Metrics_templateObject2","_data$dc_constituenci","dc_constituencies","vote_stat","voteStats","voteStat","total_votes","total_voters","total_voted_voters","population_excluded_foreign_worker","population_excluded_foreign_worker_lte_age_15","_ref$person","getDataForWaffleChart","stats","station_stats","barVote","cur","age","Metrics_Container","district_VoterTurnoutChart","charts_WaffleChart","GET_DISTRICTS","district_templateObject","FullWidthBox","district_templateObject2","LowerBackgroundContainer","district_templateObject3","district_templateObject4","DistrictCardContainer","district_templateObject5","DistrictPage","candidateId","handleChangeDistrict","_this$props$match$par","_this$props$match$par2","_this$props$match$par3","electionYear","district_FlexRowContainer","components_OLMap","district","district_DistrictCard","bind","district_MainAreas","main_areas","Metrics","district_CandidateList","battleground_templateObject","battleground_templateObject2","battleground_templateObject3","battleground_templateObject4","battleground_templateObject5","BattleGroundPage","_this$props$match$par4","battleground_FlexRowContainer","battleground_DistrictCardContainer","battleground_FullWidthBox","battleground_LowerBackgroundContainer","typography","useNextVariants","fontSize","fontFamily","h1","h2","fontWeight","h3","h4","h5","h6","body1","palette","primary","light","dark","secondary","background","default","button","NotFoundPage","MuiThemeProvider_default","href","content","contrastText","styledComponentTheme","secondaryBackgroundColor","getAllFeaturesFromPoint","point","featuresArray","arguments","undefined","pt","turf","lng","lat","polygonProps","n","poly","geometry","coordinates","objectSpread","properties","renderInputComponent","inputProps","_inputProps$inputRef","inputRef","other","objectWithoutProperties","TextField","fullWidth","InputProps","node","input","disableUnderline","endAdornment","InputAdornment","position","searchButton","Search_default","renderSuggestion","suggestion","isHighlighted","matches","label","parts","parse","MenuItem","selected","component","part","highlight","String","getSuggestionValue","IntegrationAutosuggest","suggestions","handleSuggestionsFetchRequested","getSuggestions","then","result","handleSuggestionsClearRequested","handleChange","event","_ref3","newValue","handleSuggestionSelected","_ref4","suggestionValue","suggestionIndex","sectionIndex","method","handleAddressSelected","coordinate","inputValue","trim","toLowerCase","AddressParser","records","record","fullAddress","LANG_ZH","autosuggestProps","onSuggestionsFetchRequested","onSuggestionsClearRequested","onSuggestionSelected","dist_default","placeholder","onChange","popperNode","InputLabelProps","shrink","suggestionsList","suggestInput","renderSuggestionsContainer","options","square","containerProps","children","React","suggestionsContainerOpen","zIndex","marginTop","listStyleType","boxShadow","textDecoration","DRAWER_OPEN","DRAWER_CLOSE","drawer","action","open","drawerInitialState","ContextStore","createContext","DistrictSelector_templateObject","DistrictContainer","DistrictSelector_templateObject2","DistrictSelector_templateObject3","withRouter","dispatch","useContext","DistrictSelector_Container","ExpansionPanel","dccode","ExpansionPanelSummary","aria-controls","dname_chi","ExpansionPanelDetails","dcca","DistrictSelector_DistrictContainer","SearchDrawer_templateObject","SearchDrawer_templateObject2","SearchDrawer_templateObject3","ContentRowContainer","SearchDrawer_templateObject4","ContentContainer","SearchDrawer_templateObject5","AddressSearchContainer","SearchDrawer_templateObject6","TabContainer","SearchDrawer_templateObject7","SearchDrawer_templateObject8","active","NavBarButton","SearchDrawer_templateObject9","_React$useState","useState","selectedTab","_React$useState2","slicedToArray","setSelectedTab","lastest","pop","onDrawerClose","tab","SearchDrawer_Container","Close_default","SearchDrawer_TabButton","SearchDrawer_StyledDivier","AddressSearcher","search_DistrictSelector","StyledAppBar","AppBar","MobileAppBar_templateObject","StyledToolbar","Toolbar","MobileAppBar_templateObject2","AppBarTitle","MobileAppBar_templateObject3","MobileAppBar_templateObject4","forwardRef","Slide","direction","displayName","MobileAppBar","MobileAppBar_Container","disableGutters","Menu_default","client","ApolloClient","uri","paper","App_templateObject","Root","App_templateObject2","App","_React$useReducer","useReducer","drawerReducer","_React$useReducer2","drawerState","drawerDispatch","styled_components_browser_esm","src_ContextStore","Provider","App_ContentContainer","CssBaseline","atom_MobileAppBar","react_router","exact","path","NotfoundPage","Drawer","anchor","search_SearchDrawer","ReactDOM","react_router_dom","src_App_0","document","getElementById"],"mappings":"wk1pLAAA,SAAAA,EAAAC,GACA,IAAAC,EAAA,IAAAC,MAAA,uBAAAF,EAAA,KAEA,MADAC,EAAAE,KAAA,mBACAF,EAEAF,EAAAK,KAAA,WAAuC,UACvCL,EAAAM,QAAAN,EACAO,EAAAC,QAAAR,EACAA,EAAAS,GAAA,+UCRaC,EAAW,CACtBC,EAAG,CACDC,MAAO,qBACPC,MAAO,uBAETC,EAAG,CACDF,MAAO,eACPC,MAAO,YAETE,EAAG,CACDH,MAAO,eACPC,MAAO,WAETG,EAAG,CACDJ,MAAO,eACPC,MAAO,YAETI,EAAG,CACDL,MAAO,qBACPC,MAAO,iBAETK,EAAG,CACDN,MAAO,qBACPC,MAAO,gBAETM,EAAG,CACDP,MAAO,qBACPC,MAAO,gBAETO,EAAG,CACDR,MAAO,qBACPC,MAAO,gBAETQ,EAAG,CACDT,MAAO,eACPC,MAAO,aAETS,EAAG,CACDV,MAAO,eACPC,MAAO,aAETU,EAAG,CACDX,MAAO,eACPC,MAAO,YAETW,EAAG,CACDZ,MAAO,eACPC,MAAO,aAETY,EAAG,CACDb,MAAO,eACPC,MAAO,SAETa,EAAG,CACDd,MAAO,eACPC,MAAO,UAETc,EAAG,CACDf,MAAO,eACPC,MAAO,YAETe,EAAG,CACDhB,MAAO,eACPC,MAAO,WAETgB,EAAG,CACDjB,MAAO,eACPC,MAAO,cAETiB,EAAG,CACDlB,MAAO,eACPC,MAAO,oBCiBIkB,oLAlFHC,GACR,IAAMC,EAAgB,GAAhBA,EAA2B,GAA3BA,EAAuC,EAAvCA,EAAgD,GAChDC,EALS,GAKAF,EAAKG,OAAsBF,EAAaA,EAGjDG,EAASC,MAEZhC,KAAK2B,EAAKM,QAAQC,MAAM,IACxBC,OAAOH,IAHKA,CAGiBL,GAgB1BS,EAAQJ,MAEXK,OAAON,EAAOO,IAAI,SAAAC,GAAC,OAAIA,EAAEC,OACzBC,MACCT,IACY,SAAAU,GAAC,OAAIV,IAA2B,GAAJU,EAAU,KAAMX,EAAOD,QAC5Da,WAEJC,QAAQ,QAELC,EAAIb,MAEPK,OAAOV,EAAKW,IAAI,SAAAC,GAAC,OAAIA,EAAEO,QACvBL,MAAM,CAACb,EAAYC,EAASD,IAC5BmB,QAAQ,IAELC,EAAIhB,MAAiBS,MAAM,CAACb,EArCpB,IAqCyCA,IAEjDqB,EAAMjB,IACF,YACPkB,OAAO,OACPC,KAAK,UAAW,CAAC,EAAG,EA1CT,IA0CmBtB,IAC9BuB,MAAM,WAAY,WAErBH,EACGC,OAAO,KACPG,UAAU,KACV1B,KAAKI,GACLuB,QACAJ,OAAO,KACPC,KAAK,OAAQ,SAAAZ,GAAC,OAAIH,EAAMG,EAAEC,OAC1Ba,UAAU,QACV1B,KAAK,SAAAY,GAAC,OAAIA,IACVgB,KAAK,QACLJ,KAAK,IAAK,SAAAZ,GAAC,OAAIS,EAAET,EAAE,MACnBY,KAAK,IAAK,SAACZ,EAAGiB,GAAJ,OAAUX,EAAEN,EAAEZ,KAAKmB,QAC7BK,KAAK,QAAS,SAAAZ,GAAC,OAAIS,EAAET,EAAE,IAAMS,EAAET,EAAE,MACjCY,KAAK,SAAUN,EAAEY,aAEpBR,EAAIC,OAAO,KAAKQ,KA9CF,SAAAC,GAAC,OACbA,EACGP,MAAM,OAAQ,cACdD,KAAK,YAFR,eAAAS,OAEoChC,EAFpC,MAGG8B,KAAK1B,IAAWgB,GAAGa,MAAMC,GAAa,MACtCJ,KAAK,SAAAC,GAAC,OAAIA,EAAEN,UAAU,WAAWU,aA2CtCd,EAAIC,OAAO,KAAKQ,KAvDF,SAAAC,GAAC,OACbA,EACGP,MAAM,OAAQ,cACdD,KAAK,YAFR,aAAAS,OAEkChC,EAFlC,QAGG8B,KAAK1B,IAAYa,GAAGmB,cAAc,IAClCN,KAAK,SAAAC,GAAC,OAAIA,EAAEN,UAAU,WAAWU,yDAqDpB,IACVpC,EAASsC,KAAKC,MAAdvC,KACRsC,KAAKE,UAAUxC,oCAIf,OACEyC,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAA,OAAKlE,GAAG,UAAUgD,MAAO,CAAEvB,OAAQ,OAAQiC,MAAO,kBA7ERU,gjBCKlD,IAAMC,EAAYC,IAAOC,IAAVC,KAeTC,GAPoBH,YAAOI,IAAPJ,CAAHK,KAOCC,IAAHC,MA4CrB,IAoBeC,EApBmB,SAAAhB,GAChC,OACEE,EAAAC,EAAAC,cAACa,EAAA,EAAD,CAAOC,MAAOP,EAAiBQ,UAAW,CAAEC,KAAM,OAC/C,SAAAC,GAA8B,IAA3BC,EAA2BD,EAA3BC,QAASC,EAAkBF,EAAlBE,MAAO9D,EAAW4D,EAAX5D,KAClB,GAAI6D,EAAS,OAAO,KACpB,GAAIC,EAAO,gBAAA7B,OAAiB6B,GAC5B,IACMC,EAzBd,SAA+B/D,GAC7B,IAAIgE,EAAMhE,EAAKW,IAAI,SAAAC,GACjB,IAAIqD,EAASC,OAAOC,OAAOvD,EAAEwD,OAC7B,MAAO,CACLjD,KAAMzC,EAASkC,EAAExC,MAAMQ,MACvByF,eAAIJ,EAAO,IAAM,EACjBK,eAAIL,EAAO,IAAM,EACjBM,eAAIN,EAAO,IAAM,EACjBO,MAAOP,EAAOQ,OAAO,SAACC,EAAKC,GAEzB,OADAD,GAAOC,GAEN,MAIP,OADAX,EAAG,QAAc,CAAC,OAAQ,eAAM,eAAM,gBAC/BA,EAUiBY,CAvC1B,SAAkCC,GAChC,IAAMC,EAAUC,IAAEC,QAAQH,EAAY,SAAAI,GAAS,OAAIA,EAAUC,OAAO,KACpE,OAAOhB,OAAO7F,KAAKyG,GAASnE,IAAI,SAAAvC,GAAI,MAAK,CACvCA,OACAgG,MAAOU,EAAQ1G,GACZuC,IAAI,SAAAwE,GAAC,OAAAjB,OAAAkB,EAAA,EAAAlB,CAAA,GAAQiB,EAAEE,KAAO,KACtBZ,OAAO,SAACa,EAAGX,GACV,IAAMY,EAAMrB,OAAOsB,OAAOF,GAE1B,OADApB,OAAO7F,KAAKsG,GAAGc,QAAQ,SAAAC,GAAC,OAAKH,EAAIG,GAAKf,EAAEe,IAAMH,EAAIG,GAAKH,EAAIG,GAAK,KACzDH,GACN,OA4BoBI,CAAyB3F,EAAK4F,gBAGnD,OADAC,QAAQC,IAAI/B,GAEVtB,EAAAC,EAAAC,cAACG,EAAD,KACEL,EAAAC,EAAAC,cAACoD,EAAD,CACE/F,KAAM+D,6GC7EpB,IAAMiC,EAAkBjD,YAAOkD,IAAPlD,CAAHmD,IAER,SAAA3D,GAAK,OAAIA,EAAM4D,MAAMC,eAIrBC,EAAY,SAAA9D,GACvB,OAAOE,EAAAC,EAAAC,cAACsD,EAAA,EAAD/B,OAAAsB,OAAA,CAAYc,QAAQ,MAAS/D,KAGzBgE,EAAe,SAAAhE,GAC1B,OAAOE,EAAAC,EAAAC,cAACqD,EAAD9B,OAAAsB,OAAA,CAAiBc,QAAQ,MAAS/D,4hDCH3C,IAEMiE,GAAezD,YAAO0D,IAAP1D,CAAH2D,MASZ5D,GAAYC,IAAOC,IAAV2D,KAaTC,GAAa7D,YAAOD,GAAPC,CAAH8D,KAMVC,GAAc/D,YAAOgE,IAAPhE,CAAHiE,KASXC,GAAYlE,YAAOI,IAAPJ,CAAHmE,IAMS,SAAA3E,GAAK,OAAIA,EAAM4D,MAAMgB,KAAKC,kBAS5CC,GAActE,IAAOC,IAAVsE,KAUXC,GAAaxE,YAAOsD,EAAPtD,CAAHyE,KAOVC,GAAc1E,YAAOkD,IAAPlD,CAAH2E,KAMXC,eACJ,SAAAA,EAAYpF,GAAO,IAAAqF,EAAA,OAAA1D,OAAA2D,EAAA,EAAA3D,CAAA5B,KAAAqF,IACjBC,EAAA1D,OAAA4D,EAAA,EAAA5D,CAAA5B,KAAA4B,OAAA6D,EAAA,EAAA7D,CAAAyD,GAAA5F,KAAAO,KAAMC,KACDyF,MAAQ,CACXC,iBAAkB,IAHHL,sTAUjB,OACEnF,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAC4E,GAAD,2EACA9E,EAAAC,EAAAC,cAAC8E,GAAD,8ZAOQS,2CAGZ,OAAOzF,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,uCAIP,OACEH,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAACiE,GAAD,KACEnE,EAAAC,EAAAC,cAACmE,GAAD,KACErE,EAAAC,EAAAC,cAACsE,GAAD,CAAWkB,QAAS7F,KAAK8F,cAAc,aACrC3F,EAAAC,EAAAC,cAACsD,EAAA,EAAD,CAAYK,QAAQ,MAApB,uBAEF7D,EAAAC,EAAAC,cAACsE,GAAD,CAAWkB,QAAS7F,KAAK8F,cAAc,WACrC3F,EAAAC,EAAAC,cAACsD,EAAA,EAAD,CAAYK,QAAQ,MAApB,wBAGJ7D,EAAAC,EAAAC,cAAC0E,GAAD,OAEF5E,EAAAC,EAAAC,cAAC0F,GAAD,KACE5F,EAAAC,EAAAC,cAACmE,GAAD,KACErE,EAAAC,EAAAC,cAAC2F,EAAD,iCACA7F,EAAAC,EAAAC,cAAC4F,EAAD,kCAEF9F,EAAAC,EAAAC,cAAC6F,EAAD,MACA/F,EAAAC,EAAAC,cAAC6D,GAAD,MACA/D,EAAAC,EAAAC,cAACmE,GAAD,KACErE,EAAAC,EAAAC,cAAC2F,EAAD,iCACA7F,EAAAC,EAAAC,cAAC4F,EAAD,kCAEF9F,EAAAC,EAAAC,cAAC6D,GAAD,MACClE,KAAKmG,aACLnG,KAAKoG,wBAtDS7F,aA6DV8F,eA1IA,SAAAxC,GAAK,MAAK,IA0IS,CAAEyC,WAAW,GAAhCD,CAAwChB,iGCnJ1CkB,GAAMC,KAAkB,IAShBC,ymICArB,IAAMC,GAAqB3F,IAAH4F,MA4BlBC,GAAkBC,YAAHC,MAQfC,GAAgBtG,IAAOC,IAAVsG,KAEbJ,GAKAL,GAAIU,GAAG,MAMPV,GAAIU,GAAG,OAOPC,GAAezG,IAAOC,IAAVyG,KAEZP,GAIAL,GAAIU,GAAG,MAIPV,GAAIU,GAAG,OAMPG,GAAmB3G,YAAOgE,IAAPhE,CAAH4G,KAOhBd,GAAIU,GAAG,MAIPV,GAAIU,GAAG,OAMPK,GAA2B7G,YAAO2G,GAAP3G,CAAH8G,MAOxBC,GAAkB/G,YAAOgH,KAAPhH,CAAHiH,KAMfnB,GAAIU,GAAG,MAKPV,GAAIU,GAAG,OAMPU,GAAkBlH,IAAOC,IAAVkH,KAEfhB,GAKAL,GAAIU,GAAG,OAKPY,GAA2BpH,YAAO2G,GAAP3G,CAAHqH,KAIxBvB,GAAIU,GAAG,MAIPV,GAAIU,GAAG,OAMPc,GAAwBtH,IAAOC,IAAVsH,KAErBpB,IAQAqB,GAAUxH,IAAOC,IAAVwH,MASPC,GAAuB1H,YAAO2H,KAAP3H,CAAH4H,MAMpBC,GAA6B7H,YAAO8H,KAAP9H,CAAH+H,MAM1BC,GAA6BhI,YAAO8H,KAAP9H,CAAHiI,KAE1B9B,IAMA+B,GAAmClI,YAAOgI,GAAPhI,CAAHmI,MAKhCC,GAAuBpI,IAAOC,IAAVoI,KAEpBlC,IAYAmC,GAAyBtI,YAAO2G,GAAP3G,CAAHuI,KAMtBzC,GAAIU,GAAG,MAMPV,GAAIU,GAAG,OAOPgC,GAAsBxI,YAAO8H,KAAP9H,CAAHyI,KAEnBtC,IAOAuC,GAAuB1I,YAAO8H,KAAP9H,CAAH2I,KAEpBxC,IAiNSyC,eA1Mb,SAAAA,EAAYpJ,GAAO,IAAAqF,EAAA,OAAA1D,OAAA2D,EAAA,EAAA3D,CAAA5B,KAAAqJ,IACjB/D,EAAA1D,OAAA4D,EAAA,EAAA5D,CAAA5B,KAAA4B,OAAA6D,EAAA,EAAA7D,CAAAyH,GAAA5J,KAAAO,KAAMC,KAMRqJ,2BAA6B,SAACjI,EAAMvF,GAClCwJ,EAAKrF,MAAMsJ,QAAQC,KAAnB,aAAA7J,OAAqC0B,EAArC,KAAA1B,OAA6C7D,KAN7CwJ,EAAKI,MAAQ,GAFIJ,gUAWImE,EAAUC,GAAK,IAAAC,EAAA3J,KACpC,OACEG,EAAAC,EAAAC,cAACkI,GAAA,EAAD,CAAMqB,MAAI,EAACC,GAAI,GAAIC,GAAI,GACrB3J,EAAAC,EAAAC,cAAC4H,GAAD,QAAAtI,OAAa8J,EAASpI,KAAtB,WACAlB,EAAAC,EAAAC,cAAC8H,GAAD,KACEhI,EAAAC,EAAAC,cAACiI,GAAD,CAA4ByB,WAAS,EAACC,QAAS,GAC7C7J,EAAAC,EAAAC,cAACsI,GAAD,CAAkCiB,MAAI,EAACC,GAAI,GAAIC,GAAI,GAAnD,gBAGA3J,EAAAC,EAAAC,cAACoI,GAAD,CAA4BmB,MAAI,EAACC,GAAI,GAAIC,GAAI,GAC1C,IACAL,EAASQ,cAAgBR,EAASQ,aAAapL,KAC5C4K,EAASQ,aAAapL,KACtB,IAAK,MAGbsB,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAACiI,GAAD,CAA4ByB,WAAS,EAACC,QAAS,GAC7C7J,EAAAC,EAAAC,cAACsI,GAAD,CAAkCiB,MAAI,EAACC,GAAI,GAAIC,GAAI,GAAnD,gBAGA3J,EAAAC,EAAAC,cAACoI,GAAD,CAA4BmB,MAAI,EAACC,GAAI,GAAIC,GAAI,GAA7C,GAAAnK,OACM8J,EAASQ,aAAaC,QAD5B,WAAAvK,OACwC8J,EAAS7G,OADjD,YAIFzC,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAACiI,GAAD,CAA4ByB,WAAS,EAACC,QAAS,GAC7C7J,EAAAC,EAAAC,cAACsI,GAAD,CAAkCiB,MAAI,EAACC,GAAI,GAAIC,GAAI,GAAnD,gBAGA3J,EAAAC,EAAAC,cAACoI,GAAD,CAA4BmB,MAAI,EAACC,GAAI,GAAIC,GAAI,GAC1CL,EAAS1G,KAAO0G,EAAS1G,KAAO,MAGrC5C,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAACiI,GAAD,CAA4ByB,WAAS,EAACC,QAAS,GAC7C7J,EAAAC,EAAAC,cAACsI,GAAD,CAAkCiB,MAAI,EAACC,GAAI,GAAIC,GAAI,GAAnD,sBAGA3J,EAAAC,EAAAC,cAACoI,GAAD,CAA4BmB,MAAI,EAACC,GAAI,GAAIC,GAAI,GAA7C,GAAAnK,OACM8J,EAASU,gBADf,YAAAxK,OAEI8J,EAASW,OAAS,eAAO,eAF7B,YAMFjK,EAAAC,EAAAC,cAACiI,GAAD,CAA4ByB,WAAS,EAACC,QAAS,GAC7C7J,EAAAC,EAAAC,cAACwI,GAAD,CACEhD,QAAS,WACP8D,EAAKL,2BAA2BG,EAASpI,KAAMoI,EAAS7G,UAF5D,4EAaD,IAAAyH,EAAArK,KAGO7D,EAEV6D,KAAKC,MAHPqK,MACEC,OAAUpO,GAKRqO,EAAU,0DAEhB,OACErK,EAAAC,EAAAC,cAACa,EAAA,EAAD,CAAOC,MAAOuF,GAAoBtF,UAAW,CAAEjF,OAC5C,SAAAsO,GAA8B,IAA3BlJ,EAA2BkJ,EAA3BlJ,QAASC,EAAkBiJ,EAAlBjJ,MAAO9D,EAAW+M,EAAX/M,KAClB,GAAI6D,EAAS,OAAO,KACpB,GAAIC,EAAO,gBAAA7B,OAAiB6B,GAC5B,IAAMkJ,EAAShN,EAAKiN,UAAU,GAE9B,OACExK,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAACiH,GAAD,KACEnH,EAAAC,EAAAC,cAACoE,EAAA,EAAD,CACE5E,MAAO,CAAE+K,GAAI,QAASd,GAAI,SAC1BlM,OAAQ,CAAEgN,GAAI,UAEdzK,EAAAC,EAAAC,cAACmH,GAAD,CACEqD,IAAG,GAAAlL,OAAK6K,EAAL,0BAAA7K,OAAqC+K,EAAOvO,GAA5C,QACH2O,SAAU,CACRC,QAAS,SAAAnP,GACPA,EAAEoP,OAAOH,IAAT,GAAAlL,OAAkB6K,EAAlB,0CAKRrK,EAAAC,EAAAC,cAACoE,EAAA,EAAD,KACEtE,EAAAC,EAAAC,cAAC0G,GAAD,KACG2D,EAAOR,QAAUQ,EAAOR,QAAU,GAAI,IACtCQ,EAAOR,QAAUQ,EAAOO,QAAU,GACnC9K,EAAAC,EAAAC,cAAC6G,GAAD,aAKN/G,EAAAC,EAAAC,cAAC0I,GAAD,KACE5I,EAAAC,EAAAC,cAACkI,GAAA,EAAD,CAAMwB,WAAS,EAACC,QAAS,GACvB7J,EAAAC,EAAAC,cAACkI,GAAA,EAAD,CAAMqB,MAAI,EAACC,GAAI,GAAIC,GAAI,GACrB3J,EAAAC,EAAAC,cAACsH,GAAD,kCAEFxH,EAAAC,EAAAC,cAACkI,GAAA,EAAD,CAAMqB,MAAI,EAACC,GAAI,GAAIe,GAAI,EAAGd,GAAI,GAC5B3J,EAAAC,EAAAC,cAACkI,GAAA,EAAD,CAAMwB,WAAS,EAACC,QAAS,GACvB7J,EAAAC,EAAAC,cAAC4I,GAAD,CAAqBW,MAAI,EAACC,GAAI,GAA9B,gBAGA1J,EAAAC,EAAAC,cAAC8I,GAAD,CAAsBS,MAAI,EAACC,GAAI,GAC5Ba,EAAOQ,OACc,SAAlBR,EAAOQ,OACL,SACA,SACF,KAGN/K,EAAAC,EAAAC,cAAC4I,GAAD,CAAqBW,MAAI,EAACC,GAAI,GAA9B,gBAGA1J,EAAAC,EAAAC,cAAC8I,GAAD,CAAsBS,MAAI,EAACC,GAAI,GAC5Ba,EAAOS,cAAP,GAAAxL,OACMyL,OAAS/J,OAASqJ,EAAOS,cAD/B,UAEG,KAGNhL,EAAAC,EAAAC,cAAC4I,GAAD,CAAqBW,MAAI,EAACC,GAAI,GAA9B,4BAGA1J,EAAAC,EAAAC,cAAC8I,GAAD,CAAsBS,MAAI,EAACC,GAAI,GAC5Ba,EAAOS,cAAgBT,EAAOS,cAAgB,OAIrDhL,EAAAC,EAAAC,cAACkI,GAAA,EAAD,CAAMqB,MAAI,EAACC,GAAI,GAAIe,GAAI,EAAGd,GAAI,GAC5B3J,EAAAC,EAAAC,cAACkI,GAAA,EAAD,CAAMwB,WAAS,EAACC,QAAS,GACvB7J,EAAAC,EAAAC,cAAC4I,GAAD,CAAqBW,MAAI,EAACC,GAAI,GAA9B,gBAGA1J,EAAAC,EAAAC,cAAC8I,GAAD,CAAsBS,MAAI,EAACC,GAAI,GAC5Ba,EAAOW,UAAUX,EAAOW,UAAUxN,OAAS,GACzCyN,WACCZ,EAAOW,UAAUX,EAAOW,UAAUxN,OAAS,GACxCyN,WACH,KAGNnL,EAAAC,EAAAC,cAAC4I,GAAD,CAAqBW,MAAI,EAACC,GAAI,GAA9B,gBAGA1J,EAAAC,EAAAC,cAAC8I,GAAD,CAAsBS,MAAI,EAACC,GAAI,GAA/B,KAIA1J,EAAAC,EAAAC,cAAC4I,GAAD,CAAqBW,MAAI,EAACC,GAAI,GAA9B,wCAGA1J,EAAAC,EAAAC,cAAC8I,GAAD,CAAsBS,MAAI,EAACC,GAAI,GAA/B,SAQR1J,EAAAC,EAAAC,cAACwH,GAAD,KACE1H,EAAAC,EAAAC,cAACkI,GAAA,EAAD,CAAMwB,WAAS,EAACC,QAAS,GACvB7J,EAAAC,EAAAC,cAACkI,GAAA,EAAD,CAAMqB,MAAI,EAACC,GAAI,IACb1J,EAAAC,EAAAC,cAAC0H,GAAD,wCAGD2C,EAAOW,UACLE,KAAK,SAACnL,EAAGoL,GAAJ,OAAUA,EAAEnK,KAAOjB,EAAEiB,OAC1BhD,IAAI,SAAAoL,GAAQ,OACXY,EAAKoB,uBACHhC,EACAiB,EAAOS,6BA9LL5K,iSCnO1B,IAAMmL,GAAejL,IAAOC,IAAViL,MAKZC,GAAc,IAAIC,KAAM,CAC5BC,KAAM,IAAIC,KAAK,CACb5N,MAAO,6BAET6N,OAAQ,IAAIC,KAAO,CACjB9N,MAAO,UACP0B,MAAO,IAETqM,KAAM,IAAIC,KAAK,CACbC,KAAM,0BACNN,KAAM,IAAIC,KAAK,CACb5N,MAAO,SAET6N,OAAQ,IAAIC,KAAO,CACjB9N,MAAO,OACP0B,MAAO,QAKPwM,GAAiB,IAAIR,KAAM,CAC/BG,OAAQ,IAAIC,KAAO,CACjB9N,MAAO,OACP0B,MAAO,IAETiM,KAAM,IAAIC,KAAK,CACb5N,MAAO,sBAET+N,KAAM,IAAIC,KAAK,CACbC,KAAM,0BACNN,KAAM,IAAIC,KAAK,CACb5N,MAAO,SAET6N,OAAQ,IAAIC,KAAO,CACjB9N,MAAO,OACP0B,MAAO,QAgIEyM,eAvHb,SAAAA,EAAYrM,GAAO,IAAAqF,EAAA,OAAA1D,OAAA2D,EAAA,EAAA3D,CAAA5B,KAAAsM,IACjBhH,EAAA1D,OAAA4D,EAAA,EAAA5D,CAAA5B,KAAA4B,OAAA6D,EAAA,EAAA7D,CAAA0K,GAAA7M,KAAAO,KAAMC,KAoGRsM,eAAiB,SAAA3Q,GAAK,IAAA4Q,EACalH,EAAKrF,MAA9BoB,EADYmL,EACZnL,KAAMoL,EADMD,EACNC,eACRC,EAAkB9Q,EAAEoP,OAAO2B,cAAc/C,KAAK,GAEhD8C,IACFpH,EAAKsH,iBAAiBF,GACtBD,EAAepL,EAAMqL,EAAgBG,IAAI,WACzCvH,EAAKI,MAAMrH,IAAIyO,UAAUC,IAAIL,EAAgBM,cAAcC,YAAa,CACtEC,SAAU,QA3Gd5H,EAAKI,MAAQ,GAFIJ,mFAKC,IAMd6H,EANcC,EACKpN,KAAKC,MAApBoB,EADU+L,EACV/L,KAAMvF,EADIsR,EACJtR,KACRuR,EAAK,CAACC,GAAQC,GAAQC,GAAQC,GAAQC,IAAQC,KAClD,SAAArP,GAAC,OAAIA,EAAEO,OAAF,QAAAc,OAAmB0B,KAEtBuM,IAAgBP,EAGhBO,IACF5N,KAAK6N,cAAgB,IAAIC,KAAa,CACpCC,UAAU,IAAIC,MAAUC,aAAaZ,KAGvCF,EAAgB,IAAIe,KAAY,CAC9BC,OAAQnO,KAAK6N,cACb1O,MAAO,SAAAiP,GAEL,OADAxC,GAAYyC,UAAUC,QAAQF,EAAQG,gBAAgBC,QAC/C5C,OAMb,IAAM6C,EAAS,CAEb,IAAIC,KAAU,CACZP,OAAQ,IAAIQ,KAAI,CACdC,IACE,wGAKJhB,GACFa,EAAOjF,KAAK2D,GAGd,IAAM9O,EAAM,IAAIwQ,KAAI,CAClB7D,OAAQhL,KAAK8O,KAAKC,aAClBN,SACAO,KAAM,IAAIC,KAAK,CACbC,WAAY,YACZC,OAAQ,CAAC,SAAU,SACnBC,KAAM,OAaV,GATApP,KAAKqP,eAAiB,IAAInB,KAAY,CACpCC,OAAQ,IAAIL,KACZzP,IAAKA,EACLc,MAAO,SAASiP,GAEd,OADA/B,GAAegC,UAAUC,QAAQF,EAAQG,gBAAgBC,QAClDnC,MAIPuB,EAGF,IADA,IAAMG,EAAW/N,KAAK6N,cAAclB,cAC3BpN,EAAI,EAAGA,EAAIwO,EAASlQ,OAAQ0B,IACnC,GAAIwO,EAASxO,GAAGgP,gBAAgBC,SAAW1S,EAAM,CAC/C,IAAMwT,EAASvB,EAASxO,GAAGyN,cAAcC,YACzC5O,EAAIyO,UAAUC,IAAIuC,EAAQ,CACxBC,KAAMlR,EAAImR,UACV1Q,QAAS,CAAC,GAAI,GAAI,GAAI,MAGxBkB,KAAK4M,iBAAiBmB,EAASxO,IAC/B,MAKNS,KAAKyP,SAAS,CACZpR,MACA2Q,KAAM3Q,EAAIyO,UACVK,cAAeS,EAAgBT,EAAgB,OAGjD,IAAMuC,EAAS,IAAIC,KAEJ,OAAXD,IACFrR,EAAIuR,eAAeF,GACnBA,EAAOG,GAAG,SAAU7P,KAAKuM,0DAIZ6B,GACXpO,KAAK8P,oBACP9P,KAAKqP,eAAeU,YAAYC,cAAchQ,KAAK8P,oBAGrD9P,KAAKqP,eAAeU,YAAYE,WAAW7B,GAC3CpO,KAAK8P,mBAAqB1B,mCAiB1B,OAAOjO,EAAAC,EAAAC,cAACqL,GAAD,CAAcwE,IAAI,gBAAlB,YAvHS3P,g+CCnDpB,IAAMC,GAAYC,YAAO2H,KAAP3H,CAAH0P,KAOT5J,GAAI6J,KAAK,OAMTC,GAAiB5P,YAAOgE,IAAPhE,CAAH6P,MAWdC,GAAW9P,YAAOkD,IAAPlD,CAAH+P,MASRC,GAAahQ,YAAOkD,IAAPlD,CAAHiQ,MAUVC,GAAWlQ,YAAOkD,IAAPlD,CAAHmQ,MAUR1M,GAAezD,YAAO0D,IAAP1D,CAAHoQ,MAQZC,GAAerQ,YAAOgE,IAAPhE,CAAHsQ,UAwGHC,oMA9DY3P,GACvB,OAAOA,EAAO,KACZlB,EAAAC,EAAAC,cAAC4Q,GAAA,EAAD,CAAYC,aAAW,aAAarL,QAAS7F,KAAKC,MAAMkR,gBACtDhR,EAAAC,EAAAC,cAAC+Q,GAAAhR,EAAD,OAIFD,EAAAC,EAAAC,cAAA,OAAKlB,MAAO,CAAEU,MAAO,OAAQjC,OAAQ,2DAIhByD,GAGvB,OAFyBA,EAAO,IACZ,IAAIgQ,MAAOC,cAE7BnR,EAAAC,EAAAC,cAAC4Q,GAAA,EAAD,CACEC,aAAW,gBACXrL,QAAS7F,KAAKC,MAAMsR,gBAEpBpR,EAAAC,EAAAC,cAACmR,GAAApR,EAAD,OAIFD,EAAAC,EAAAC,cAAA,OAAKlB,MAAO,CAAEU,MAAO,OAAQjC,OAAQ,2CAIhC,IAAA4O,EACqCxM,KAAKC,MAAzCiK,EADDsC,EACCtC,QAAS7I,EADVmL,EACUnL,KAAMvF,EADhB0Q,EACgB1Q,KACjB2V,EA5DV,SAAuBlP,GACrB,IAAMkP,EAAa,CACjB5S,KAAM,GACN6S,qBAAsB,IAGlBC,EAAmBpP,EAAWoL,KAAK,SAAAhL,GAAS,OAAIA,EAAUyH,SAChE,GAAIuH,IACFF,EAAW5S,KACT8S,EAAiBjH,OAAOR,SAAWyH,EAAiBjH,OAAOO,QACzD0G,EAAiBjH,OAAOkH,uBAAuB/T,QAAQ,CACzD,IAAMgU,EACJF,EAAiBjH,OAAOkH,uBAAuB,GAAGC,sBACpDJ,EAAWI,sBAAwBA,EAAsB3H,QAI7D,OAAOuH,EA2CcK,CAFZtF,EACsBjK,YAE7B,OACEpC,EAAAC,EAAAC,cAAC0R,GAAD,KACE5R,EAAAC,EAAAC,cAACgQ,GAAD,CAAgB2B,OAAQ,EAAG7T,MAAM,iBAC/BgC,EAAAC,EAAAC,cAACyQ,GAAD,KACG9Q,KAAKiS,yBAAyB5Q,GAC/BlB,EAAAC,EAAAC,cAACkQ,GAAD,CAAUvM,QAAQ,SAASkO,cAAY,GACpC7Q,GAEFrB,KAAKmS,yBAAyB9Q,IAEjClB,EAAAC,EAAAC,cAACoQ,GAAD,iBACAtQ,EAAAC,EAAAC,cAACsD,EAAA,EAAD,CAAYK,QAAQ,MAAMkG,GAC1B/J,EAAAC,EAAAC,cAACsQ,GAAD,KAAW7U,GACXqE,EAAAC,EAAAC,cAAC+R,GAAD,MACAjS,EAAAC,EAAAC,cAACyQ,GAAD,KACE3Q,EAAAC,EAAAC,cAACsD,EAAA,EAAD,CAAYK,QAAQ,MAApB,sBACA7D,EAAAC,EAAAC,cAACsD,EAAA,EAAD,KAAa8N,EAAW5S,OAE1BsB,EAAAC,EAAAC,cAACyQ,GAAD,KACE3Q,EAAAC,EAAAC,cAACsD,EAAA,EAAD,CAAYK,QAAQ,MAApB,4BACA7D,EAAAC,EAAAC,cAACsD,EAAA,EAAD,KAAa8N,EAAWI,wBAE1B1R,EAAAC,EAAAC,cAACyQ,GAAD,KACE3Q,EAAAC,EAAAC,cAACsD,EAAA,EAAD,CAAYK,QAAQ,MAApB,sBACA7D,EAAAC,EAAAC,cAACsD,EAAA,EAAD,CAAYK,QAAQ,aAApB,eAjEezD,wJClG3B,IAAMC,GAAYC,IAAOC,IAAV2R,MAgCAC,oLAnBJ,IACCC,EAAUvS,KAAKC,MAAfsS,MACR,OACEpS,EAAAC,EAAAC,cAACmS,GAAD,CAAWC,SAAS,MAClBtS,EAAAC,EAAAC,cAACsD,EAAA,EAAD,CAAYK,QAAQ,KAAKkO,cAAY,GAArC,2CAGA/R,EAAAC,EAAAC,cAACoE,EAAA,EAAD,CAAKiO,QAAQ,OAAOC,SAAS,OAAOC,aAAa,cAC9CL,EAAMlU,IAAI,SAACwU,EAAMC,GAAP,OACT3S,EAAAC,EAAAC,cAACoE,EAAA,EAAD,CAAKsO,GAAI,EAAGxU,IAAKuU,GAAjB,GAAAnT,OACMiC,OAAO7F,KAAK8W,GAAM,GADxB,MAAAlT,OAC+BkT,EAAKjR,OAAO7F,KAAK8W,GAAM,iBAf1CtS,0CCVlByS,GAAYC,aAAW,SAAApP,GAAK,MAAK,CACrCqP,KAAM,CACJC,SAAU,GAEZxV,OAAQ,CACNA,OAAQkG,EAAMmG,QAAQ,OAIpBoJ,GAAuB/M,YAAW,CACtC6M,KAAM,CACJtV,OAAQ,GACRiC,MAAO,IACPiF,gBAAiB,SAAA7E,GAAK,OAAIoT,aAAQpT,EAAMqT,QAAS,MAEnDC,IAAK,CACHC,aAAc,GACd1O,gBAAiB,SAAA7E,GAAK,OAAIA,EAAMqT,WARPjN,CAU1BoN,MAEY,SAASC,GAAuBzT,GAC7C,IAAM0T,EAAUX,KAChB,OACE7S,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,KACEH,EAAAC,EAAAC,cAAC+S,GAAD,CACEQ,UAAWD,EAAQhW,OACnBqG,QAAQ,cACR7F,MAAM,YACN0V,MAAO5T,EAAM4T,MACbP,QAASrT,EAAM9B,2jGCxBvB,IAAM2V,GAAgBjN,YAAHkN,MAQbC,GAAkBnN,YAAHoN,MAQfC,GAAazT,IAAOC,IAAVyT,MAMV3T,GAAYC,IAAOC,IAAV0T,MAMTC,GAAgB5T,IAAOC,IAAV4T,KAMb/N,GAAI6J,KAAK,OAOThJ,GAAmB3G,YAAOgE,IAAPhE,CAAH8T,KAQhBhO,GAAI6J,KAAK,OAOToE,GAAa/T,YAAOgE,IAAPhE,CAAHgU,KAMVlO,GAAI6J,KAAK,OAMTsE,GAAejU,YAAO+T,GAAP/T,CAAHkU,KAGZpO,GAAI6J,KAAK,OAOTwE,GAAanU,YAAO+T,GAAP/T,CAAHoU,KAGVtO,GAAI6J,KAAK,OAMT0E,GAAkBrU,YAAO+T,GAAP/T,CAAHsU,KAMfxO,GAAI6J,KAAK,OAMTlM,GAAezD,YAAO0D,IAAP1D,CAAHuU,KAIZzO,GAAI6J,KAAK,OAKT6E,GAAqBxU,IAAOC,IAAVwU,KAElBpB,IAOA/M,GAAgBtG,IAAOC,IAAVyU,KAEbrB,IAOAsB,GAAoB3U,IAAOC,IAAV2U,KAEjBvB,IAOAwB,GAAmB7U,IAAOC,IAAV6U,KAEhBzB,IAOA0B,GAAgB/U,IAAOC,IAAV+U,KAEb3B,IAOA4B,GAAUjV,IAAOC,IAAViV,KAEP3B,IAmHS4B,8MArGbpL,QAAU,kIAED,IAAAb,EAAA3J,KACCuC,EAAevC,KAAKC,MAApBsC,WAER,OACEpC,EAAAC,EAAAC,cAACwV,GAAD,CAAWpD,SAAS,MAClBtS,EAAAC,EAAAC,cAAC4U,GAAD,uCACA9U,EAAAC,EAAAC,cAACgU,GAAD,KACG9R,EACEgJ,KAAK,SAACnL,EAAGoL,GAAJ,OAAUpL,EAAE0V,iBAAmBtK,EAAEsK,mBACtCzX,IAAI,SAACsE,EAAWmQ,GAAZ,OACH3S,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,CAAgB/B,IAAKuU,GAClBA,EAAQ,EAAI3S,EAAAC,EAAAC,cAAC0V,GAAD,MAAmB,KAChC5V,EAAAC,EAAAC,cAAC2V,GAAD,CACE7W,MAAO,CAAEU,MAAO,QAChBtB,IAAKoE,EAAUmT,iBACfjQ,QAAS,WACP8D,EAAK1J,MAAMgW,wBAAwBtT,EAAU+H,OAAOvO,MAGtDgE,EAAAC,EAAAC,cAACqU,GAAD,KACEvU,EAAAC,EAAAC,cAACoH,GAAA,EAAD,CACEoD,IAAG,GAAAlL,OAAKgK,EAAKa,QAAV,0BAAA7K,OAA0CgD,EAAU+H,OAAOvO,GAA3D,QACH2O,SAAU,CACRC,QAAS,SAAAnP,GACPA,EAAEoP,OAAOH,IACPlB,EAAKa,QAAU,sCAGrBrL,MAAO,CACLU,MAAO,OACPjC,OAAQ,OACR4V,aAAc,MAIpBrT,EAAAC,EAAAC,cAACuU,GAAD,CAAY5R,EAAG,GACb7C,EAAAC,EAAAC,cAAC6V,GAAD,KACkC,IAA/BvT,EAAUmT,kBAAV,GAAAnW,OACIgD,EAAUmT,iBADd,MAEAnT,EAAU+H,OAAOR,SAAWvH,EAAU+H,OAAOO,UAGlD9K,EAAAC,EAAAC,cAACyU,GAAD,KACE3U,EAAAC,EAAAC,cAACmV,GAAD,qBACC,KACDrV,EAAAC,EAAAC,cAACqV,GAAD,KCxNG,SAAA/S,GACrB,IAAII,EAAO,IACX,IAEEA,EACEJ,EAAU+H,OAAOkH,uBAAuB,GAAGC,sBAAsB9O,KAC9DmH,QACL,MAAOiM,IACT,OAAOpT,EDgNqBqT,CAAQzT,KAEpBxC,EAAAC,EAAAC,cAACyU,GAAD,KACE3U,EAAAC,EAAAC,cAACmV,GAAD,iCACC,KACDrV,EAAAC,EAAAC,cAACqV,GAAD,KCvOmB,SAAA/S,GACrC,IAAI0T,EAAK,IACT,IAEEA,EACE1T,EAAU+H,OAAOkH,uBAAuB,GAAGC,sBAAsB3H,QACnE,MAAOiM,IACT,OAAOE,EDgOqBC,CAAwB3T,KAEJ,IAA/BA,EAAUmT,kBACT3V,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAACyU,GAAD,KACGnS,EAAUyH,QACTjK,EAAAC,EAAAC,cAAC+U,GAAD,QAAAzV,OACMgD,EAAU4T,MADhB,YAAA5W,OAC2BgD,EAAUwH,gBADrC,QAIAxH,EAAUyH,QACVjK,EAAAC,EAAAC,cAACiV,GAAD,QAAA3V,OACMgD,EAAU4T,MADhB,YAAA5W,OAC2BgD,EAAUwH,gBADrC,QAKJhK,EAAAC,EAAAC,cAACmU,GAAD,KACErU,EAAAC,EAAAC,cAACmV,GAAD,CAAerW,MAAO,CAAEhB,MAAO,YAA/B,sBAGAgC,EAAAC,EAAAC,cAACqV,GAAD,KACEvV,EAAAC,EAAAC,cAACqT,GAAD,CACEG,MAAO2C,WAAW7T,EAAUwH,iBAC5BhM,MAAOwE,EAAUyH,OAAS,UAAY,eAMhDjK,EAAAC,EAAAC,cAACmU,GAAD,KACG7R,EAAUyH,QAAUjK,EAAAC,EAAAC,cAAC6T,GAAD,OACnBvR,EAAUyH,QACVjK,EAAAC,EAAAC,cAAA,OACElB,MAAO,CACLU,MAAO,OACPjC,OAAQ,wBA/FN2C,kCEtK5BkW,KAAUC,WAAa,qCAEvB,IAAMC,GAAY,SAAAC,GAChB,IAAMlZ,EAAO,CAAEmZ,KAAM,GAAIC,OAAQ,IAEjClV,OAAOC,OAAO+U,EAAUlZ,MAAMyF,QAAQ,SAAA0Q,GACpCnW,EAAI,KAAS8L,KAAKqK,EAAK,MACvBnW,EAAI,OAAW8L,KAAKqK,EAAK,UAI3B,IAAMkD,EAASnV,OAAO7F,KAAK6a,EAAUlZ,MAAMW,IACzC,SAAAE,GAAG,OACDA,EACGyY,MAAM,KACNC,OAAO,SAAAhU,GAAG,OAAKiU,MAAMC,SAASlU,MAC9B3D,KAAK,KAAO,WAMnB,OAJAyX,EAAOA,EAAOlZ,OAAS,IAAM,qBAItB,CACL+H,KAAM,MACNwR,SAAS,EACTC,aAAc,SACdC,MAAO,CACLpL,KAAM,mDACNnN,EAAG,OACHH,EAAG,MACH2Y,MAAO,QAETC,SAAU,CACRtL,KAAM,qBACNnN,EAAG,QACHH,EAAG,MACH2Y,MAAO,OACPE,MAAM,EACNC,YAAa,OACbC,aAAc,UACdC,mBAAoB,QAEtBC,KAAM,CACJC,YAAa,OACbC,cAAe,CACbC,SAAS,GAEXC,UAAW,CACTC,MAAO,IACPC,SAAU,GAEZC,SAAU,CACRlM,KAAM,SACNmM,MAAO,CACL,CACEC,KAAM,kBACNN,QAAS,IAGbO,SAAU,IAGdC,UAAW,CACT3W,OAAQkV,EACR0B,KAAM,CACJT,SAAS,GAEXU,MAAO,CACLV,SAAS,GAEXpO,KAAM,CACJ+N,aAAc,YAGlBgB,UAAW,CACTC,OAAO,EACPC,aAAc,UACdJ,KAAM,CACJT,SAAS,GAEXU,MAAO,CACLI,aAAc,SAEhBlP,KAAM,CACJ+N,aAAc,YAGlB7Z,OAAQ,CACN,CACE+D,OAAQnE,EAAKmZ,KACbe,mBAAoB,WAEtB,CACE/V,OAAQnE,EAAKoZ,OACbc,mBAAoB,YAGxBmB,QAAS,CACPf,SAAS,KAuCAgB,+LAhCXvC,KAAUwC,OAAO,CACf9c,GAAI6D,KAAKC,MAAM9D,GAEfuB,KAAMiZ,GAAU3W,KAAKC,MAAMvC,sDAKTwb,EAAWC,GAE/B,QAASC,KAAKC,UAAUH,EAAUxb,QAAU0b,KAAKC,UAAUrZ,KAAKC,MAAMvC,mDAGpDwb,GAClBzC,KAAU6C,KAAKtZ,KAAKC,MAAM9D,GAAI,UAAW,CACvCuB,KAAMiZ,GAAUuC,EAAUxb,yCAK5B,OACEyC,EAAAC,EAAAC,cAAA,OACElE,GAAI6D,KAAKC,MAAM9D,GACfgD,MAAO,CACLU,MAAOG,KAAKC,MAAMJ,OAAS,OAC3BjC,OAAQoC,KAAKC,MAAMrC,QAAU,kBA3BP2C,aCmCjBgZ,qLAvIH7b,GACR,IAAIwE,EAMFsX,EAEAC,EAAU,GACRtb,EAAQJ,IAAgBA,KAG5BmE,EAAQnE,IAAOL,EAAM,SAASY,GAC5B,OAAOA,EAAEob,aAGXF,EAActX,EAAK,IAEnBxE,EAAKyF,QAAQ,SAAS7E,EAAGiB,GACvBjB,EAAEob,YAAcpb,EAAEob,WAClBpb,EAAEqb,MAAQC,KAAKC,MAAMvb,EAAEob,WAAaF,GACpClb,EAAEwb,WAAaF,KAAKG,MAAsB,IAAfzb,EAAEob,WAAoBxX,GACjDuX,EAAUA,EAAQ9Z,OAChBqa,MAAM1b,EAAEqb,MAAQ,GACbra,KAAK,GACL0X,MAAM,IACN3Y,IAAI,WACH,MAAO,CACLmb,YAAaA,EACbG,MAAOrb,EAAEqb,MACTD,WAAYpb,EAAEob,WACdI,WAAYxb,EAAEwb,WACdG,WAAY1a,QAOtBxB,IAAU,WACPkB,OAAO,OACPC,KAAK,QAJAgb,KAKLhb,KAAK,SAJCgb,KAKNjb,OAAO,KACPG,UAAU,OACV1B,KAAK+b,GACLpa,QACAJ,OAAO,QACPC,KAAK,QA3CO,IA4CZA,KAAK,SA5CO,IA6CZA,KAAK,OAAQ,SAASZ,GACrB,OAAOH,EAAMG,EAAE2b,cAEhB/a,KAAK,IAAK,SAASZ,EAAGiB,GAGrB,IAAM4a,EAAMP,KAAKG,MAAMxa,EArDV,IAsDb,OApDW,GAoDJ4a,EAlDH,EAkDsBA,IAE3Bjb,KAAK,IAAK,SAASZ,EAAGiB,GAIrB,IAAM6a,EAAM7a,EA5DC,GA6Db,OA3DW,GA2DJ6a,EAzDH,EAyDsBA,IAE3Bnb,OAAO,SACPiN,KAAK,SAAS5N,EAAGiB,GAChB,OACE7B,EAAKY,EAAE2b,YAAYpb,KACnB,MACAP,EAAEob,WACF,MACApb,EAAEwb,WACF,MAIN,IAAIO,EAAStc,IACH,WACPkB,OAAO,OACPC,KAAK,QAAS,KACdA,KAAK,SAAU,KACfD,OAAO,KACPG,UAAU,OACV1B,KAAKA,GACL2B,QACAJ,OAAO,KACPC,KAAK,YAAa,SAASZ,EAAGiB,GAC7B,MAAO,eAAqB,GAAJA,EAAS,MAErC8a,EACGpb,OAAO,QACPC,KAAK,QAAS,IACdA,KAAK,SAAU,IACfC,MAAM,OAAQ,SAASb,EAAGiB,GACzB,OAAOpB,EAAMoB,KAEjB8a,EACGpb,OAAO,QACPC,KAAK,IAAK,IACVA,KAAK,IAAK,IACVgN,KAAK,SAAS5N,GACb,OAAOA,EAAEO,OAGCd,IACJ,WACP2R,OAAO,OACPzQ,OAAO,KACPC,KAAK,YAAa,oBAElBD,OAAO,QACPC,KAAK,IAAK,MACVA,KAAK,YAAa,QAClBgN,KAAK,UAAYhK,GACjBhD,KAAK,OAAQ,uDAIhBc,KAAKE,UAAUF,KAAKC,MAAMvC,uCAI1B,OACEyC,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAA,OAAKlE,GAAG,WAERgE,EAAAC,EAAAC,cAAA,OAAKlE,GAAG,mBAlIUoE,29BCE1B,IAAM+Z,GAAoBvZ,IAAHwZ,MAsCjB/Z,GAAYC,IAAOC,IAAV8Z,MAsHAlI,oLAvDJ,IAAA9F,EACgBxM,KAAKC,MAApBoB,EADDmL,EACCnL,KAAMvF,EADP0Q,EACO1Q,KACd,OACEqE,EAAAC,EAAAC,cAACa,EAAA,EAAD,CACEC,MAAOmZ,GACPlZ,UAAW,CAAEC,KAAM8V,SAAS9V,EAAM,IAAKvF,SAEtC,SAAAwF,GAA8B,IAA3BC,EAA2BD,EAA3BC,QAASC,EAAkBF,EAAlBE,MAAO9D,EAAW4D,EAAX5D,KAClB,GAAI6D,EAAS,OAAO,KACpB,GAAIC,EAAO,gBAAA7B,OAAiB6B,GAFC,IAAAiZ,EAGK/c,EAAKgd,kBAAkB,GAAjDnY,EAHqBkY,EAGrBlY,WAAYoY,EAHSF,EAGTE,UAEhBC,EAAY,GACZD,IACFC,EAvEkB,SAACC,EAAUtY,GAAe,IAEpDuY,EAMED,EANFC,YACAC,EAKEF,EALFE,aACAC,EAIEH,EAJFG,mBACAC,EAGEJ,EAHFI,mCACAC,EAEEL,EAFFK,8CAMF,GACEA,EAAgDH,GAC/B,IAAjBA,GACuB,IAAvBC,EAEA,MAAO,GAGT,IAAMJ,EAAY,CAChB,CACE/b,KAAM,2BAEN6a,WAAYuB,EAAqCF,GAEnD,CACElc,KAAM,2BACN6a,WACEwB,EAAgDF,GAGpD,CACEnc,KAAM,2BACN6a,WAAYsB,EAAqBF,IAarC,OARAvY,EAAWY,QAAQ,SAAAsH,GAA6C,IAA1C8L,EAA0C9L,EAA1C8L,MAA0C4E,EAAA1Q,EAAnCC,OAAUR,EAAyBiR,EAAzBjR,QAASe,EAAgBkQ,EAAhBlQ,QAC9C2P,EAAUpR,KAAK,CACb3K,KAAI,eAAAc,OAAOuK,GAAWe,GACtByO,WAAYnD,MAKTqE,EAwBeQ,CAAsBT,EAAWpY,IAG/C,IAAM8Y,EAAQ3d,EAAKgd,kBAAkB,GAAGY,cAClCC,EAAU,CAAE7d,KAAM,IAcxB,OAbA6d,EAAQrZ,MAAQmZ,EAAMlZ,OAAO,SAACC,EAAKoZ,GAWjC,OAAOpZ,EAVWoZ,EAAIjF,MAAMpU,OAAO,SAACC,EAAKoZ,GAQvC,MAPqC,qBAA1BD,EAAQ7d,KAAK8d,EAAIC,OAC1BF,EAAQ7d,KAAK8d,EAAIC,KAAO,IAEuB,qBAAtCF,EAAQ7d,KAAK8d,EAAIC,KAAKD,EAAItQ,UACnCqQ,EAAQ7d,KAAK8d,EAAIC,KAAKD,EAAItQ,QAAU,GAEtCqQ,EAAQ7d,KAAK8d,EAAIC,KAAKD,EAAItQ,SAAWsQ,EAAIjF,MAClCnU,EAAMoZ,EAAIjF,OAChB,IAEF,GAEDpW,EAAAC,EAAAC,cAACqb,GAAD,KACEvb,EAAAC,EAAAC,cAACsD,EAAA,EAAD,CAAYK,QAAQ,MAApB,4BACA7D,EAAAC,EAAAC,cAACsb,GAAD,CACExf,GAAE,GAAAwD,OAAK0B,EAAL,KAAA1B,OAAa7D,EAAb,kBACF4B,KAAM6d,IAEPX,EAAU/c,OAAS,EAClBsC,EAAAC,EAAAC,cAACub,GAAD,CACEzf,GAAE,GAAAwD,OAAK0B,EAAL,KAAA1B,OAAa7D,EAAb,kBACF4B,KAAMkd,IAGR,aApDQra,yvDC3FxB,IAAMsb,GAAgB9a,IAAH+a,MAwCbC,GAAetb,YAAOgE,IAAPhE,CAAHub,MAOZC,GAA2Bxb,YAAOgE,IAAPhE,CAAHyb,MAUxB9U,GAAmB3G,YAAOgE,IAAPhE,CAAH0b,KAKhB5V,GAAIU,GAAG,MAIPV,GAAIU,GAAG,OAOPmV,GAAwB3b,YAAOgE,IAAPhE,CAAH4b,KAOrB9V,GAAI6J,KAAK,OAgHAkM,8MAlGbrG,wBAA0B,SAAAsG,GACxBjX,EAAKrF,MAAMsJ,QAAQC,KAAnB,YAAA7J,OAAoC4c,OAGtCC,qBAAuB,SAACnb,EAAMvF,GACvBuF,GAASvF,GACdwJ,EAAKrF,MAAMsJ,QAAQC,KAAnB,aAAA7J,OAAqC0B,EAArC,KAAA1B,OAA6C7D,0FAXzBod,EAAWC,GAE/B,OAAO,2CAYQ,IAAAsD,EAKXzc,KAAKC,MAHPqK,MACEC,OAAUlJ,EAHCob,EAGDpb,KAAMvF,EAHL2gB,EAGK3gB,KAGpBkE,KAAKC,MAAMsJ,QAAQC,KAAnB,aAAA7J,OAAqCwX,SAAS9V,EAAM,IAAM,EAA1D,KAAA1B,OAA+D7D,6CAGhD,IAAA4gB,EAKX1c,KAAKC,MAHPqK,MACEC,OAAUlJ,EAHCqb,EAGDrb,KAAMvF,EAHL4gB,EAGK5gB,KAGpBkE,KAAKC,MAAMsJ,QAAQC,KAAnB,aAAA7J,OAAqCwX,SAAS9V,EAAM,IAAM,EAA1D,KAAA1B,OAA+D7D,qCAGxD,IAAA6N,EAAA3J,KAAA2c,EAKH3c,KAAKC,MAHPqK,MACEC,OAAUlJ,EAHPsb,EAGOtb,KAAMvF,EAHb6gB,EAGa7gB,KAKd8gB,EAAY,GAAAjd,OAAM0B,EAAN,UAElB,OACElB,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAACwc,GAAD,KACE1c,EAAAC,EAAAC,cAACoE,EAAA,EAAD,CACE5E,MAAO,CAAE+K,GAAI,OAAQd,GAAI,SACzBlM,OAAQ,CAAEgN,GAAI,QAASd,GAAI,UAE3B3J,EAAAC,EAAAC,cAACyc,GAAD,CACEzb,KAAMA,EACNvF,KAAMA,EACN2Q,eAAgBzM,KAAKwc,wBAGzBrc,EAAAC,EAAAC,cAACa,EAAA,EAAD,CAAOC,MAAO0a,GAAeza,UAAW,CAAEC,OAAMvF,OAAM8gB,iBACnD,SAAAnS,GAA8B,IAA3BlJ,EAA2BkJ,EAA3BlJ,QAASC,EAAkBiJ,EAAlBjJ,MAAO9D,EAAW+M,EAAX/M,KAClB,GAAI6D,EAAS,OAAO,KACpB,GAAIC,EAAO,gBAAA7B,OAAiB6B,GAC5B,IAAMub,EAAWrf,EAAKgd,kBAAkB,GACxC,OACEva,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAC+b,GAAD,KACEjc,EAAAC,EAAAC,cAAC2c,GAADpb,OAAAsB,OAAA,GACM6Z,EADN,CAEE1b,KAAM8V,SAAS9V,EAAM,IACrBvF,KAAMA,EACNyV,eAAgB5H,EAAK4H,eAAe0L,KAAKtT,GACzCwH,eAAgBxH,EAAKwH,eAAe8L,KAAKtT,OAG7CxJ,EAAAC,EAAAC,cAAC0b,GAAD,KACE5b,EAAAC,EAAAC,cAAC6c,GAAD,CAAW3K,MAAOwK,EAASI,YAAc,MAE3Chd,EAAAC,EAAAC,cAAC4b,GAAD,KACE9b,EAAAC,EAAAC,cAACwc,GAAD,KACE1c,EAAAC,EAAAC,cAAC0b,GAAD,KACE5b,EAAAC,EAAAC,cAAC+c,GAAD,CACE/b,KAAM8V,SAAS9V,EAAM,IACrBvF,KAAMA,EACNihB,SAAUA,KAGd5c,EAAAC,EAAAC,cAAC0b,GAAD,KACE5b,EAAAC,EAAAC,cAACgd,GAAD,CACE9a,WAAYwa,EAASxa,WACrBlB,KAAM8V,SAAS9V,EAAM,IACrBvF,KAAMA,EACNma,wBAAyBtM,EAAKsM,yCAzF7B1V,yvDCxF3B,IAAMsb,GAAgB9a,IAAHuc,MAwCbvB,GAAetb,YAAOgE,IAAPhE,CAAH8c,MAOZtB,GAA2Bxb,YAAOgE,IAAPhE,CAAH+c,MAUxBpW,GAAmB3G,YAAOgE,IAAPhE,CAAHgd,KAKhBlX,GAAIU,GAAG,MAIPV,GAAIU,GAAG,OAOPmV,GAAwB3b,YAAOgE,IAAPhE,CAAHid,KAOrBnX,GAAI6J,KAAK,OAgHAuN,8MAlGb1H,wBAA0B,SAAAsG,GACxBjX,EAAKrF,MAAMsJ,QAAQC,KAAnB,YAAA7J,OAAoC4c,OAGtCC,qBAAuB,SAACnb,EAAMvF,GACvBuF,GAASvF,GACdwJ,EAAKrF,MAAMsJ,QAAQC,KAAnB,aAAA7J,OAAqC0B,EAArC,KAAA1B,OAA6C7D,0FAXzBod,EAAWC,GAE/B,OAAO,2CAYQ,IAAAsD,EAKXzc,KAAKC,MAHPqK,MACEC,OAAgBzO,GAHL2gB,EAGDpb,KAHCob,EAGK3gB,MAGpBkE,KAAKC,MAAMsJ,QAAQC,KAAnB,kBAAA7J,OAA0C7D,6CAG3B,IAAA4gB,EAKX1c,KAAKC,MAHPqK,MACEC,OAAUlJ,EAHCqb,EAGDrb,KAAMvF,EAHL4gB,EAGK5gB,KAGpBkE,KAAKC,MAAMsJ,QAAQC,KAAnB,aAAA7J,OAAqCwX,SAAS9V,EAAM,IAAM,EAA1D,KAAA1B,OAA+D7D,qCAGxD,IAAA6N,EAAA3J,KAAA2c,EAKH3c,KAAKC,MAHPqK,MACEC,OAHGqT,EAAAjB,EAGOtb,YAHP,IAAAuc,EAGc,KAHdA,EAGoB9hB,EAHpB6gB,EAGoB7gB,KAKrB8gB,EAAY,GAAAjd,OAAM0B,EAAN,UAElB,OACElB,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAACwd,GAAD,KACE1d,EAAAC,EAAAC,cAACoE,EAAA,EAAD,CACE5E,MAAO,CAAE+K,GAAI,OAAQd,GAAI,SACzBlM,OAAQ,CAAEgN,GAAI,QAASd,GAAI,UAE3B3J,EAAAC,EAAAC,cAACyc,GAAD,CACEzb,KAAMA,EACNvF,KAAMA,EACN2Q,eAAgBzM,KAAKwc,wBAGzBrc,EAAAC,EAAAC,cAACa,EAAA,EAAD,CAAOC,MAAO0a,GAAeza,UAAW,CAAEC,OAAMvF,OAAM8gB,iBACnD,SAAAnS,GAA8B,IAA3BlJ,EAA2BkJ,EAA3BlJ,QAASC,EAAkBiJ,EAAlBjJ,MAAO9D,EAAW+M,EAAX/M,KAClB,GAAI6D,EAAS,OAAO,KACpB,GAAIC,EAAO,gBAAA7B,OAAiB6B,GAC5B,IAAMub,EAAWrf,EAAKgd,kBAAkB,GACxC,OACEva,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAACyd,GAAD,KACE3d,EAAAC,EAAAC,cAAC2c,GAADpb,OAAAsB,OAAA,GACM6Z,EADN,CAEE1b,KAAM8V,SAAS9V,EAAM,IACrBvF,KAAMA,EACNyV,eAAgB5H,EAAK4H,eAAe0L,KAAKtT,GACzCwH,eAAgBxH,EAAKwH,eAAe8L,KAAKtT,OAG7CxJ,EAAAC,EAAAC,cAAC0d,GAAD,KACE5d,EAAAC,EAAAC,cAAC6c,GAAD,CAAW3K,MAAOwK,EAASI,YAAc,MAE3Chd,EAAAC,EAAAC,cAAC2d,GAAD,KACE7d,EAAAC,EAAAC,cAACwd,GAAD,KACE1d,EAAAC,EAAAC,cAAC0d,GAAD,KACE5d,EAAAC,EAAAC,cAAC+c,GAAD,CACE/b,KAAMA,EACNvF,KAAMA,EACNihB,SAAUA,KAGd5c,EAAAC,EAAAC,cAAC0d,GAAD,KACE5d,EAAAC,EAAAC,cAACgd,GAAD,CACE9a,WAAYwa,EAASxa,WACrBlB,KAAM8V,SAAS9V,EAAM,IACrBvF,KAAMA,EACNma,wBAAyBtM,EAAKsM,yCAzFzB1V,uBCtFlB0d,GAAa,CACxBC,iBAAiB,EACjBC,SAAU,GACVC,WAZwB,CACxB,aACA,eACA,aACA,gBACA,mBACA,SAMuB9e,KAAK,KAC5B+e,GAAI,CACFD,WAjB6B,iCAmB/BE,GAAI,CACFF,WApB6B,gCAqB7BD,SAAU,GACVI,WAAY,KAEdC,GAAI,CACFJ,WAzB6B,gCA0B7BD,SAAU,GACVI,WAAY,KAEdE,GAAI,CACFL,WA9B6B,gCA+B7BD,SAAU,GACVI,WAAY,KAEdG,GAAI,CACFN,WAnC6B,gCAoC7BD,SAAU,GACVI,WAAY,KAEdI,GAAI,CACFP,WAxC6B,gCAyC7BD,SAAU,GACVI,WAAY,KAEdK,MAAO,CACLR,WA5C0B,yBCExBva,GD8CS4C,aAAe,CAC5BwX,cACAY,QAAS,CACPC,QAAS,CACPC,MAAO,UACPla,KAAM,UACNma,KAAM,WAERC,UAAW,CACTF,MAAO,UACPla,KAAM,UACNma,KAAM,WAERE,WAAY,CACVC,QAAS,WAEXC,OAAQ,CACNN,QAAS,UACTG,UAAW,cC1DXI,eACJ,SAAAA,EAAYpf,GAAO,IAAAqF,EAAA,OAAA1D,OAAA2D,EAAA,EAAA3D,CAAA5B,KAAAqf,IACjB/Z,EAAA1D,OAAA4D,EAAA,EAAA5D,CAAA5B,KAAA4B,OAAA6D,EAAA,EAAA7D,CAAAyd,GAAA5f,KAAAO,KAAMC,KACDyF,MAAQ,GAFIJ,wEAMjB,OACEnF,EAAAC,EAAAC,cAACif,EAAAlf,EAAD,CAAkByD,MAAOA,IAAzB,UACS1D,EAAAC,EAAAC,cAAA,KAAGkf,KAAK,mCAAR,eATYhf,aAeZ8F,eAnBA,SAAAxC,GAAK,MAAK,CACvB2b,QAAS,KAkBuB,CAAElZ,WAAW,GAAhCD,CAAwCgZ,cCrB1CjB,GAAa,CACxB,qBACA,eACA,aACA,gBACA,mBACA,SAGWH,GAAa,CACxBC,iBAAiB,EACjBC,SAAU,GACVC,WAAYA,GAAW9e,KAAK,KAC5B+e,GAAI,CACFD,WAjB6B,iCAmB/BE,GAAI,CACFF,WApB6B,gCAqB7BD,SAAU,GACVI,WAAY,KAEdC,GAAI,CACFJ,WAzB6B,gCA0B7BD,SAAU,GACVI,WAAY,KAEdE,GAAI,CACFL,WAAYA,GACZD,SAAU,GACVI,WAAY,KAEdG,GAAI,CACFN,WAnC6B,gCAoC7BD,SAAU,GACVI,WAAY,KAEdI,GAAI,CACFP,WAxC6B,gCAyC7BD,SAAU,GACVI,WAAY,KAEdK,MAAO,CACLR,WA5C0B,yBAgDf3X,gBAAe,CAC5BwX,cACAY,QAAS,CACPC,QAAS,CACPja,KAAM,OACN4a,aAAc,QAEhBR,UAAW,CACTpa,KAAM,UACN4a,aAAc,QAEhBL,OAAQ,CACNN,QAAS,UACTG,UAAW,cAKJS,GAAuB,CAClC7a,KAAM,CACJC,gBAAiB,QACjB3G,MAAO,SAET6gB,KAAM,CACJla,gBAAiB,UACjB3G,MAAO,SAETwhB,yBAA0B,UAC1B7b,aAAc,8KCvEH8b,GAA0B,SACrCC,GAEG,IADHC,EACGC,UAAAliB,OAAA,QAAAmiB,IAAAD,UAAA,GAAAA,UAAA,GADa,CAACzS,GAAQC,GAAQC,GAAQC,GAAQC,IAE3CuS,EAAKC,SAAW,CAACL,EAAMM,IAAKN,EAAMO,MAexC,OAdeN,EAAczhB,IAAI,SAAA+P,GAE/B,IADA,IAAIiS,EAAe,GACV9gB,EAAI,EAAG+gB,EAAIlS,EAAQL,SAASlQ,OAAQ0B,EAAI+gB,EAAG/gB,IAAK,CACvD,IAAMghB,EAAOL,gBAAkB9R,EAAQL,SAASxO,GAAGihB,SAASC,aAC5D,GAAIP,yBAA2BD,EAAIM,GAAO,CACxCF,EAAYze,OAAA8e,GAAA,EAAA9e,CAAA,GAAQwM,EAAQL,SAASxO,GAAGohB,YACxC,OAGJ,OAAO/e,OAAA8e,GAAA,EAAA9e,CAAA,CACLP,KAAM+M,EAAQvP,KAAKmY,MAAM,KAAK,IAC3BqJ,MCTT,SAASO,GAAqBC,GAAY,IAChClN,EAAgDkN,EAAhDlN,QADgCmN,EACgBD,EAAvCE,gBADuB,IAAAD,EACZ,aADYA,EACF5Q,EAAkB2Q,EAAlB3Q,IAAQ8Q,EADNpf,OAAAqf,GAAA,EAAArf,CACgBif,EADhB,8BAGxC,OACE1gB,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAC6gB,GAAA,EAADtf,OAAAsB,OAAA,CACEie,WAAS,EACTC,WAAY,CACVL,SAAU,SAAAM,GACRnR,EAAImR,GACJN,EAASM,IAEX1N,QAAS,CACP2N,MAAO3N,EAAQ2N,OAEjBC,kBAAkB,EAClBC,aACErhB,EAAAC,EAAAC,cAACohB,GAAA,EAAD,CAAgBC,SAAS,OACvBvhB,EAAAC,EAAAC,cAAC4Q,GAAA,EAAD,CAAY2C,UAAWD,EAAQgO,aAAczQ,aAAW,UACtD/Q,EAAAC,EAAAC,cAACuhB,GAAAxhB,EAAD,UAKJ4gB,KAMZ,SAASa,GAAiBC,EAA1BrX,GAAgE,IAAxBtJ,EAAwBsJ,EAAxBtJ,MAAO4gB,EAAiBtX,EAAjBsX,cACvCC,EAAU1X,KAAMwX,EAAWG,MAAO9gB,GAClC+gB,EAAQC,KAAML,EAAWG,MAAOD,GAEtC,OACE7hB,EAAAC,EAAAC,cAAC+hB,GAAA,EAAD,CAAUC,SAAUN,EAAeO,UAAU,OAC1CJ,EAAM7jB,IAAI,SAACkkB,EAAMzP,GAAP,OACTyP,EAAKC,UACHriB,EAAAC,EAAAC,cAAA,QAAM9B,IAAKkkB,OAAO3P,GAAQ3T,MAAO,CAAEof,WAAY,MAC5CgE,EAAKrW,MAGR/L,EAAAC,EAAAC,cAAA,UAAQ9B,IAAKkkB,OAAO3P,GAAQ3T,MAAO,CAAEof,WAAY,MAC9CgE,EAAKrW,SAQlB,SAASwW,GAAmBZ,GAC1B,OAAOA,EAAWG,MAGpB,IAqCMU,8MACJjd,MAAQ,CACNmO,MAAO,GACP+O,YAAa,MAsBfC,gCAAkC,SAAAvhB,GAAe,IAAZuS,EAAYvS,EAAZuS,MACnCvO,EAAKwd,eAAejP,GAAOkP,KAAK,SAAAC,GAC9B1d,EAAKmK,SAAS,CACZmT,YAAaI,SAKnBC,gCAAkC,WAChC3d,EAAKmK,SAAS,CACZmT,YAAa,QAIjBM,aAAe,SAAArkB,GAAI,OAAI,SAACskB,EAADC,GAAyB,IAAfC,EAAeD,EAAfC,SAC/B/d,EAAKmK,SAAL7N,OAAAkB,EAAA,EAAAlB,CAAA,GACG/C,EAAOwkB,QAIZC,yBAA2B,SACzBH,EADyBI,GAGtB,IADDzB,EACCyB,EADDzB,WACCyB,EADWC,gBACXD,EAD4BE,gBAC5BF,EAD6CG,aAC7CH,EAD2DI,OAE9Dre,EAAKrF,MAAM2jB,sBACThE,GAAwBkC,EAAW+B,oIA5ClBhQ,gFACbiQ,EAAajQ,EAAMkQ,OAAOC,gBACZF,EAAWjmB,OAEb,mCACMomB,SAAoBH,iBAApCI,SACAlB,EAASkB,EACZjN,OAAO,SAACxU,EAAGqQ,GAAJ,OAAcA,EAAQ,KAC7BzU,IAAI,SAAA8lB,GAAM,MAAK,CACdN,WAAYM,EAAON,aACnB5B,MAAOkC,EAAOC,YAAYH,WAAsBI,8BAG7CrB,mCAGF,mIAgCA,IAAArZ,EAAA3J,KACC2T,EAAY3T,KAAKC,MAAjB0T,QAEF2Q,EAAmB,CACvB1D,wBACAgC,YAAa5iB,KAAK0F,MAAMkd,YACxB2B,4BAA6BvkB,KAAK6iB,gCAClC2B,4BAA6BxkB,KAAKijB,gCAClCwB,qBAAsBzkB,KAAKsjB,yBAC3BZ,sBACAb,qBAGF,OACE1hB,EAAAC,EAAAC,cAAA,OAAKuT,UAAWD,EAAQT,MACtB/S,EAAAC,EAAAC,cAACqkB,GAAAtkB,EAADwB,OAAAsB,OAAA,GACMohB,EADN,CAEEzD,WAAY,CACVlN,UACAgR,YAAa,8BACb9Q,MAAO7T,KAAK0F,MAAMmO,MAClB+Q,SAAU5kB,KAAKkjB,aAAa,SAC5BnC,SAAU,SAAAM,GACR1X,EAAKkb,WAAaxD,GAEpByD,gBAAiB,CACfC,QAAQ,IAGZlhB,MAAO,CACLmhB,gBAAiBrR,EAAQqR,gBACzBlD,WAAYnO,EAAQmO,WACpBR,MAAO3N,EAAQsR,cAEjBC,2BAA4B,SAAAC,GAAO,OACjChlB,EAAAC,EAAAC,cAAC+H,GAAA,EAADxG,OAAAsB,OAAA,CACEkiB,QAAM,GACFD,EAAQE,eAFd,CAGElmB,MAAO,CACLU,MAAO,UAGRslB,EAAQG,sBAhGcC,IAAMhlB,WA6G5B8F,eAlJA,SAAAxC,GAAK,MAAK,CACvBqP,KAAM,CACJC,SAAU,GAEZpJ,UAAW,CACT2X,SAAU,YAEZ8D,yBAA0B,CACxB9D,SAAU,WACV+D,OAAQ,EACRC,UAAW7hB,EAAMmG,QAAQ,IAI3B8X,WAAY,CACVpP,QAAS,SAEXsS,gBAAiB,CACfrnB,OAAQ,EACRmB,QAAS,EACT6mB,cAAe,QAEjBV,aAAc,CACZrnB,OAAQ,OACR4V,aAAc,MACdoS,UAAW,kCACX9gB,gBAAiB,UACjBhG,QAAS,aAEXwiB,MAAO,CACLuE,eAAgB,QAElBlE,aAAc,CACZxjB,MAAO,aAiHIkI,CAAmBsc,sDCxNrBmD,GAAc,cACdC,GAAe,eAEbC,GAAA,SAACtgB,EAAOugB,GACrB,OAAQA,EAAOrgB,MACb,KAAKkgB,GACH,MAAO,CAAEI,MAAM,GACjB,QACE,MAAO,CAAEA,MAAM,KCLRC,GAAqB,CAChCD,MAAM,GAGFE,GAAeb,IAAMc,cAAc,CACvCL,OAAQG,KAsBKC,4eCff,IAAM5lB,GAAYC,IAAOC,IAAV4lB,MAkBTC,IAVU9lB,YAAOgE,IAAPhE,CAAH+lB,MAUa/lB,YAAOI,IAAPJ,CAAHgmB,OAoDRC,eA7CU,SAAAzmB,GAAS,IAEpB0mB,EACRpB,IAAMqB,WAAWR,IADnBJ,OAAUW,SA0BZ,OACExmB,EAAAC,EAAAC,cAACwmB,GAAD,KACGhU,GAAKxU,IAAI,SAAA+B,GAAC,OACTD,EAAAC,EAAAC,cAACymB,GAAA,EAAD,CAAgBvoB,IAAK6B,EAAE2mB,QACrB5mB,EAAAC,EAAAC,cAAC2mB,GAAA,EAAD,CACEC,gBAAc,kBACd9qB,GAAG,kBAEHgE,EAAAC,EAAAC,cAACsD,EAAA,EAAD,KAAavD,EAAE8mB,YAEjB/mB,EAAAC,EAAAC,cAAC8mB,GAAA,EAAD,MAlCWrrB,EAkCwBsE,EAAE2mB,QA/BzC5mB,EAAAC,EAAAC,cAAA,WACGuB,OAAO7F,KAAKghB,GAAS,MAAQjhB,IAAOuC,IAAI,SAAA+oB,GACvC,OACEjnB,EAAAC,EAAAC,cAACgnB,GAAD,CACE9oB,IAAKwe,GAAS,MAAQjhB,GAAMsrB,GAAMtrB,KAClC+J,QAAS,WACP8gB,EAAS,CAAE/gB,KAAMmgB,KACjB9lB,EAAMsJ,QAAQC,KAAd,kBAAA7J,OAAqCynB,KAEvCjpB,MAAM,aAENgC,EAAAC,EAAAC,cAACsD,EAAA,EAAD,CAAYK,QAAQ,MACjB+Y,GAAS,MAAQjhB,GAAMsrB,GAAMvoB,UAdxB,OADD,IAAA/C,+zCC7BrB,IAAMoI,GAAezD,YAAO0D,IAAP1D,CAAH6mB,MAOZ9mB,GAAYC,YAAOgE,IAAPhE,CAAH8mB,MAMT/iB,GAAc/D,YAAOgE,IAAPhE,CAAH+mB,MASXC,GAAsBhnB,YAAO+D,GAAP/D,CAAHinB,MAMnBC,GAAmBlnB,YAAOgE,IAAPhE,CAAHmnB,MAOhBC,GAAyBpnB,YAAOgE,IAAPhE,CAAHqnB,KAIJ,SAAA7nB,GAAK,OAAIA,EAAM4D,MAAM8b,2BAIvCoI,GAAetnB,YAAOgE,IAAPhE,CAAHunB,MAQZrjB,GAAYlE,YAAOI,IAAPJ,CAAHwnB,KAKF,SAAAhoB,GAAK,MACK,WAAjBA,EAAMioB,OACFjoB,EAAM4D,MAAMC,aACZ7D,EAAM4D,MAAMgB,KAAK1G,OACN,SAAA8B,GAAK,MACH,WAAjBA,EAAMioB,OAAN,aAAAvoB,OACiBM,EAAM4D,MAAMC,cACzB,SAIJqkB,GAAe1nB,YAAOwQ,KAAPxQ,CAAH2nB,MA4GH1B,mBApGf,SAAsBzmB,GAAO,IAEf0mB,EACRpB,IAAMqB,WAAWR,IADnBJ,OAAUW,SAFe0B,EAIW9C,IAAM+C,SAC1CroB,EAAMsoB,aAAe,YALIC,EAAA5mB,OAAA6mB,EAAA,EAAA7mB,CAAAymB,EAAA,GAIpBE,EAJoBC,EAAA,GAIPE,EAJOF,EAAA,GAoB3B,SAAS5E,EAAsBZ,GAC7B,GAAKA,EAAL,CAEA,IAAM2F,EAAU3F,EAAO4F,MAQvB3oB,EAAMsJ,QAAQC,KAAd,aAAA7J,OAAgCgpB,EAAQtnB,KAAxC,KAAA1B,OAAgDgpB,EAAQna,SAExDvO,EAAM4oB,iBAGR,SAAS/iB,EAAcgjB,GACrB,OAAO,WACLJ,EAAeI,IA4BnB,OACE3oB,EAAAC,EAAAC,cAAC0oB,GAAD,KACE5oB,EAAAC,EAAAC,cAAC8nB,GAAD,CACEhqB,MAAM,UACNmkB,UAAU,OACVpR,aAAW,OACXrL,QAAS,WACP8gB,EAAS,CAAE/gB,KAAMmgB,OAGnB5lB,EAAAC,EAAAC,cAAC2oB,GAAA5oB,EAAD,CAAW+d,SAAS,WAEtBhe,EAAAC,EAAAC,cAAC0nB,GAAD,KACE5nB,EAAAC,EAAAC,cAAC4oB,GAAD,CACEf,OAAwB,aAAhBK,EAA6B,SAAW,WAChD1iB,QAASC,EAAc,aAEvB3F,EAAAC,EAAAC,cAACsD,EAAA,EAAD,CAAYK,QAAQ,MAApB,uBAEF7D,EAAAC,EAAAC,cAAC4oB,GAAD,CACEf,OAAwB,WAAhBK,EAA2B,SAAW,WAC9C1iB,QAASC,EAAc,WAEvB3F,EAAAC,EAAAC,cAACsD,EAAA,EAAD,CAAYK,QAAQ,MAApB,8BAGJ7D,EAAAC,EAAAC,cAAC6oB,GAAD,MACiB,aAAhBX,EAjDDpoB,EAAAC,EAAAC,cAAConB,GAAD,KACEtnB,EAAAC,EAAAC,cAACwnB,GAAD,KACE1nB,EAAAC,EAAAC,cAAC8oB,GAAD,CAAiBvF,sBAAuBA,KAE1CzjB,EAAAC,EAAAC,cAAC+oB,GAAD,OAOFjpB,EAAAC,EAAAC,cAAConB,GAAD,KACEtnB,EAAAC,EAAAC,cAACwnB,GAAD,KACE1nB,EAAAC,EAAAC,cAAC8oB,GAAD,CAAiBvF,sBAAuBA,KAE1CzjB,EAAAC,EAAAC,cAACsnB,GAAD,KACExnB,EAAAC,EAAAC,cAAC+oB,GAAD,+jBCzIV,IAAMC,GAAe5oB,YAAO6oB,KAAP7oB,CAAH8oB,MAOZC,GAAgB/oB,YAAOgpB,KAAPhpB,CAAHipB,MAMbC,GAAclpB,YAAOkD,IAAPlD,CAAHmpB,MAQXppB,GAAYC,YAAOgE,IAAPhE,CAAHopB,MAMItE,IAAMuE,WAAW,SAAC7pB,EAAOiQ,GAAR,OAClC/P,EAAAC,EAAAC,cAAC0pB,GAAA,EAADnoB,OAAAsB,OAAA,CAAO8mB,UAAU,OAAO9Z,IAAKA,GAASjQ,MAE7BgqB,YAAc,aAqCVC,OAnCf,SAAsBjqB,GAAO,IAEf0mB,EACRpB,IAAMqB,WAAWR,IADnBJ,OAAUW,SAGZ,OACExmB,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAACgpB,GAAD,CAAc3H,SAAS,SAASvjB,MAAM,aACpCgC,EAAAC,EAAAC,cAAC8pB,GAAD,KACEhqB,EAAAC,EAAAC,cAACmpB,GAAD,CAAeY,gBAAc,GAC3BjqB,EAAAC,EAAAC,cAAC4Q,GAAA,EAAD,CACE9S,MAAM,UACNmkB,UAAU,OACVpR,aAAW,SACXrL,QAAS,kBAAM8gB,EAAS,CAAE/gB,KAAMkgB,OAEhC3lB,EAAAC,EAAAC,cAACuhB,GAAAxhB,EAAD,CAAY+d,SAAS,WAEvBhe,EAAAC,EAAAC,cAACspB,GAAD,CAAa3lB,QAAQ,MAArB,sBACA7D,EAAAC,EAAAC,cAAC4Q,GAAA,EAAD,CACE9S,MAAM,UACNmkB,UAAU,OACVpR,aAAW,OACXrL,QAAS,kBAAM8gB,EAAS,CAAE/gB,KAAMkgB,OAEhC3lB,EAAAC,EAAAC,cAACgqB,GAAAjqB,EAAD,CAAU+d,SAAS,YAGvBhe,EAAAC,EAAAC,cAACspB,GAAD,CAAa3lB,QAAQ,MAArB,wYClDV,IAAMsmB,GAAS,IAAIC,KAAa,CAC9BC,IAAK,0CAGDxX,GAAYC,aAAW,CAC3BwX,MAAO,CACL5qB,MAAO,UAIL8nB,GAAmBlnB,YAAOgE,IAAPhE,CAAHiqB,MAOhBC,GAAOlqB,YAAOgE,IAAPhE,CAAHmqB,MAmEKC,GA1DH,SAAA5qB,GAAS,IAAA6qB,EACmBvF,IAAMwF,WAC1CC,GACA7E,IAHiB8E,EAAArpB,OAAA6mB,EAAA,EAAA7mB,CAAAkpB,EAAA,GACZI,EADYD,EAAA,GACCE,EADDF,EAAA,GAMbtX,EAAUX,KAEhB,OACE7S,EAAAC,EAAAC,cAACa,EAAA,EAAD,CAAgBopB,OAAQA,IACtBnqB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CAAevnB,MAAO6b,IACpBvf,EAAAC,EAAAC,cAACif,EAAAlf,EAAD,CAAkByD,MAAOA,IACvB1D,EAAAC,EAAAC,cAACgrB,GAAaC,SAAd,CACEzX,MAAO,CACLmS,OAAQ,CACNtgB,MAAOwlB,EACPvE,SAAUwE,KAIdhrB,EAAAC,EAAAC,cAACsqB,GAAD,KACExqB,EAAAC,EAAAC,cAACkrB,GAAD,KACEprB,EAAAC,EAAAC,cAACmrB,EAAA,EAAD,MACArrB,EAAAC,EAAAC,cAACorB,GAAD,MACAtrB,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAACqrB,EAAA,EAAD,KACEvrB,EAAAC,EAAAC,cAACqrB,EAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,IAAItJ,UAAWjd,KACjClF,EAAAC,EAAAC,cAACqrB,EAAA,EAAD,CAAOE,KAAK,eAAetJ,UAAWjZ,KACtClJ,EAAAC,EAAAC,cAACqrB,EAAA,EAAD,CACEE,KAAK,uBACLtJ,UAAW3E,KAEbxd,EAAAC,EAAAC,cAACqrB,EAAA,EAAD,CACEE,KAAK,wBACLtJ,UAAWhG,KAEbnc,EAAAC,EAAAC,cAACqrB,EAAA,EAAD,CAAOpJ,UAAWuJ,QAIxB1rB,EAAAC,EAAAC,cAACyrB,GAAA,EAAD,CACEC,OAAO,QACP7F,KAAMgF,EAAYhF,KAClBliB,QAAQ,aACR2P,QAAS,CACP8W,MAAO9W,EAAQ8W,QAGjBtqB,EAAAC,EAAAC,cAAC2rB,GAAD,oBC3FhBC,IAAShT,OACP9Y,EAAAC,EAAAC,cAAC6rB,EAAA,EAAD,KACE/rB,EAAAC,EAAAC,cAAC8rB,GAAD,OAEFC,SAASC,eAAe","file":"static/js/main.49104b38.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 363;","export const DCREGION = {\n  A: {\n    zh_hk: '中西區',\n    en_us: 'Central and Western',\n  },\n  B: {\n    zh_hk: '灣仔',\n    en_us: 'Wan Chai',\n  },\n  C: {\n    zh_hk: '東區',\n    en_us: 'Eastern',\n  },\n  D: {\n    zh_hk: '南區',\n    en_us: 'Southern',\n  },\n  E: {\n    zh_hk: '油尖旺',\n    en_us: 'Yau Tsim Mong',\n  },\n  F: {\n    zh_hk: '深水埗',\n    en_us: 'Sham Shui Po',\n  },\n  G: {\n    zh_hk: '九龍城',\n    en_us: 'Kowloon City',\n  },\n  H: {\n    zh_hk: '黃大仙',\n    en_us: 'Wong Tai Sin',\n  },\n  J: {\n    zh_hk: '觀塘',\n    en_us: 'Kwun Tong',\n  },\n  K: {\n    zh_hk: '荃灣',\n    en_us: 'Tsuen Wan',\n  },\n  L: {\n    zh_hk: '屯門',\n    en_us: 'Tuen Mun',\n  },\n  M: {\n    zh_hk: '元朗',\n    en_us: 'Yuen Long',\n  },\n  N: {\n    zh_hk: '北區',\n    en_us: 'North',\n  },\n  P: {\n    zh_hk: '大埔',\n    en_us: 'Tai Po',\n  },\n  Q: {\n    zh_hk: '西貢',\n    en_us: 'Sai Kung',\n  },\n  R: {\n    zh_hk: '沙田',\n    en_us: 'Sha Tin',\n  },\n  S: {\n    zh_hk: '葵青',\n    en_us: 'Kwai Tsing',\n  },\n  T: {\n    zh_hk: '離島',\n    en_us: 'Islands',\n  },\n}\n","import React, { Component } from 'react'\nimport * as d3 from 'd3'\n\nconst ROW_HEIGHT = 50\n\nclass StackedNormalizedHorizontalBarChart extends Component {\n  drawChart(data) {\n    const margin = { top: 30, right: 10, bottom: 0, left: 50 }\n    const height = data.length * ROW_HEIGHT + margin.top + margin.bottom\n    const width = 1000\n\n    const series = d3\n      .stack()\n      .keys(data.columns.slice(1))\n      .offset(d3.stackOffsetExpand)(data)\n\n    const yAxis = g =>\n      g\n        .style('font', '24px times')\n        .attr('transform', `translate(${margin.left},0)`)\n        .call(d3.axisLeft(y).tickSizeOuter(0))\n        .call(g => g.selectAll('.domain').remove())\n\n    const xAxis = g =>\n      g\n        .style('font', '24px times')\n        .attr('transform', `translate(0,${margin.top})`)\n        .call(d3.axisTop(x).ticks(width / 100, '%'))\n        .call(g => g.selectAll('.domain').remove())\n\n    const color = d3\n      .scaleOrdinal()\n      .domain(series.map(d => d.key))\n      .range(\n        d3\n          .quantize(t => d3.interpolateSpectral(t * 0.8 + 0.1), series.length)\n          .reverse()\n      )\n      .unknown('#ccc')\n\n    const y = d3\n      .scaleBand()\n      .domain(data.map(d => d.name))\n      .range([margin.top, height - margin.bottom])\n      .padding(0.1)\n\n    const x = d3.scaleLinear().range([margin.left, width - margin.right])\n\n    const svg = d3\n      .select('#stacked')\n      .append('svg')\n      .attr('viewBox', [0, 0, width, height])\n      .style('overflow', 'visible')\n\n    svg\n      .append('g')\n      .selectAll('g')\n      .data(series)\n      .enter()\n      .append('g')\n      .attr('fill', d => color(d.key))\n      .selectAll('rect')\n      .data(d => d)\n      .join('rect')\n      .attr('x', d => x(d[0]))\n      .attr('y', (d, i) => y(d.data.name))\n      .attr('width', d => x(d[1]) - x(d[0]))\n      .attr('height', y.bandwidth())\n\n    svg.append('g').call(xAxis)\n\n    svg.append('g').call(yAxis)\n  }\n\n  componentDidMount() {\n    const { data } = this.props\n    this.drawChart(data)\n  }\n\n  render() {\n    return (\n      <>\n        <div id=\"stacked\" style={{ height: 'auto', width: '100%' }}></div>\n      </>\n    )\n  }\n}\n\nexport default StackedNormalizedHorizontalBarChart\n","import React, { Component } from 'react'\nimport styled from 'styled-components'\nimport Button from '@material-ui/core/Button'\nimport { PropTypes } from 'prop-types'\nimport gql from 'graphql-tag'\nimport { Query } from 'react-apollo'\nimport _ from 'lodash'\nimport { DCREGION } from '../constants/dcregion'\nimport StackedNormalizedHorizontalBarChart from './StackedNormalizedHorizontalBarChart'\n\nconst Container = styled.div`\n  && {\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n  }\n`\n\nconst DistrictContainer = styled(Button)`\n  && {\n    width: 120px;\n    justify-content: left;\n  }\n`\n\nconst FETCH_CAMP_DATA = gql`\n  query fetch_camp_data($year: Int!) {\n    dc_candidates(where: { is_won: { _eq: true }, year: { _eq: $year } }) {\n      cacode\n      camp\n      person {\n        name_zh\n      }\n    }\n  }\n`\n\nfunction groupDataByRegionAndCamp(candidates) {\n  const byCodes = _.groupBy(candidates, candidate => candidate.cacode[0])\n  return Object.keys(byCodes).map(code => ({\n    code,\n    count: byCodes[code]\n      .map(r => ({ [r.camp]: 1 }))\n      .reduce((p, c) => {\n        const val = Object.assign(p)\n        Object.keys(c).forEach(k => (val[k] = c[k] + (val[k] ? val[k] : 0)))\n        return val\n      }, {}),\n  }))\n}\n\nfunction convertToD3Compatible(data) {\n  var res = data.map(d => {\n    var counts = Object.values(d.count)\n    return {\n      name: DCREGION[d.code].zh_hk,\n      建制: counts[0] || 0,\n      其他: counts[1] || 0,\n      泛民: counts[2] || 0,\n      total: counts.reduce((acc, c) => {\n        acc += c\n        return acc\n      }, 0),\n    }\n  })\n  res['columns'] = ['name', '建制', '其他', '泛民']\n  return res\n}\n\nconst CampCompareChartContainer = props => {\n  return (\n    <Query query={FETCH_CAMP_DATA} variables={{ year: 2015 }}>\n      {({ loading, error, data }) => {\n        if (loading) return null\n        if (error) return `Error! ${error}`\n        const dataFroGraph = groupDataByRegionAndCamp(data.dc_candidates)\n        const dataForD3 = convertToD3Compatible(dataFroGraph)\n        console.log(dataForD3)\n        return (\n          <Container>\n            <StackedNormalizedHorizontalBarChart\n              data={dataForD3}\n            ></StackedNormalizedHorizontalBarChart>\n          </Container>\n        )\n      }}\n    </Query>\n  )\n}\nexport default CampCompareChartContainer\n","import styled from 'styled-components'\nimport Typography from '@material-ui/core/Typography'\nimport React from 'react'\n\nconst StyledSubtTitle = styled(Typography)`\n  && {\n    color: ${props => props.theme.subtextColor};\n  }\n`\n\nexport const TitleText = props => {\n  return <Typography variant=\"h2\" {...props} />\n}\n\nexport const SubTitleText = props => {\n  return <StyledSubtTitle variant=\"h3\" {...props} />\n}\n","import React, { Component } from 'react'\n\nimport { withStyles } from '@material-ui/core/styles'\nimport Box from '@material-ui/core/Box'\nimport Button from '@material-ui/core/Button'\nimport Divider from '@material-ui/core/Divider'\nimport Typography from '@material-ui/core/Typography'\nimport CampCompareChartContainer from 'components/CampCompareChartContainer'\nimport styled from 'styled-components'\n\nimport { TitleText, SubTitleText } from 'components/atom/Text'\n\nconst styles = theme => ({})\n\nconst StyledDivier = styled(Divider)`\n  && {\n    background-color: #ececec;\n    width: 100%;\n    margin-top: 30px;\n    margin-bottom: 20px;\n  }\n`\n\nconst Container = styled.div`\n  width: 100%;\n  padding-top: 30px;\n  margin: auto;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: baseline;\n  padding-left: 16px;\n  padding-right: 16px;\n  flex-grow: 1;\n`\n\nconst TopSection = styled(Container)`\n  && {\n    background-color: #f2f2f3;\n  }\n`\n\nconst ExpandedRow = styled(Box)`\n  && {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n    flex-grow: 1;\n  }\n`\n\nconst TabButton = styled(Button)`\n  && {\n    width: 136px;\n    height: 52px;\n    border-radius: 2px;\n    box-shadow: 1px 1px 6px 1px rgba(51, 51, 51, 0.1);\n    background-color: ${props => props.theme.main.backgroundColor};\n    text-align: center;\n\n    &:hover {\n      text-decoration: none;\n    }\n  }\n`\n\nconst LandingIcon = styled.div`\n  margin-top: 70px;\n  margin-left: auto;\n  margin-right: auto;\n  width: 200px;\n  height: 128px;\n  background: url('/static/images/landingIcon.svg') no-repeat;\n  background-size: cover;\n`\n\nconst NoteHeader = styled(TitleText)`\n  && {\n    text-align: center;\n    width: 100%;\n  }\n`\n\nconst NoteContent = styled(Typography)`\n  && {\n    width: 100%;\n  }\n`\n\nclass SearchPage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      autoCompleteList: [],\n    }\n  }\n\n  async componentDidMount() {}\n\n  renderNote() {\n    return (\n      <>\n        <NoteHeader>為什麼你的一票很重要？</NoteHeader>\n        <NoteContent>\n          除非你有投票權、競選公職權，並且參與政治，否則政府不會回應你的利益。如果自己支持的人當選，即使自己的一票不會影響勝選結果，\n        </NoteContent>\n      </>\n    )\n  }\n\n  onTabSelected(type) {}\n\n  renderFooter() {\n    return <></>\n  }\n\n  render() {\n    return (\n      <>\n        <TopSection>\n          <ExpandedRow>\n            <TabButton onClick={this.onTabSelected('district')}>\n              <Typography variant=\"h4\">找選區</Typography>\n            </TabButton>\n            <TabButton onClick={this.onTabSelected('people')}>\n              <Typography variant=\"h4\">找議員</Typography>\n            </TabButton>\n          </ExpandedRow>\n          <LandingIcon />\n        </TopSection>\n        <Container>\n          <ExpandedRow>\n            <TitleText>議會觀測</TitleText>\n            <SubTitleText>了解更多</SubTitleText>\n          </ExpandedRow>\n          <CampCompareChartContainer />\n          <StyledDivier />\n          <ExpandedRow>\n            <TitleText>熱門議題</TitleText>\n            <SubTitleText>所有議題</SubTitleText>\n          </ExpandedRow>\n          <StyledDivier />\n          {this.renderNote()}\n          {this.renderFooter()}\n        </Container>\n      </>\n    )\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(SearchPage)\n","import createBreakpoints from '@material-ui/core/styles/createBreakpoints'\nimport createMuiTheme from '@material-ui/core/styles/createMuiTheme'\n\nexport const bps = createBreakpoints({})\n\nexport const headingFontFamily = 'Source Serif Pro, sans-serif'\nexport const bodyFontFamily = 'PT Serif, sans-serif'\n\nexport const fontFamily = ['PingFangTC-Semibold', 'PingFangTC-Medium']\n\nexport const typography = {}\n\nexport const theme = createMuiTheme()\n","import React, { Component } from 'react'\nimport Box from '@material-ui/core/Box'\nimport styled, { css } from 'styled-components'\nimport Avatar from '@material-ui/core/Avatar'\nimport Paper from '@material-ui/core/Paper'\nimport Grid from '@material-ui/core/Grid'\nimport moment from 'moment'\nimport gql from 'graphql-tag'\nimport { Query } from 'react-apollo'\nimport { bps } from 'utils/responsive'\n\n// TODO: add age, camp & political_affiliation\nconst GET_PEOPLE_PROFILE = gql`\n  query($id: uuid!) {\n    dc_people(\n      where: { id: { _eq: $id } }\n      order_by: { elections_aggregate: { max: { year: asc } } }\n    ) {\n      id\n      name_en\n      name_zh\n      estimated_yob\n      gender\n      elections {\n        occupation\n        cacode\n        year\n        votes\n        vote_percentage\n        is_won\n        constituency {\n          name_zh\n          expected_population\n          deviation_percentage\n        }\n      }\n    }\n  }\n`\n\nconst commonFontStyle = css`\n  font-family: 'PingFangTC-Light';\n  font-style: normal;\n  font-stretch: normal;\n  line-height: normal;\n  letter-spacing: normal;\n`\n\nconst CandidateName = styled.div`\n   {\n    ${commonFontStyle}\n    margin: 20px;\n    font-size: 24px;\n    font-weight: 600;\n    color: #ffffff;\n    ${bps.up('sm')} {\n      margin: 0px;\n      margin-top: 50px;\n      font-size: 30px;\n    }\n\n    ${bps.up('md')} {\n      margin-top: 50px;\n      font-size: 48px;\n    }\n  }\n`\n\nconst DistrictName = styled.div`\n   {\n    ${commonFontStyle}\n    font-size: 14px;\n    font-weight: 600;\n    color: #ffffff;\n    ${bps.up('sm')} {\n      font-size: 20px;\n    }\n\n    ${bps.up('md')} {\n      font-size: 36px;\n    }\n  }\n`\n\nconst FlexRowContainer = styled(Box)`\n  && {\n    display: flex;\n    flex-wrap: wrap;\n    align-content: flex-start;\n    margin: auto;\n\n    ${bps.up('md')} {\n      width: 100%;\n    }\n\n    ${bps.up('lg')} {\n      width: 1440px;\n    }\n  }\n`\n\nconst CandidateHeaderContainer = styled(FlexRowContainer)`\n  && {\n    opacity: 0.95;\n    background-color: #f6416e;\n  }\n`\n\nconst CandidateAvatar = styled(Avatar)`\n  && {\n    width: 153px;\n    height: 180px;\n    border-radius: 0;\n\n    ${bps.up('sm')} {\n      margin-top: 40px;\n      margin-left: 60px;\n    }\n\n    ${bps.up('md')} {\n      margin-left: 120px;\n    }\n  }\n`\n\nconst BasicInfoHeader = styled.div`\n  && {\n    ${commonFontStyle}\n    font-size: 32px;\n    font-weight: 600;\n    width: 100%;\n\n    ${bps.up('md')} {\n      margin-left: 65px;\n    }\n  }\n`\nconst ElectionHistoryContainer = styled(FlexRowContainer)`\n  && {\n    padding: 20px;\n    background-color: #fafafa;\n    ${bps.up('sm')} {\n      padding-left: 40px;\n    }\n\n    ${bps.up('md')} {\n      padding-left: 120px;\n      height: 100%;\n    }\n  }\n`\nconst ElectionHistoryHeader = styled.div`\n  && {\n    ${commonFontStyle}\n    font-size: 32px;\n    font-weight: 600;\n    color: #333333;\n    margin-top: 4px;\n  }\n`\n\nconst YearDiv = styled.div`\n  && {\n    font-size: 24px;\n    font-weight: 600;\n    color: #9b9b9b;\n    margin-bottom: 20px;\n  }\n`\n\nconst ElectionHistoryPaper = styled(Paper)`\n  && {\n    padding: 20px;\n  }\n`\n\nconst ElectionHistoryContentGrid = styled(Grid)`\n  && {\n    padding: 15px;\n  }\n`\n\nconst ElectionHistoryContentSpan = styled(Grid)`\n  && {\n    ${commonFontStyle}\n    font-size: 18px;\n    color: #4a4a4a;\n  }\n`\n\nconst ElectionHistoryContentHeaderSpan = styled(ElectionHistoryContentSpan)`\n  && {\n    font-weight: 500;\n  }\n`\nconst ElectionDetailButton = styled.div`\n  && {\n    ${commonFontStyle}\n    padding: 15px;\n    font-weight: 600;\n    color: #ffb700;\n    width: 100%;\n    text-align: center;\n    border-radius: 4px;\n    border: 2px solid #ffb700;\n    cursor: pointer;\n  }\n`\n\nconst BasicInfoGridContainer = styled(FlexRowContainer)`\n  && {\n    margin-top: 40px;\n    margin-left: 20px;\n    margin-bottom: 40px;\n\n    ${bps.up('sm')} {\n      padding-left: 40px;\n      margin-left: auto;\n      margin-right: auto;\n    }\n\n    ${bps.up('md')} {\n      padding-left: 55px;\n      height: 100%;\n    }\n  }\n`\n\nconst BasicInfoGridHeader = styled(Grid)`\n  && {\n    ${commonFontStyle}\n    font-weight: 600;\n    color: #4a4a4a;\n    font-size: 18px;\n  }\n`\n\nconst BasicInfoGridContent = styled(Grid)`\n  && {\n    ${commonFontStyle}\n    color: #4a4a4a;\n    font-size: 18px;\n  }\n`\n\nclass ProfilePage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  async componentDidMount() {}\n\n  handleElectionDetailButton = (year, code) => {\n    this.props.history.push(`/district/${year}/${code}`)\n  }\n\n  renderElectionInfoCard(election, yob) {\n    return (\n      <Grid item xs={12} md={4}>\n        <YearDiv>{`${election.year}年`}</YearDiv>\n        <ElectionHistoryPaper>\n          <ElectionHistoryContentGrid container spacing={1}>\n            <ElectionHistoryContentHeaderSpan item xs={12} md={4}>\n              地區\n            </ElectionHistoryContentHeaderSpan>\n            <ElectionHistoryContentSpan item xs={12} md={8}>\n              {' '}\n              {election.constituency && election.constituency.name\n                ? election.constituency.name\n                : '-'}{' '}\n            </ElectionHistoryContentSpan>\n          </ElectionHistoryContentGrid>\n          <hr />\n          <ElectionHistoryContentGrid container spacing={1}>\n            <ElectionHistoryContentHeaderSpan item xs={12} md={4}>\n              選區\n            </ElectionHistoryContentHeaderSpan>\n            <ElectionHistoryContentSpan item xs={12} md={8}>\n              {`${election.constituency.name_zh} （${election.cacode}）`}\n            </ElectionHistoryContentSpan>\n          </ElectionHistoryContentGrid>\n          <hr />\n          <ElectionHistoryContentGrid container spacing={1}>\n            <ElectionHistoryContentHeaderSpan item xs={12} md={4}>\n              陣營\n            </ElectionHistoryContentHeaderSpan>\n            <ElectionHistoryContentSpan item xs={12} md={8}>\n              {election.camp ? election.camp : '-'}\n            </ElectionHistoryContentSpan>\n          </ElectionHistoryContentGrid>\n          <hr />\n          <ElectionHistoryContentGrid container spacing={1}>\n            <ElectionHistoryContentHeaderSpan item xs={12} md={4}>\n              得票率\n            </ElectionHistoryContentHeaderSpan>\n            <ElectionHistoryContentSpan item xs={12} md={8}>\n              {`${election.vote_percentage}% （${\n                election.is_won ? '當選' : '落敗'\n              }）`}\n            </ElectionHistoryContentSpan>\n          </ElectionHistoryContentGrid>\n          <ElectionHistoryContentGrid container spacing={1}>\n            <ElectionDetailButton\n              onClick={() => {\n                this.handleElectionDetailButton(election.year, election.cacode)\n              }}\n            >\n              查看選舉資料\n            </ElectionDetailButton>\n          </ElectionHistoryContentGrid>\n        </ElectionHistoryPaper>\n      </Grid>\n    )\n  }\n\n  render() {\n    const {\n      match: {\n        params: { id },\n      },\n    } = this.props\n\n    // todo: use ENV_VAR\n    const homeUrl = 'https://cswbrian.github.io/district-councils-dashboard/'\n\n    return (\n      <Query query={GET_PEOPLE_PROFILE} variables={{ id }}>\n        {({ loading, error, data }) => {\n          if (loading) return null\n          if (error) return `Error! ${error}`\n          const person = data.dc_people[0]\n\n          return (\n            <>\n              <CandidateHeaderContainer>\n                <Box\n                  width={{ sm: '250px', md: '300px' }}\n                  height={{ sm: '200px' }}\n                >\n                  <CandidateAvatar\n                    src={`${homeUrl}/static/images/avatar/${person.id}.jpg`}\n                    imgProps={{\n                      onError: e => {\n                        e.target.src = `${homeUrl}/static/images/avatar/default.png`\n                      },\n                    }}\n                  ></CandidateAvatar>\n                </Box>\n                <Box>\n                  <CandidateName>\n                    {person.name_zh ? person.name_zh : ''}{' '}\n                    {person.name_zh ? person.name_en : ''}\n                    <DistrictName>{/* TODO */}-</DistrictName>\n                  </CandidateName>\n                </Box>\n              </CandidateHeaderContainer>\n\n              <BasicInfoGridContainer>\n                <Grid container spacing={3}>\n                  <Grid item xs={12} md={3}>\n                    <BasicInfoHeader>基本資料</BasicInfoHeader>\n                  </Grid>\n                  <Grid item xs={12} sm={6} md={4}>\n                    <Grid container spacing={3}>\n                      <BasicInfoGridHeader item xs={5}>\n                        性別\n                      </BasicInfoGridHeader>\n                      <BasicInfoGridContent item xs={7}>\n                        {person.gender\n                          ? person.gender === 'male'\n                            ? '男'\n                            : '女'\n                          : '-'}\n                      </BasicInfoGridContent>\n\n                      <BasicInfoGridHeader item xs={5}>\n                        年齡\n                      </BasicInfoGridHeader>\n                      <BasicInfoGridContent item xs={7}>\n                        {person.estimated_yob\n                          ? `${moment().year() - person.estimated_yob}歲`\n                          : '-'}\n                      </BasicInfoGridContent>\n\n                      <BasicInfoGridHeader item xs={5}>\n                        出生年份\n                      </BasicInfoGridHeader>\n                      <BasicInfoGridContent item xs={7}>\n                        {person.estimated_yob ? person.estimated_yob : '-'}\n                      </BasicInfoGridContent>\n                    </Grid>\n                  </Grid>\n                  <Grid item xs={12} sm={6} md={4}>\n                    <Grid container spacing={3}>\n                      <BasicInfoGridHeader item xs={5}>\n                        職業\n                      </BasicInfoGridHeader>\n                      <BasicInfoGridContent item xs={7}>\n                        {person.elections[person.elections.length - 1]\n                          .occupation\n                          ? person.elections[person.elections.length - 1]\n                              .occupation\n                          : '-'}\n                      </BasicInfoGridContent>\n\n                      <BasicInfoGridHeader item xs={5}>\n                        陣營\n                      </BasicInfoGridHeader>\n                      <BasicInfoGridContent item xs={7}>\n                        {/* TODO */}-\n                      </BasicInfoGridContent>\n\n                      <BasicInfoGridHeader item xs={5}>\n                        所屬政治聯繫\n                      </BasicInfoGridHeader>\n                      <BasicInfoGridContent item xs={7}>\n                        {/* TODO */}-\n                      </BasicInfoGridContent>\n                    </Grid>\n                  </Grid>\n                </Grid>\n              </BasicInfoGridContainer>\n\n              <ElectionHistoryContainer>\n                <Grid container spacing={3}>\n                  <Grid item xs={12}>\n                    <ElectionHistoryHeader>區議會選舉</ElectionHistoryHeader>\n                  </Grid>\n\n                  {person.elections\n                    .sort((a, b) => b.year - a.year)\n                    .map(election =>\n                      this.renderElectionInfoCard(\n                        election,\n                        person.estimated_yob\n                      )\n                    )}\n                </Grid>\n              </ElectionHistoryContainer>\n            </>\n          )\n        }}\n      </Query>\n    )\n  }\n}\n\nexport default ProfilePage\n","import React, { Component } from 'react'\nimport Map from 'ol/Map'\nimport View from 'ol/View'\nimport TileLayer from 'ol/layer/Tile'\nimport VectorLayer from 'ol/layer/Vector'\nimport VectorSource from 'ol/source/Vector'\nimport XYZ from 'ol/source/XYZ'\nimport GeoJSON from 'ol/format/GeoJSON'\nimport { Style, Stroke, Fill, Text } from 'ol/style'\nimport Select from 'ol/interaction/Select'\nimport styled from 'styled-components'\n\nimport dc2003 from '../data/DCCA_2003'\nimport dc2007 from '../data/DCCA_2007'\nimport dc2011 from '../data/DCCA_2011'\nimport dc2015 from '../data/DCCA_2015'\nimport dc2019 from '../data/DCCA_2019'\n\nconst MapContainer = styled.div`\n  width: 100%;\n  height: 100%;\n`\n\nconst regionStyle = new Style({\n  fill: new Fill({\n    color: 'rgba(255, 255, 255, 0.2)',\n  }),\n  stroke: new Stroke({\n    color: '#319FD3',\n    width: 1,\n  }),\n  text: new Text({\n    font: '16px Calibri,sans-serif',\n    fill: new Fill({\n      color: '#000',\n    }),\n    stroke: new Stroke({\n      color: '#fff',\n      width: 2,\n    }),\n  }),\n})\n\nconst highlightStyle = new Style({\n  stroke: new Stroke({\n    color: '#f00',\n    width: 1,\n  }),\n  fill: new Fill({\n    color: 'rgba(255,0,0,0.1)',\n  }),\n  text: new Text({\n    font: '16px Calibri,sans-serif',\n    fill: new Fill({\n      color: '#000',\n    }),\n    stroke: new Stroke({\n      color: '#f00',\n      width: 2,\n    }),\n  }),\n})\n\nclass OLMap extends Component {\n  featureOverlay\n  highlightedFeature\n\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  componentDidMount() {\n    const { year, code } = this.props\n    const dc = [dc2003, dc2007, dc2011, dc2015, dc2019].find(\n      d => d.name === `DCCA_${year}`\n    )\n    let isDCDataExist = dc ? true : false\n    let featuresLayer\n\n    if (isDCDataExist) {\n      this.featureSource = new VectorSource({\n        features: new GeoJSON().readFeatures(dc),\n      })\n\n      featuresLayer = new VectorLayer({\n        source: this.featureSource,\n        style: feature => {\n          regionStyle.getText().setText(feature.getProperties().CACODE)\n          return regionStyle\n        },\n      })\n    }\n\n    // create map object with feature layer\n    const layers = [\n      //default OSM layer\n      new TileLayer({\n        source: new XYZ({\n          url:\n            'https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}',\n        }),\n      }),\n    ]\n\n    if (isDCDataExist) {\n      layers.push(featuresLayer)\n    }\n\n    const map = new Map({\n      target: this.refs.mapContainer,\n      layers,\n      view: new View({\n        projection: 'EPSG:4326',\n        center: [114.2029, 22.3844],\n        zoom: 13,\n      }),\n    })\n\n    this.featureOverlay = new VectorLayer({\n      source: new VectorSource(),\n      map: map,\n      style: function(feature) {\n        highlightStyle.getText().setText(feature.getProperties().CACODE)\n        return highlightStyle\n      },\n    })\n\n    if (isDCDataExist) {\n      // Fit to feature\n      const features = this.featureSource.getFeatures()\n      for (let i = 0; i < features.length; i++) {\n        if (features[i].getProperties().CACODE === code) {\n          const extent = features[i].getGeometry().getExtent()\n          map.getView().fit(extent, {\n            size: map.getSize(),\n            padding: [10, 10, 10, 10],\n          })\n\n          this.highlightFeature(features[i])\n          break\n        }\n      }\n    }\n\n    this.setState({\n      map,\n      view: map.getView(),\n      featuresLayer: isDCDataExist ? featuresLayer : null,\n    })\n\n    const select = new Select()\n\n    if (select !== null) {\n      map.addInteraction(select)\n      select.on('select', this.handleMapClick)\n    }\n  }\n\n  highlightFeature(feature) {\n    if (this.highlightedFeature) {\n      this.featureOverlay.getSource().removeFeature(this.highlightedFeature)\n    }\n\n    this.featureOverlay.getSource().addFeature(feature)\n    this.highlightedFeature = feature\n  }\n\n  handleMapClick = e => {\n    const { year, changeDistrict } = this.props\n    const selectedFeature = e.target.getFeatures().item(0)\n\n    if (selectedFeature) {\n      this.highlightFeature(selectedFeature)\n      changeDistrict(year, selectedFeature.get('CACODE'))\n      this.state.map.getView().fit(selectedFeature.getGeometry().getExtent(), {\n        duration: 200,\n      })\n    }\n  }\n\n  render() {\n    return <MapContainer ref=\"mapContainer\"> </MapContainer>\n  }\n}\n\nexport default OLMap\n","import React, { Component } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport Paper from '@material-ui/core/Paper'\nimport IconButton from '@material-ui/core/IconButton'\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward'\nimport Divider from '@material-ui/core/Divider'\nimport Box from '@material-ui/core/Box'\nimport PropTypes from 'prop-types'\nimport { bps } from 'utils/responsive'\n\nconst Container = styled(Paper)`\n  && {\n    width: 400px;\n    height: 400px;\n    background-color: #f6f6f6;\n    padding: 0;\n\n    ${bps.down('md')} {\n      width: 100%;\n    }\n  }\n`\n\nconst InnerContainer = styled(Box)`\n  && {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    align-items: baseline;\n    padding-left: 32px;\n    padding-right: 32px;\n  }\n`\n\nconst YearText = styled(Typography)`\n  && {\n    font-family: Avenir;\n    font-size: 30px;\n    font-weight: 900;\n    color: #333333;\n  }\n`\n\nconst RegionText = styled(Typography)`\n  && {\n    width: 100%;\n    font-family: PingFangTC-Medium;\n    font-size: 20px;\n    font-weight: 500;\n    color: #ffb700;\n  }\n`\n\nconst CodeText = styled(Typography)`\n  && {\n    margin-left: 10px;\n    font-family: PingFangTC-Light;\n    font-size: 40px;\n    font-weight: 300;\n    color: #9b9b9b;\n  }\n`\n\nconst StyledDivier = styled(Divider)`\n  && {\n    margin-top: 40px;\n    background-color: #cecece;\n    width: 100%;\n  }\n`\n\nconst SeperatedRow = styled(Box)`\n  && {\n    margin-top: 20px;\n    display: flex;\n    width: 100%;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n  }\n`\n\nfunction getCouncillor(candidates) {\n  const councillor = {\n    name: '',\n    politicalAffiliation: '',\n  }\n\n  const electedCandidate = candidates.find(candidate => candidate.is_won)\n  if (electedCandidate) {\n    councillor.name =\n      electedCandidate.person.name_zh || electedCandidate.person.name_en\n    if (electedCandidate.person.political_affiliations.length) {\n      const political_affiliation =\n        electedCandidate.person.political_affiliations[0].political_affiliation\n      councillor.political_affiliation = political_affiliation.name_zh\n    }\n  }\n\n  return councillor\n}\n\nclass DistrictCard extends Component {\n  static propTypes = {\n    year: PropTypes.number.isRequired,\n    code: PropTypes.string.isRequired,\n    name_zh: PropTypes.string.isRequired,\n    name_en: PropTypes.string.isRequired,\n    onPrevElection: PropTypes.func.isRequired,\n    onNextElection: PropTypes.func.isRequired,\n    candidates: PropTypes.array.isRequired,\n  }\n\n  renderPrevElectionButton(year) {\n    return year > 1999 ? (\n      <IconButton aria-label=\"arrow_back\" onClick={this.props.onPrevElection}>\n        <ArrowBackIcon />\n      </IconButton>\n    ) : (\n      // if there is no next button, show a 48x48 empty box to align the 2 elements on the right\n      <div style={{ width: '48px', height: '48px' }}></div>\n    )\n  }\n\n  renderNextElectionButton(year) {\n    const nextElectionYear = year + 4\n    const currentYear = new Date().getFullYear()\n    return nextElectionYear <= currentYear ? (\n      <IconButton\n        aria-label=\"arrow_forward\"\n        onClick={this.props.onNextElection}\n      >\n        <ArrowForwardIcon />\n      </IconButton>\n    ) : (\n      // if there is no next button, show a 48x48 empty box to align the 2 elements on the left\n      <div style={{ width: '48px', height: '48px' }}></div>\n    )\n  }\n\n  render() {\n    const { name_zh, year, code, candidates } = this.props\n    const councillor = getCouncillor(candidates)\n    return (\n      <Container>\n        <InnerContainer border={0} color=\"primary.minor\">\n          <SeperatedRow>\n            {this.renderPrevElectionButton(year)}\n            <YearText variant=\"button\" gutterBottom>\n              {year}\n            </YearText>\n            {this.renderNextElectionButton(year)}\n          </SeperatedRow>\n          <RegionText>--區</RegionText>\n          <Typography variant=\"h3\">{name_zh}</Typography>\n          <CodeText>{code}</CodeText>\n          <StyledDivier />\n          <SeperatedRow>\n            <Typography variant=\"h6\">區議員</Typography>\n            <Typography>{councillor.name}</Typography>\n          </SeperatedRow>\n          <SeperatedRow>\n            <Typography variant=\"h6\">政治聯繫</Typography>\n            <Typography>{councillor.political_affiliation}</Typography>\n          </SeperatedRow>\n          <SeperatedRow>\n            <Typography variant=\"h6\">投票站</Typography>\n            <Typography variant=\"subtitle2\">-</Typography>\n          </SeperatedRow>\n        </InnerContainer>\n      </Container>\n    )\n  }\n}\n\nexport default DistrictCard\n","import React, { Component } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport PropTypes from 'prop-types'\n\nconst Container = styled.div`\n   {\n    width: 100%;\n    height: 220px;\n    padding: 0;\n  }\n`\n\nclass MainAreas extends Component {\n  static propTypes = {\n    areas: PropTypes.array.isRequired,\n  }\n\n  render() {\n    const { areas } = this.props\n    return (\n      <Container maxWidth=\"lg\">\n        <Typography variant=\"h6\" gutterBottom>\n          主要屋邨 / 地區\n        </Typography>\n        <Box display=\"flex\" flexWrap=\"wrap\" alignContent=\"flex-start\">\n          {areas.map((area, index) => (\n            <Box mr={1} key={index}>\n              {`${Object.keys(area)[0]}. ${area[Object.keys(area)[0]]}`}\n            </Box>\n          ))}\n        </Box>\n      </Container>\n    )\n  }\n}\n\nexport default MainAreas\n","import React from 'react'\nimport { lighten, makeStyles, withStyles } from '@material-ui/core/styles'\nimport LinearProgress from '@material-ui/core/LinearProgress'\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n  },\n  margin: {\n    margin: theme.spacing(1),\n  },\n}))\n\nconst BorderLinearProgress = withStyles({\n  root: {\n    height: 20,\n    width: 100,\n    backgroundColor: props => lighten(props.bgcolor, 0.5),\n  },\n  bar: {\n    borderRadius: 20,\n    backgroundColor: props => props.bgcolor,\n  },\n})(LinearProgress)\n\nexport default function CustomizedProgressBars(props) {\n  const classes = useStyles()\n  return (\n    <React.Fragment>\n      <BorderLinearProgress\n        className={classes.margin}\n        variant=\"determinate\"\n        color=\"secondary\"\n        value={props.value}\n        bgcolor={props.color}\n      />\n    </React.Fragment>\n  )\n}\n","import React, { Component } from 'react'\nimport Divider from '@material-ui/core/Divider'\nimport styled, { css } from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport PropTypes from 'prop-types'\nimport CustomizedProgressBars from '../../components/BorderLinearProgress'\nimport Avatar from '@material-ui/core/Avatar'\nimport { bps } from 'utils/responsive'\nimport { getCamp, getPoliticalAffiliation } from 'helpers/candidate'\n\nconst fontBoldStyle = css`\n  font-family: 'PingFangTC-Medium';\n  font-style: normal;\n  font-stretch: normal;\n  line-height: normal;\n  letter-spacing: normal;\n`\n\nconst fontNormalStyle = css`\n  font-family: 'PingFangTC';\n  font-style: normal;\n  font-stretch: normal;\n  line-height: normal;\n  letter-spacing: normal;\n`\n\nconst OvalButton = styled.div`\n  width: 95px;\n  height: 95px;\n  background: url('/static/images/electedIcon.png');\n`\n\nconst Container = styled.div`\n   {\n    padding: 0px 15px 100px 25px;\n  }\n`\n\nconst RowsContainer = styled.div`\n   {\n    margin-top: 30px;\n    border-radius: 8px;\n    box-shadow: 0 2px 10px 0 rgba(0, 0, 0, 0.2);\n    background-color: #ffffff;\n    ${bps.down('sm')} {\n      margin-left: 10px;\n      margin-right: 10px;\n    }\n  }\n`\n\nconst FlexRowContainer = styled(Box)`\n  && {\n    display: flex;\n    flex-wrap: wrap;\n    align-content: flex-start;\n    width: 1440px;\n    margin: auto;\n    cursor: pointer;\n    ${bps.down('sm')} {\n      width: 1440px;\n      margin: auto;\n    }\n  }\n`\n\nconst FlexColumn = styled(Box)`\n  && {\n    height: 149px;\n    align-items: center;\n    display: flex;\n    padding-left: 40px;\n    ${bps.down('sm')} {\n      height: 80px;\n    }\n  }\n`\n\nconst AvatarColumn = styled(FlexColumn)`\n  && {\n    width: 100px;\n    ${bps.down('sm')} {\n      width: 100%;\n      height: 149px;\n    }\n  }\n`\n\nconst NameColumn = styled(FlexColumn)`\n  && {\n    width: 200px;\n    ${bps.down('sm')} {\n      width: 100%;\n    }\n  }\n`\n\nconst PoliticalColumn = styled(FlexColumn)`\n  && {\n    flex-direction: column;\n    justify-content: center;\n    align-items: flex-start;\n    width: 180px;\n    ${bps.down('sm')} {\n      width: 100%;\n    }\n  }\n`\n\nconst StyledDivier = styled(Divider)`\n  && {\n    margin-left: 30px;\n    margin-right: 30px;\n    ${bps.down('sm')} {\n      margin-top: 30px;\n    }\n  }\n`\nconst CandidateListTitle = styled.div`\n   {\n    ${fontBoldStyle}\n    font-size: 32px;\n    font-weight: 600;\n    color: #333333;\n  }\n`\n\nconst CandidateName = styled.div`\n   {\n    ${fontBoldStyle}\n    font-size: 24px;\n    font-weight: 500;\n    color: #333333;\n  }\n`\n\nconst BlueVoteContainer = styled.div`\n   {\n    ${fontBoldStyle}\n    font-size: 18px;\n    font-weight: 500;\n    color: #306ece;\n  }\n`\n\nconst RedVoteContainer = styled.div`\n   {\n    ${fontBoldStyle}\n    font-size: 18px;\n    font-weight: 500;\n    color: #f6416e;\n  }\n`\n\nconst ContentHeader = styled.div`\n   {\n    ${fontBoldStyle}\n    font-size: 18px;\n    font-weight: 600;\n    color: #4a4a4a;\n  }\n`\n\nconst Content = styled.div`\n   {\n    ${fontNormalStyle}\n    font-size: 18px;\n    color: #4a4a4a;\n  }\n`\n\nclass CandidateList extends Component {\n  static propTypes = {\n    candidates: PropTypes.array.isRequired,\n    year: PropTypes.number.isRequired,\n    code: PropTypes.string.isRequired,\n  }\n\n  // todo: use ENV_VAR\n  homeUrl = 'https://cswbrian.github.io/district-councils-dashboard/'\n\n  render() {\n    const { candidates } = this.props\n\n    return (\n      <Container maxWidth=\"lg\">\n        <CandidateListTitle>議員候選人</CandidateListTitle>\n        <RowsContainer>\n          {candidates\n            .sort((a, b) => a.candidate_number - b.candidate_number)\n            .map((candidate, index) => (\n              <React.Fragment key={index}>\n                {index > 0 ? <StyledDivier /> : null}\n                <FlexRowContainer\n                  style={{ width: '100%' }}\n                  key={candidate.candidate_number}\n                  onClick={() => {\n                    this.props.handleCandidateSelected(candidate.person.id)\n                  }}\n                >\n                  <AvatarColumn>\n                    <Avatar\n                      src={`${this.homeUrl}/static/images/avatar/${candidate.person.id}.jpg`}\n                      imgProps={{\n                        onError: e => {\n                          e.target.src =\n                            this.homeUrl + '/static/images/avatar/default.png'\n                        },\n                      }}\n                      style={{\n                        width: '66px',\n                        height: '88px',\n                        borderRadius: 0,\n                      }}\n                    ></Avatar>\n                  </AvatarColumn>\n                  <NameColumn p={1}>\n                    <CandidateName>\n                      {candidate.candidate_number !== 0 &&\n                        `${candidate.candidate_number}. `}\n                      {candidate.person.name_zh || candidate.person.name_en}\n                    </CandidateName>\n                  </NameColumn>\n                  <PoliticalColumn>\n                    <ContentHeader>陣營</ContentHeader>\n                    {'\\n'}\n                    <Content>{getCamp(candidate)}</Content>\n                  </PoliticalColumn>\n                  <PoliticalColumn>\n                    <ContentHeader>政治聯繫</ContentHeader>\n                    {'\\n'}\n                    <Content>{getPoliticalAffiliation(candidate)}</Content>\n                  </PoliticalColumn>\n                  {candidate.candidate_number !== 0 && (\n                    <>\n                      <PoliticalColumn>\n                        {candidate.is_won && (\n                          <BlueVoteContainer>\n                            {`${candidate.votes}票 (${candidate.vote_percentage}%)`}\n                          </BlueVoteContainer>\n                        )}\n                        {!candidate.is_won && (\n                          <RedVoteContainer>\n                            {`${candidate.votes}票 (${candidate.vote_percentage}%)`}\n                          </RedVoteContainer>\n                        )}\n                      </PoliticalColumn>\n                      <FlexColumn>\n                        <ContentHeader style={{ color: '#9b9b9b' }}>\n                          得票率\n                        </ContentHeader>\n                        <Content>\n                          <CustomizedProgressBars\n                            value={parseFloat(candidate.vote_percentage)}\n                            color={candidate.is_won ? '#306ece' : '#f6416e'}\n                          />\n                        </Content>\n                      </FlexColumn>\n                    </>\n                  )}\n                  <FlexColumn>\n                    {candidate.is_won && <OvalButton />}\n                    {!candidate.is_won && (\n                      <div\n                        style={{\n                          width: '95px',\n                          height: '95px',\n                        }}\n                      ></div>\n                    )}\n                  </FlexColumn>\n                </FlexRowContainer>\n              </React.Fragment>\n            ))}\n        </RowsContainer>\n      </Container>\n    )\n  }\n}\n\nexport default CandidateList\n","export const getPoliticalAffiliation = candidate => {\n  let pa = '-'\n  try {\n    // assume from the graphql we already sort out the only active political_affiliations here\n    pa =\n      candidate.person.political_affiliations[0].political_affiliation.name_zh\n  } catch (err) {}\n  return pa\n}\n\nexport const getCamp = candidate => {\n  let camp = '-'\n  try {\n    // assume from the graphql we already sort out the only active political_affiliations here\n    camp =\n      candidate.person.political_affiliations[0].political_affiliation.camp\n        .name_zh\n  } catch (err) {}\n  return camp\n}\n","import React, { Component } from 'react'\nimport zingchart from 'zingchart'\n\n// MUST define modulesdir for VoterTurnoutChart\n// https://www.zingchart.com/docs/api/modules/standard/#modules__modules_list\nzingchart.MODULESDIR = 'https://cdn.zingchart.com/modules/'\n\nconst chartJSON = chartData => {\n  const data = { male: [], female: [] }\n\n  Object.values(chartData.data).forEach(value => {\n    data['male'].push(value['male'])\n    data['female'].push(value['female'])\n  })\n\n  // TODO: replace this hacky code\n  const titles = Object.keys(chartData.data).map(\n    key =>\n      key\n        .split('_')\n        .filter(val => !isNaN(parseInt(val)))\n        .join('-') + '歲'\n  )\n  titles[titles.length - 1] += '及以上'\n  // Demo\n  // https://codepen.io/pen/?editors=1010\n\n  return {\n    type: 'bar',\n    stacked: true,\n    'stack-type': 'normal',\n    title: {\n      text: '投票人士年齡分布',\n      x: '40px',\n      y: '5px',\n      align: 'left',\n    },\n    subtitle: {\n      text: '佔全部',\n      x: '175px',\n      y: '5px',\n      align: 'left',\n      bold: false,\n      'font-size': '10px',\n      'font-color': '#7E7E7E',\n      'background-color': 'none',\n    },\n    plot: {\n      'bar-width': '25px',\n      'hover-state': {\n        visible: false,\n      },\n      animation: {\n        delay: 300,\n        sequence: 1,\n      },\n      valueBox: {\n        text: '%total',\n        rules: [\n          {\n            rule: '%stack-top == 0',\n            visible: 0,\n          },\n        ],\n        decimals: 0,\n      },\n    },\n    'scale-x': {\n      values: titles,\n      tick: {\n        visible: false,\n      },\n      guide: {\n        visible: false,\n      },\n      item: {\n        'font-color': '#8B8B8B',\n      },\n    },\n    'scale-y': {\n      short: true,\n      'line-color': '#7E7E7E',\n      tick: {\n        visible: false,\n      },\n      guide: {\n        'line-style': 'solid',\n      },\n      item: {\n        'font-color': '#8B8B8B',\n      },\n    },\n    series: [\n      {\n        values: data.male,\n        'background-color': '#003f5c',\n      },\n      {\n        values: data.female,\n        'background-color': '#ff6361',\n      },\n    ],\n    tooltip: {\n      visible: false,\n    },\n  }\n}\n\nclass VoterTurnoutChart extends Component {\n  componentDidMount() {\n    zingchart.render({\n      id: this.props.id,\n      // data: this.props.data,\n      data: chartJSON(this.props.data),\n    })\n  }\n\n  //Used to check the values being passed in to avoid unnecessary changes.\n  shouldComponentUpdate(nextProps, nextState) {\n    //Lazy object comparison\n    return !(JSON.stringify(nextProps.data) === JSON.stringify(this.props.data))\n  }\n\n  componentWillUpdate(nextProps) {\n    zingchart.exec(this.props.id, 'setdata', {\n      data: chartJSON(nextProps.data), //nextProps.data,\n    })\n  }\n\n  render() {\n    return (\n      <div\n        id={this.props.id}\n        style={{\n          width: this.props.width || '100%',\n          height: this.props.height || '450px',\n        }}\n      ></div>\n    )\n  }\n}\n\nexport default VoterTurnoutChart\n","import React, { Component } from 'react'\nimport * as d3 from 'd3'\n\n/**\n * Idea from https://gist.github.com/XavierGimenez/8070956\n */\n\nclass WaffleChart extends Component {\n  drawChart(data) {\n    var total = 0\n    var width,\n      height,\n      widthSquares = 20,\n      heightSquares = 20,\n      squareSize = 20,\n      squareValue = 0,\n      gap = 1,\n      theData = []\n    var color = d3.scaleOrdinal(d3.schemeCategory10)\n    //total\n\n    total = d3.sum(data, function(d) {\n      return d.population\n    })\n    //value of a square\n    squareValue = total / (widthSquares * heightSquares)\n    //remap data\n    data.forEach(function(d, i) {\n      d.population = +d.population\n      d.units = Math.round(d.population / squareValue)\n      d.percentage = Math.floor((d.population * 100) / total)\n      theData = theData.concat(\n        Array(d.units + 1)\n          .join(1)\n          .split('')\n          .map(function() {\n            return {\n              squareValue: squareValue,\n              units: d.units,\n              population: d.population,\n              percentage: d.percentage,\n              groupIndex: i,\n            }\n          })\n      )\n    })\n    width = squareSize * widthSquares + widthSquares * gap + 25\n    height = squareSize * heightSquares + heightSquares * gap + 25\n    d3.select('#waffle')\n      .append('svg')\n      .attr('width', width)\n      .attr('height', height)\n      .append('g')\n      .selectAll('div')\n      .data(theData)\n      .enter()\n      .append('rect')\n      .attr('width', squareSize)\n      .attr('height', squareSize)\n      .attr('fill', function(d) {\n        return color(d.groupIndex)\n      })\n      .attr('y', function(d, i) {\n        // const row = i % heightSquares;\n        // return (heightSquares * squareSize) - ((row * squareSize) + (row * gap))\n        const row = Math.floor(i / widthSquares)\n        return row * squareSize + row * gap\n      })\n      .attr('x', function(d, i) {\n        //group n squares for column\n        // const col = Math.floor(i / heightSquares);\n        // return (col * squareSize) + (col * gap);\n        const col = i % widthSquares\n        return col * squareSize + col * gap\n      })\n      .append('title')\n      .text(function(d, i) {\n        return (\n          data[d.groupIndex].name +\n          ' | ' +\n          d.population +\n          ' , ' +\n          d.percentage +\n          '%'\n        )\n      })\n    //add legend with categorical data\n    var legend = d3\n      .select('#legend')\n      .append('svg')\n      .attr('width', 300)\n      .attr('height', 200)\n      .append('g')\n      .selectAll('div')\n      .data(data)\n      .enter()\n      .append('g')\n      .attr('transform', function(d, i) {\n        return 'translate(0,' + i * 20 + ')'\n      })\n    legend\n      .append('rect')\n      .attr('width', 18)\n      .attr('height', 18)\n      .style('fill', function(d, i) {\n        return color(i)\n      })\n    legend\n      .append('text')\n      .attr('x', 25)\n      .attr('y', 13)\n      .text(function(d) {\n        return d.name\n      })\n    //add value of a unit square\n    var legend2 = d3\n      .select('#legend')\n      .select('svg')\n      .append('g')\n      .attr('transform', 'translate(200,0)')\n    legend2\n      .append('text')\n      .attr('y', '14')\n      .attr('font-size', '18px')\n      .text('Total: ' + total)\n      .attr('fill', '#444444')\n  }\n\n  componentDidMount() {\n    this.drawChart(this.props.data)\n  }\n\n  render() {\n    return (\n      <>\n        <div id=\"waffle\"></div>\n\n        <div id=\"legend\"></div>\n      </>\n    )\n  }\n}\n\nexport default WaffleChart\n","import React, { Component } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport PropTypes from 'prop-types'\nimport gql from 'graphql-tag'\nimport { Query } from 'react-apollo'\nimport VoterTurnoutChart from './VoterTurnoutChart'\nimport WaffleChart from '../charts/WaffleChart'\n\nconst QUERY_FETCH_VOTES = gql`\n  query($year: Int!, $code: String!) {\n    dc_constituencies(where: { year: { _eq: $year }, code: { _eq: $code } }) {\n      candidates_aggregate {\n        aggregate {\n          sum {\n            votes\n          }\n        }\n      }\n      candidates {\n        votes\n        person {\n          name_zh\n          name_en\n        }\n      }\n      vote_stat {\n        total_votes\n        total_voters\n        total_voted_voters\n        population_excluded_foreign_worker\n        population_excluded_foreign_worker_lte_age_15\n        population_excluded_foreign_worker_lte_age_20\n      }\n      station_stats {\n        station_code\n        name_en\n        name_zh\n        votes {\n          votes\n          age\n          gender\n        }\n      }\n    }\n  }\n`\nconst Container = styled.div`\n   {\n    padding: 0px 15px 100px 25px;\n  }\n`\n\nconst getDataForWaffleChart = (voteStat, candidates) => {\n  const {\n    total_votes,\n    total_voters,\n    total_voted_voters,\n    population_excluded_foreign_worker,\n    population_excluded_foreign_worker_lte_age_15,\n    // population_excluded_foreign_worker_lte_age_20\n  } = voteStat\n\n  // check first the data\n  // TODO: the data should be good enough to remove this checking\n  if (\n    population_excluded_foreign_worker_lte_age_15 < total_voters ||\n    total_voters === 0 ||\n    total_voted_voters === 0\n  ) {\n    return []\n  }\n\n  const voteStats = [\n    {\n      name: '不能投票',\n      // population: population_excluded_foreign_worker - population_excluded_foreign_worker_lte_age_15,\n      population: population_excluded_foreign_worker - total_voters,\n    },\n    {\n      name: '沒有投票',\n      population:\n        population_excluded_foreign_worker_lte_age_15 - total_voted_voters,\n      // total_votes - total_voted_voters = registered but didn't vote?\n    },\n    {\n      name: '投票失效',\n      population: total_voted_voters - total_votes,\n      // total_votes - total_voted_voters = registered but didn't vote?\n    },\n  ]\n\n  candidates.forEach(({ votes, person: { name_zh, name_en } }) => {\n    voteStats.push({\n      name: `投給${name_zh || name_en}`,\n      population: votes,\n      // total_votes - total_voted_voters = registered but didn't vote?\n    })\n  })\n\n  return voteStats\n}\n\nclass MainAreas extends Component {\n  static propTypes = {\n    year: PropTypes.number.isRequired,\n    code: PropTypes.string.isRequired,\n    district: PropTypes.object.isRequired,\n  }\n\n  render() {\n    const { year, code } = this.props\n    return (\n      <Query\n        query={QUERY_FETCH_VOTES}\n        variables={{ year: parseInt(year, 10), code }}\n      >\n        {({ loading, error, data }) => {\n          if (loading) return null\n          if (error) return `Error! ${error}`\n          const { candidates, vote_stat } = data.dc_constituencies[0]\n\n          let voteStats = []\n          if (vote_stat) {\n            voteStats = getDataForWaffleChart(vote_stat, candidates)\n          }\n\n          const stats = data.dc_constituencies[0].station_stats\n          const barVote = { data: {} }\n          barVote.total = stats.reduce((acc, cur) => {\n            const sub_total = cur.votes.reduce((acc, cur) => {\n              if (typeof barVote.data[cur.age] === 'undefined') {\n                barVote.data[cur.age] = {}\n              }\n              if (typeof barVote.data[cur.age][cur.gender] === 'undefined') {\n                barVote.data[cur.age][cur.gender] = 0\n              }\n              barVote.data[cur.age][cur.gender] += cur.votes\n              return acc + cur.votes\n            }, 0)\n            return acc + sub_total\n          }, 0)\n          return (\n            <Container>\n              <Typography variant=\"h4\">人口資料</Typography>\n              <VoterTurnoutChart\n                id={`${year}_${code}_voter_turnout`}\n                data={barVote}\n              />\n              {voteStats.length > 0 ? (\n                <WaffleChart\n                  id={`${year}_${code}_voter_treemap`}\n                  data={voteStats}\n                />\n              ) : (\n                ''\n              )}\n            </Container>\n          )\n        }}\n      </Query>\n    )\n  }\n}\n\nexport default MainAreas\n","import React, { Component } from 'react'\nimport Box from '@material-ui/core/Box'\nimport OLMap from '../../components/OLMap'\nimport gql from 'graphql-tag'\nimport { Query } from 'react-apollo'\nimport DistrictCard from 'components/district/DistrictCard'\nimport MainAreas from 'components/district/MainAreas'\nimport CandidateList from 'components/district/CandidateList'\nimport Metrics from 'components/district/Metrics'\nimport styled from 'styled-components'\nimport { bps } from 'utils/responsive'\n\nconst GET_DISTRICTS = gql`\n  query($year: Int!, $code: String!, $electionYear: date) {\n    dc_constituencies(where: { year: { _eq: $year }, code: { _eq: $code } }) {\n      name_zh\n      name_en\n      code\n      deviation_percentage\n      expected_population\n      main_areas\n      candidates {\n        candidate_number\n        person {\n          id\n          name_zh\n          name_en\n          political_affiliations(\n            where: {\n              year_from: { _lte: $electionYear }\n              year_to: { _gte: $electionYear }\n            }\n          ) {\n            year_to\n            year_from\n            political_affiliation {\n              name_zh\n              id\n              camp {\n                name_zh\n              }\n            }\n          }\n        }\n        vote_percentage\n        votes\n        is_won\n      }\n    }\n  }\n`\n\nconst FullWidthBox = styled(Box)`\n  && {\n    padding-top: 4rem;\n    width: 100%;\n  }\n`\n\nconst LowerBackgroundContainer = styled(Box)`\n  && {\n    width: 100vw;\n    position: relative;\n    margin-left: -50vw;\n    left: 50%;\n    background-color: #fafafa;\n  }\n`\n\nconst FlexRowContainer = styled(Box)`\n  && {\n    display: flex;\n    flex-wrap: wrap;\n    align-content: flex-start;\n    ${bps.up('md')} {\n      width: 100%;\n    }\n\n    ${bps.up('lg')} {\n      width: 1440px;\n    }\n    margin: auto;\n  }\n`\n\nconst DistrictCardContainer = styled(Box)`\n  && {\n    padding-left: 30px;\n    margin: 0px;\n    width: 400px;\n    height: 400px;\n\n    ${bps.down('md')} {\n      margin: 10px;\n      width: 100%;\n      padding: 0px;\n    }\n  }\n`\n\nclass DistrictPage extends Component {\n  shouldComponentUpdate(nextProps, nextState) {\n    //  if (this.props.route.path === nextProps.route.path) return false;\n    return true\n  }\n\n  handleCandidateSelected = candidateId => {\n    this.props.history.push(`/profile/${candidateId}`)\n  }\n\n  handleChangeDistrict = (year, code) => {\n    if (!year || !code) return\n    this.props.history.push(`/district/${year}/${code}`)\n  }\n\n  onPrevElection() {\n    const {\n      match: {\n        params: { year, code },\n      },\n    } = this.props\n    this.props.history.push(`/district/${parseInt(year, 10) - 4}/${code}`)\n  }\n\n  onNextElection() {\n    const {\n      match: {\n        params: { year, code },\n      },\n    } = this.props\n    this.props.history.push(`/district/${parseInt(year, 10) + 4}/${code}`)\n  }\n\n  render() {\n    const {\n      match: {\n        params: { year, code },\n      },\n    } = this.props\n\n    // TODO: this should be the election date\n    const electionYear = `${year}-01-01`\n\n    return (\n      <>\n        <FlexRowContainer>\n          <Box\n            width={{ sm: '100%', md: '960px' }}\n            height={{ sm: '300px', md: '400px' }}\n          >\n            <OLMap\n              year={year}\n              code={code}\n              changeDistrict={this.handleChangeDistrict}\n            />\n          </Box>\n          <Query query={GET_DISTRICTS} variables={{ year, code, electionYear }}>\n            {({ loading, error, data }) => {\n              if (loading) return null\n              if (error) return `Error! ${error}`\n              const district = data.dc_constituencies[0]\n              return (\n                <>\n                  <DistrictCardContainer>\n                    <DistrictCard\n                      {...district}\n                      year={parseInt(year, 10)}\n                      code={code}\n                      onNextElection={this.onNextElection.bind(this)}\n                      onPrevElection={this.onPrevElection.bind(this)}\n                    />\n                  </DistrictCardContainer>\n                  <FullWidthBox>\n                    <MainAreas areas={district.main_areas || []} />\n                  </FullWidthBox>\n                  <LowerBackgroundContainer>\n                    <FlexRowContainer>\n                      <FullWidthBox>\n                        <Metrics\n                          year={parseInt(year, 10)}\n                          code={code}\n                          district={district}\n                        ></Metrics>\n                      </FullWidthBox>\n                      <FullWidthBox>\n                        <CandidateList\n                          candidates={district.candidates}\n                          year={parseInt(year, 10)}\n                          code={code}\n                          handleCandidateSelected={this.handleCandidateSelected}\n                        />\n                      </FullWidthBox>\n                    </FlexRowContainer>\n                  </LowerBackgroundContainer>\n                </>\n              )\n            }}\n          </Query>\n        </FlexRowContainer>\n      </>\n    )\n  }\n}\n\nexport default DistrictPage\n","import React, { Component } from 'react'\nimport Box from '@material-ui/core/Box'\nimport OLMap from '../../components/OLMap'\nimport gql from 'graphql-tag'\nimport { Query } from 'react-apollo'\nimport DistrictCard from 'components/district/DistrictCard'\nimport MainAreas from 'components/district/MainAreas'\nimport CandidateList from 'components/district/CandidateList'\nimport Metrics from 'components/district/Metrics'\nimport styled from 'styled-components'\nimport { bps } from 'utils/responsive'\n\nconst GET_DISTRICTS = gql`\n  query($year: Int!, $code: String!, $electionYear: date) {\n    dc_constituencies(where: { year: { _eq: $year }, code: { _eq: $code } }) {\n      name_zh\n      name_en\n      code\n      deviation_percentage\n      expected_population\n      main_areas\n      candidates {\n        candidate_number\n        person {\n          id\n          name_zh\n          name_en\n          political_affiliations(\n            where: {\n              year_from: { _lte: $electionYear }\n              year_to: { _gte: $electionYear }\n            }\n          ) {\n            year_to\n            year_from\n            political_affiliation {\n              name_zh\n              id\n              camp {\n                name_zh\n              }\n            }\n          }\n        }\n        vote_percentage\n        votes\n        is_won\n      }\n    }\n  }\n`\n\nconst FullWidthBox = styled(Box)`\n  && {\n    padding-top: 4rem;\n    width: 100%;\n  }\n`\n\nconst LowerBackgroundContainer = styled(Box)`\n  && {\n    width: 100vw;\n    position: relative;\n    margin-left: -50vw;\n    left: 50%;\n    background-color: #fafafa;\n  }\n`\n\nconst FlexRowContainer = styled(Box)`\n  && {\n    display: flex;\n    flex-wrap: wrap;\n    align-content: flex-start;\n    ${bps.up('md')} {\n      width: 100%;\n    }\n\n    ${bps.up('lg')} {\n      width: 1440px;\n    }\n    margin: auto;\n  }\n`\n\nconst DistrictCardContainer = styled(Box)`\n  && {\n    padding-left: 30px;\n    margin: 0px;\n    width: 400px;\n    height: 400px;\n\n    ${bps.down('md')} {\n      margin: 10px;\n      width: 100%;\n      padding: 0px;\n    }\n  }\n`\n\nclass BattleGroundPage extends Component {\n  shouldComponentUpdate(nextProps, nextState) {\n    //  if (this.props.route.path === nextProps.route.path) return false;\n    return true\n  }\n\n  handleCandidateSelected = candidateId => {\n    this.props.history.push(`/profile/${candidateId}`)\n  }\n\n  handleChangeDistrict = (year, code) => {\n    if (!year || !code) return\n    this.props.history.push(`/district/${year}/${code}`)\n  }\n\n  onPrevElection() {\n    const {\n      match: {\n        params: { year, code },\n      },\n    } = this.props\n    this.props.history.push(`/district/2015/${code}`)\n  }\n\n  onNextElection() {\n    const {\n      match: {\n        params: { year, code },\n      },\n    } = this.props\n    this.props.history.push(`/district/${parseInt(year, 10) + 4}/${code}`)\n  }\n\n  render() {\n    const {\n      match: {\n        params: { year = 2019, code },\n      },\n    } = this.props\n\n    // TODO: this should be the election date\n    const electionYear = `${year}-01-01`\n\n    return (\n      <>\n        <FlexRowContainer>\n          <Box\n            width={{ sm: '100%', md: '960px' }}\n            height={{ sm: '300px', md: '400px' }}\n          >\n            <OLMap\n              year={year}\n              code={code}\n              changeDistrict={this.handleChangeDistrict}\n            />\n          </Box>\n          <Query query={GET_DISTRICTS} variables={{ year, code, electionYear }}>\n            {({ loading, error, data }) => {\n              if (loading) return null\n              if (error) return `Error! ${error}`\n              const district = data.dc_constituencies[0]\n              return (\n                <>\n                  <DistrictCardContainer>\n                    <DistrictCard\n                      {...district}\n                      year={parseInt(year, 10)}\n                      code={code}\n                      onNextElection={this.onNextElection.bind(this)}\n                      onPrevElection={this.onPrevElection.bind(this)}\n                    />\n                  </DistrictCardContainer>\n                  <FullWidthBox>\n                    <MainAreas areas={district.main_areas || []} />\n                  </FullWidthBox>\n                  <LowerBackgroundContainer>\n                    <FlexRowContainer>\n                      <FullWidthBox>\n                        <Metrics\n                          year={year}\n                          code={code}\n                          district={district}\n                        ></Metrics>\n                      </FullWidthBox>\n                      <FullWidthBox>\n                        <CandidateList\n                          candidates={district.candidates}\n                          year={parseInt(year, 10)}\n                          code={code}\n                          handleCandidateSelected={this.handleCandidateSelected}\n                        />\n                      </FullWidthBox>\n                    </FlexRowContainer>\n                  </LowerBackgroundContainer>\n                </>\n              )\n            }}\n          </Query>\n        </FlexRowContainer>\n      </>\n    )\n  }\n}\n\nexport default BattleGroundPage\n","import { createMuiTheme } from '@material-ui/core/styles'\n\nexport const headingFontFamily = 'PingFangTC-Medium, sans-serif'\nexport const bodyFontFamily = 'PT Serif, sans-serif'\n\nexport const fontFamily = [\n  'PingFangTC',\n  'Noto Sans TC',\n  'sans-serif',\n  '-apple-system',\n  '\"Helvetica Neue\"',\n  'Arial',\n]\n\nexport const typography = {\n  useNextVariants: true,\n  fontSize: 16,\n  fontFamily: fontFamily.join(','),\n  h1: {\n    fontFamily: headingFontFamily,\n  },\n  h2: {\n    fontFamily: headingFontFamily,\n    fontSize: 50,\n    fontWeight: 500,\n  },\n  h3: {\n    fontFamily: headingFontFamily,\n    fontSize: 40,\n    fontWeight: 500,\n  },\n  h4: {\n    fontFamily: headingFontFamily,\n    fontSize: 30,\n    fontWeight: 500,\n  },\n  h5: {\n    fontFamily: headingFontFamily,\n    fontSize: 24,\n    fontWeight: 500,\n  },\n  h6: {\n    fontFamily: headingFontFamily,\n    fontSize: 18,\n    fontWeight: 500,\n  },\n  body1: {\n    fontFamily: bodyFontFamily,\n  },\n}\n\nexport default createMuiTheme({\n  typography,\n  palette: {\n    primary: {\n      light: '#ffffff',\n      main: '#000000',\n      dark: '#cccccc',\n    },\n    secondary: {\n      light: '#2c2c2c',\n      main: '#000000',\n      dark: '#000000',\n    },\n    background: {\n      default: '#ffffff',\n    },\n    button: {\n      primary: '#ffd731',\n      secondary: '#ffd731',\n    },\n  },\n})\n","import React, { Component } from 'react'\nimport { withStyles } from '@material-ui/core/styles'\nimport createMuiTheme from '../../ui/theme'\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider'\n\nconst theme = createMuiTheme\n\nconst styles = theme => ({\n  content: {},\n})\n\nclass NotFoundPage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  render() {\n    return (\n      <MuiThemeProvider theme={theme}>\n        TODO - <a href=\"https://notfound.collaction.hk/\">404</a>\n      </MuiThemeProvider>\n    )\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(NotFoundPage)\n","import { createMuiTheme } from '@material-ui/core/styles'\n\nexport const headingFontFamily = 'PingFangTC-Medium, sans-serif'\nexport const bodyFontFamily = 'PT Serif, sans-serif'\n\nexport const fontFamily = [\n  'PingFangTC-Regular',\n  'Noto Sans TC',\n  'sans-serif',\n  '-apple-system',\n  '\"Helvetica Neue\"',\n  'Arial',\n]\n\nexport const typography = {\n  useNextVariants: true,\n  fontSize: 16,\n  fontFamily: fontFamily.join(','),\n  h1: {\n    fontFamily: headingFontFamily,\n  },\n  h2: {\n    fontFamily: headingFontFamily,\n    fontSize: 18,\n    fontWeight: 500,\n  },\n  h3: {\n    fontFamily: headingFontFamily,\n    fontSize: 16,\n    fontWeight: 500,\n  },\n  h4: {\n    fontFamily: fontFamily,\n    fontSize: 16,\n    fontWeight: 500,\n  },\n  h5: {\n    fontFamily: headingFontFamily,\n    fontSize: 14,\n    fontWeight: 500,\n  },\n  h6: {\n    fontFamily: headingFontFamily,\n    fontSize: 12,\n    fontWeight: 500,\n  },\n  body1: {\n    fontFamily: bodyFontFamily,\n  },\n}\n\nexport default createMuiTheme({\n  typography,\n  palette: {\n    primary: {\n      main: '#fff',\n      contrastText: '#000',\n    },\n    secondary: {\n      main: '#3e474f',\n      contrastText: '#fff',\n    },\n    button: {\n      primary: '#ffd731',\n      secondary: '#ffd731',\n    },\n  },\n})\n\nexport const styledComponentTheme = {\n  main: {\n    backgroundColor: 'white',\n    color: 'black',\n  },\n  dark: {\n    backgroundColor: '#3e474f',\n    color: 'white',\n  },\n  secondaryBackgroundColor: '#f2f2f3', // grey\n  subtextColor: '#ffb500', // organe\n}\n","import * as turf from '@turf/turf'\n\nimport dc2003 from '../data/DCCA_2003'\nimport dc2007 from '../data/DCCA_2007'\nimport dc2011 from '../data/DCCA_2011'\nimport dc2015 from '../data/DCCA_2015'\nimport dc2019 from '../data/DCCA_2019'\n\nexport const getAllFeaturesFromPoint = (\n  point,\n  featuresArray = [dc2003, dc2007, dc2011, dc2015, dc2019]\n) => {\n  const pt = turf.point([point.lng, point.lat])\n  const result = featuresArray.map(feature => {\n    let polygonProps = {}\n    for (let i = 0, n = feature.features.length; i < n; i++) {\n      const poly = turf.multiPolygon(feature.features[i].geometry.coordinates)\n      if (turf.booleanPointInPolygon(pt, poly)) {\n        polygonProps = { ...feature.features[i].properties }\n        break\n      }\n    }\n    return {\n      year: feature.name.split('_')[1],\n      ...polygonProps,\n    }\n  })\n  return result\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Autosuggest from 'react-autosuggest'\nimport match from 'autosuggest-highlight/match'\nimport parse from 'autosuggest-highlight/parse'\nimport TextField from '@material-ui/core/TextField'\nimport Paper from '@material-ui/core/Paper'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport { withStyles } from '@material-ui/core/styles'\nimport IconButton from '@material-ui/core/IconButton'\nimport SearchIcon from '@material-ui/icons/Search'\nimport InputAdornment from '@material-ui/core/InputAdornment'\nimport * as AddressParser from 'hk-address-parser-lib'\nimport { getAllFeaturesFromPoint } from '../utils/features'\n\nfunction renderInputComponent(inputProps) {\n  const { classes, inputRef = () => {}, ref, ...other } = inputProps\n\n  return (\n    <>\n      <TextField\n        fullWidth\n        InputProps={{\n          inputRef: node => {\n            ref(node)\n            inputRef(node)\n          },\n          classes: {\n            input: classes.input,\n          },\n          disableUnderline: true,\n          endAdornment: (\n            <InputAdornment position=\"end\">\n              <IconButton className={classes.searchButton} aria-label=\"Search\">\n                <SearchIcon />\n              </IconButton>\n            </InputAdornment>\n          ),\n        }}\n        {...other}\n      />\n    </>\n  )\n}\n\nfunction renderSuggestion(suggestion, { query, isHighlighted }) {\n  const matches = match(suggestion.label, query)\n  const parts = parse(suggestion.label, matches)\n\n  return (\n    <MenuItem selected={isHighlighted} component=\"div\">\n      {parts.map((part, index) =>\n        part.highlight ? (\n          <span key={String(index)} style={{ fontWeight: 500 }}>\n            {part.text}\n          </span>\n        ) : (\n          <strong key={String(index)} style={{ fontWeight: 300 }}>\n            {part.text}\n          </strong>\n        )\n      )}\n    </MenuItem>\n  )\n}\n\nfunction getSuggestionValue(suggestion) {\n  return suggestion.label\n}\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n  },\n  container: {\n    position: 'relative',\n  },\n  suggestionsContainerOpen: {\n    position: 'absolute',\n    zIndex: 1,\n    marginTop: theme.spacing(1),\n    // left: 0,\n    // right: 0,\n  },\n  suggestion: {\n    display: 'block',\n  },\n  suggestionsList: {\n    margin: 0,\n    padding: 0,\n    listStyleType: 'none',\n  },\n  suggestInput: {\n    height: '60px',\n    borderRadius: '4px',\n    boxShadow: '0 2px 16px 0 rgba(0, 0, 0, 0.1)',\n    backgroundColor: '#ffffff',\n    padding: '10px 20px',\n  },\n  input: {\n    textDecoration: 'none',\n  },\n  searchButton: {\n    color: '#ffd731',\n  },\n})\n\nclass IntegrationAutosuggest extends React.Component {\n  state = {\n    value: '',\n    suggestions: [],\n  }\n\n  async getSuggestions(value) {\n    const inputValue = value.trim().toLowerCase()\n    const inputLength = inputValue.length\n\n    if (inputLength > 0) {\n      const records = await AddressParser.parse(inputValue)\n      const result = records\n        .filter((_, index) => index < 10)\n        .map(record => ({\n          coordinate: record.coordinate(),\n          label: record.fullAddress(AddressParser.Address.LANG_ZH),\n        }))\n\n      return result\n    }\n\n    return []\n  }\n\n  handleSuggestionsFetchRequested = ({ value }) => {\n    this.getSuggestions(value).then(result => {\n      this.setState({\n        suggestions: result,\n      })\n    })\n  }\n\n  handleSuggestionsClearRequested = () => {\n    this.setState({\n      suggestions: [],\n    })\n  }\n\n  handleChange = name => (event, { newValue }) => {\n    this.setState({\n      [name]: newValue,\n    })\n  }\n\n  handleSuggestionSelected = (\n    event,\n    { suggestion, suggestionValue, suggestionIndex, sectionIndex, method }\n  ) => {\n    this.props.handleAddressSelected(\n      getAllFeaturesFromPoint(suggestion.coordinate)\n    )\n  }\n\n  render() {\n    const { classes } = this.props\n\n    const autosuggestProps = {\n      renderInputComponent,\n      suggestions: this.state.suggestions,\n      onSuggestionsFetchRequested: this.handleSuggestionsFetchRequested,\n      onSuggestionsClearRequested: this.handleSuggestionsClearRequested,\n      onSuggestionSelected: this.handleSuggestionSelected,\n      getSuggestionValue,\n      renderSuggestion,\n    }\n\n    return (\n      <div className={classes.root}>\n        <Autosuggest\n          {...autosuggestProps}\n          inputProps={{\n            classes,\n            placeholder: '尋找選區...',\n            value: this.state.value,\n            onChange: this.handleChange('value'),\n            inputRef: node => {\n              this.popperNode = node\n            },\n            InputLabelProps: {\n              shrink: true,\n            },\n          }}\n          theme={{\n            suggestionsList: classes.suggestionsList,\n            suggestion: classes.suggestion,\n            input: classes.suggestInput,\n          }}\n          renderSuggestionsContainer={options => (\n            <Paper\n              square\n              {...options.containerProps}\n              style={{\n                width: '100%',\n              }}\n            >\n              {options.children}\n            </Paper>\n          )}\n        />\n      </div>\n    )\n  }\n}\n\nIntegrationAutosuggest.propTypes = {\n  classes: PropTypes.object.isRequired,\n}\n\nexport default withStyles(styles)(IntegrationAutosuggest)\n","export const DRAWER_OPEN = 'drawer_open'\nexport const DRAWER_CLOSE = 'drawer_close'\n\nexport default (state, action) => {\n  switch (action.type) {\n    case DRAWER_OPEN:\n      return { open: true }\n    default:\n      return { open: false }\n  }\n}\n","import React from 'react'\nimport drawerReducer from 'reducers/drawer'\n\nexport const drawerInitialState = {\n  open: false,\n}\n\nconst ContextStore = React.createContext({\n  drawer: drawerInitialState,\n})\n\nexport const ContextStoreProvider = props => {\n  const [drawerState, drawerDispatch] = React.useReducer(\n    drawerReducer,\n    drawerInitialState\n  )\n\n  return (\n    <ContextStore.Provider\n      value={{\n        drawer: {\n          state: drawerState,\n          dispatch: drawerDispatch,\n        },\n      }}\n      {...props}\n    />\n  )\n}\n\nexport default ContextStore\n","import React, { useState } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport area from '../../data/area'\nimport district from '../../data/district'\nimport Button from '@material-ui/core/Button'\nimport { NavLink } from 'react-router-dom'\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel'\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary'\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails'\nimport { DRAWER_CLOSE } from 'reducers/drawer'\nimport ContextStore from 'ContextStore'\nimport { withRouter } from 'react-router-dom'\n\nconst Container = styled.div`\n  && {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n`\n\nconst SideBar = styled(Box)`\n  && {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    min-width: 200px;\n    max-width: 200px;\n  }\n`\n\nconst DistrictContainer = styled(Button)`\n  && {\n    width: 120px;\n    justify-content: left;\n  }\n`\n\nconst DistrictSelector = props => {\n  const {\n    drawer: { dispatch },\n  } = React.useContext(ContextStore)\n  const renderDCCA = code => {\n    if (!code) return null\n    return (\n      <div>\n        {Object.keys(district['2019'][code]).map(dcca => {\n          return (\n            <DistrictContainer\n              key={district['2019'][code][dcca].code}\n              onClick={() => {\n                dispatch({ type: DRAWER_CLOSE })\n                props.history.push(`/district/2019/${dcca}`)\n              }}\n              color=\"secondary\"\n            >\n              <Typography variant=\"h6\">\n                {district['2019'][code][dcca].name}\n              </Typography>\n            </DistrictContainer>\n          )\n        })}\n      </div>\n    )\n  }\n\n  return (\n    <Container>\n      {area.map(a => (\n        <ExpansionPanel key={a.dccode}>\n          <ExpansionPanelSummary\n            aria-controls=\"panel1a-content\"\n            id=\"panel1a-header\"\n          >\n            <Typography>{a.dname_chi}</Typography>\n          </ExpansionPanelSummary>\n          <ExpansionPanelDetails>{renderDCCA(a.dccode)}</ExpansionPanelDetails>\n        </ExpansionPanel>\n      ))}\n    </Container>\n  )\n}\n\nexport default withRouter(DistrictSelector)\n","import React, { useReducer } from 'react'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport AddressSearcher from '../../components/AddressSearcher'\nimport DistrictSelector from 'components/search/DistrictSelector'\nimport * as AddressParser from 'hk-address-parser-lib'\nimport IconButton from '@material-ui/core/IconButton'\nimport CloseIcon from '@material-ui/icons/Close'\nimport Button from '@material-ui/core/Button'\nimport Typography from '@material-ui/core/Typography'\nimport Divider from '@material-ui/core/Divider'\nimport { withRouter } from 'react-router-dom'\nimport ContextStore from 'ContextStore'\nimport { DRAWER_CLOSE } from 'reducers/drawer'\n\nconst StyledDivier = styled(Divider)`\n  && {\n    background-color: #ececec;\n    width: 100%;\n  }\n`\n\nconst Container = styled(Box)`\n  && {\n    width: 100%;\n  }\n`\n\nconst ExpandedRow = styled(Box)`\n  && {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n    flex-grow: 1;\n  }\n`\n\nconst ContentRowContainer = styled(ExpandedRow)`\n  && {\n    flex-flow: column;\n  }\n`\n\nconst ContentContainer = styled(Box)`\n  && {\n    width: 100%;\n    justify-content: center;\n  }\n`\n\nconst AddressSearchContainer = styled(Box)`\n  && {\n    width: 100%;\n    padding: 21px 16px 21px 16px;\n    background-color: ${props => props.theme.secondaryBackgroundColor};\n  }\n`\n\nconst TabContainer = styled(Box)`\n  && {\n    display: flex;\n    width: 100%;\n    justify-content: center;\n  }\n`\n\nconst TabButton = styled(Button)`\n  && {\n    margin: 10px 10px 0px 10px;\n    padding-bottom: 15px;\n\n    color: ${props =>\n      props.active === 'active'\n        ? props.theme.subtextColor\n        : props.theme.main.color};\n    border-bottom: ${props =>\n      props.active === 'active'\n        ? `1px solid ${props.theme.subtextColor}`\n        : 'none'};\n  }\n`\n\nconst NavBarButton = styled(IconButton)`\n  && {\n    position: fixed;\n    top: 0px;\n    right: 0px;\n  }\n`\n\nfunction SearchDrawer(props) {\n  const {\n    drawer: { dispatch },\n  } = React.useContext(ContextStore)\n  const [selectedTab, setSelectedTab] = React.useState(\n    props.selectedTab || 'district'\n  )\n\n  // async function onAddressFieldChanged(evt) {\n  //   const { value } = evt.target\n  //   const records = await AddressParser.parse(value)\n  //   this.setState({\n  //     autoCompleteList: records,\n  //   })\n  // }\n\n  // function handlePeopleSelected(result) {\n  //   props.history.push(`profile/${result.id}`)\n  // }\n\n  function handleAddressSelected(result) {\n    if (!result) return\n\n    const lastest = result.pop()\n\n    /* TODO: \n      Use context (?) to store the Global district result array\n      When user select click previous button in district page, \n      the CACODE should follow follow the above result\n    */\n\n    props.history.push(`/district/${lastest.year}/${lastest.CACODE}`)\n\n    props.onDrawerClose()\n  }\n\n  function onTabSelected(tab) {\n    return () => {\n      setSelectedTab(tab)\n    }\n  }\n\n  function renderSearchDistrict() {\n    return (\n      <ContentRowContainer>\n        <AddressSearchContainer>\n          <AddressSearcher handleAddressSelected={handleAddressSelected} />\n        </AddressSearchContainer>\n        <DistrictSelector />\n      </ContentRowContainer>\n    )\n  }\n\n  function renderSearchPeople() {\n    return (\n      <ContentRowContainer>\n        <AddressSearchContainer>\n          <AddressSearcher handleAddressSelected={handleAddressSelected} />\n        </AddressSearchContainer>\n        <ContentContainer>\n          <DistrictSelector />\n        </ContentContainer>\n      </ContentRowContainer>\n    )\n  }\n\n  return (\n    <Container>\n      <NavBarButton\n        color=\"inherit\"\n        component=\"span\"\n        aria-label=\"Menu\"\n        onClick={() => {\n          dispatch({ type: DRAWER_CLOSE })\n        }}\n      >\n        <CloseIcon fontSize=\"small\" />\n      </NavBarButton>\n      <TabContainer>\n        <TabButton\n          active={selectedTab === 'district' ? 'active' : 'inactive'}\n          onClick={onTabSelected('district')}\n        >\n          <Typography variant=\"h3\">找選區</Typography>\n        </TabButton>\n        <TabButton\n          active={selectedTab === 'people' ? 'active' : 'inactive'}\n          onClick={onTabSelected('people')}\n        >\n          <Typography variant=\"h3\">找候選人</Typography>\n        </TabButton>\n      </TabContainer>\n      <StyledDivier />\n      {selectedTab === 'district'\n        ? renderSearchDistrict()\n        : renderSearchPeople()}\n    </Container>\n  )\n}\n\nexport default withRouter(SearchDrawer)\n","import React from 'react'\nimport AppBar from '@material-ui/core/AppBar'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport IconButton from '@material-ui/core/IconButton'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport SearchIcon from '@material-ui/icons/Search'\nimport styled from 'styled-components'\nimport Typography from '@material-ui/core/Typography'\nimport Box from '@material-ui/core/Box'\nimport Slide from '@material-ui/core/Slide'\nimport { DRAWER_OPEN } from '../../reducers/drawer'\nimport ContextStore from 'ContextStore'\n\nconst StyledAppBar = styled(AppBar)`\n  && {\n    width: 100%;\n    box-shadow: none;\n  }\n`\n\nconst StyledToolbar = styled(Toolbar)`\n  && {\n    display: flex;\n  }\n`\n\nconst AppBarTitle = styled(Typography)`\n  && {\n    flex-grow: 1;\n    text-decoration: none;\n    text-align: center;\n  }\n`\n\nconst Container = styled(Box)`\n  && {\n    margin-bottom: 16px;\n  }\n`\n\nconst Transition = React.forwardRef((props, ref) => (\n  <Slide direction=\"left\" ref={ref} {...props} />\n))\nTransition.displayName = 'Transition'\n\nfunction MobileAppBar(props) {\n  const {\n    drawer: { dispatch },\n  } = React.useContext(ContextStore)\n\n  return (\n    <>\n      <StyledAppBar position=\"sticky\" color=\"secondary\">\n        <Container>\n          <StyledToolbar disableGutters>\n            <IconButton\n              color=\"inherit\"\n              component=\"span\"\n              aria-label=\"Search\"\n              onClick={() => dispatch({ type: DRAWER_OPEN })}\n            >\n              <SearchIcon fontSize=\"small\" />\n            </IconButton>\n            <AppBarTitle variant=\"h4\">Vote for Hong Kong</AppBarTitle>\n            <IconButton\n              color=\"inherit\"\n              component=\"span\"\n              aria-label=\"Menu\"\n              onClick={() => dispatch({ type: DRAWER_OPEN })}\n            >\n              <MenuIcon fontSize=\"small\" />\n            </IconButton>\n          </StyledToolbar>\n          <AppBarTitle variant=\"h2\">了解香港議會，投出合適一票</AppBarTitle>\n        </Container>\n      </StyledAppBar>\n    </>\n  )\n}\n\nexport default MobileAppBar\n","import React, { useReducer } from 'react'\nimport { Route, Switch } from 'react-router-dom'\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider'\nimport { ThemeProvider } from 'styled-components/'\nimport SearchPage from './pages/search'\nimport ProfilePage from './pages/profile'\nimport DistrictPage from './pages/district'\nimport BattleGroundPage from './pages/battleground'\nimport NotfoundPage from './pages/notfound'\nimport ApolloClient from 'apollo-boost'\nimport { ApolloProvider } from 'react-apollo'\nimport theme, { styledComponentTheme } from 'ui/theme/main'\nimport './App.css'\nimport Box from '@material-ui/core/Box'\nimport styled from 'styled-components'\nimport SearchDrawer from 'components/search/SearchDrawer'\nimport Drawer from '@material-ui/core/Drawer'\nimport MobileAppBar from './components/atom/MobileAppBar'\nimport { makeStyles } from '@material-ui/core/styles'\nimport drawerReducer from 'reducers/drawer'\nimport ContextStore, { drawerInitialState } from 'ContextStore'\n\nconst client = new ApolloClient({\n  uri: 'https://gql.opencultures.life/graphql',\n})\n\nconst useStyles = makeStyles({\n  paper: {\n    width: '100%',\n  },\n})\n\nconst ContentContainer = styled(Box)`\n  && {\n    display: flex;\n    flex-direction: column;\n  }\n`\n\nconst Root = styled(Box)`\n  && {\n    display: flex;\n    max-width: 600px;\n    margin: auto;\n    overflow: hidden;\n  }\n`\n\nconst App = props => {\n  const [drawerState, drawerDispatch] = React.useReducer(\n    drawerReducer,\n    drawerInitialState\n  )\n\n  const classes = useStyles()\n\n  return (\n    <ApolloProvider client={client}>\n      <ThemeProvider theme={styledComponentTheme}>\n        <MuiThemeProvider theme={theme}>\n          <ContextStore.Provider\n            value={{\n              drawer: {\n                state: drawerState,\n                dispatch: drawerDispatch,\n              },\n            }}\n          >\n            <Root>\n              <ContentContainer>\n                <CssBaseline />\n                <MobileAppBar />\n                <main>\n                  <Switch>\n                    <Route exact path=\"/\" component={SearchPage} />\n                    <Route path=\"/profile/:id\" component={ProfilePage} />\n                    <Route\n                      path=\"/district/2019/:code\"\n                      component={BattleGroundPage}\n                    />\n                    <Route\n                      path=\"/district/:year/:code\"\n                      component={DistrictPage}\n                    />\n                    <Route component={NotfoundPage} />\n                  </Switch>\n                </main>\n              </ContentContainer>\n              <Drawer\n                anchor=\"right\"\n                open={drawerState.open}\n                variant=\"persistent\"\n                classes={{\n                  paper: classes.paper,\n                }}\n              >\n                <SearchDrawer />\n              </Drawer>\n            </Root>\n          </ContextStore.Provider>\n        </MuiThemeProvider>\n      </ThemeProvider>\n    </ApolloProvider>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { HashRouter as Router } from 'react-router-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <Router>\n    <App />\n  </Router>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}