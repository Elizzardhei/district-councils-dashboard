{"version":3,"sources":["layout/NavBar.js","ui/theme/index.js","utils/features.js","components/MapboxMap.js","components/InfoCard.js","pages/map/index.js","App.js","index.js"],"names":["NavBar","classes","this","props","react_default","a","createElement","AppBar_default","position","className","appBar","Toolbar_default","Typography_default","variant","color","noWrap","Component","withStyles","theme","zIndex","drawer","withTheme","createMuiTheme","palette","primary","main","secondary","themeName","typography","useNextVariants","fontFamily","getAllFeaturesFromPoint","point","featuresArray","pt","turf","lng","lat","map","feature","polygonProps","i","n","features","length","poly","geometry","coordinates","Object","objectSpread","properties","year","name","split","MapboxMap","_this","_this$props","token","center","zoom","minZoom","styleID","mapLayers","onMapClicked","selectedDCCA","onMapPanned","mapConfig","container","style","concat","mapboxgl","accessToken","Map","on","getStyle","hoveredStateId","clickedStateId","forEach","layer","index","addSource","type","data","generateId","addLayer","id","source","layout","visibility","checked","paint","line-color","line-width","fill-color","fill-opacity","e","setFeatureState","hover","highlight","bounds","coords","latitude","longitude","j","xMin","xMax","yMin","yMax","getBoundingBox","LngLatBounds","LngLat","fitBounds","padding","maxZoom","_this$map$getCenter","getCenter","toFixed","getZoom","prevProps","_this2","getLayer","setLayoutProperty","console","log","top","bottom","width","height","candiNumMapping","1","2","3","4","5","6","7","8","9","10","card","left","pos","marginBottom","electors","cacode","yearIndex","findIndex","o","parseInt","result","election","find","Fragment","Card_default","CardContent_default","cname","ename","List_default","candidates","candi","ListItem_default","alignItems","key","number","ListItemAvatar_default","Avatar_default","Person_default","ListItemText_default","cName","eName","vote","win","ListItemSecondaryAction_default","Star_default","LONG","LAT","ZOOM","STYLE_ID","MapPage","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","setState","lastClick","lngLat","state","dccaList","onYearBtnClicked","idx","dcca","toConsumableArray","dc2003","dc2007","dc2011","dc2015","dc2019","open","_this$state","_this$state$map","currentFeature","currentYear","MuiThemeProvider_default","CssBaseline_default","content","toolbar","components_MapboxMap","showPopUp","InfoCard","CACODE","yearButton","Button_default","onClick","backgroundColor","d","button","flexGrow","mixins","App","react_router_dom","root","layout_NavBar","react_router","exact","path","component","mapPage","display","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.8f36539a.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { withStyles } from '@material-ui/core/styles'\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\n\nconst styles = theme => ({\n    appBar: {\n      zIndex: theme.zIndex.drawer + 1,\n    }\n})\n\nclass NavBar extends Component {\n    render() {\n        const { classes } = this.props\n        return (\n            <AppBar position=\"fixed\" className={classes.appBar}>\n            <Toolbar>\n              <Typography variant=\"h6\" color=\"inherit\" noWrap>\n              District Council Dashboard\n              </Typography>\n              {/* <Link to=\"/map\"><Button color=\"inherit\">地圖（2003-2019）</Button></Link> */}\n              {/* <Link to=\"/table\"><Button color=\"inherit\">原始資料</Button></Link> */}\n            </Toolbar>\n          </AppBar>\n        )\n    }\n}\n\nexport default withStyles(styles, { withTheme: true })(NavBar)","import { createMuiTheme } from '@material-ui/core/styles';\n\nconst palette = {\n  primary: { main: '#FF8F00' },\n  secondary: { main: '#00E676' }\n};\nconst themeName = 'Pizazz Spring Green Falcon';\n\nconst typography =  {\n  useNextVariants: true,\n  fontFamily: \"'Noto Sans TC', sans-serif\"\n}\n\nexport default createMuiTheme({ palette, themeName, typography });\n","import * as turf from '@turf/turf'\n\nexport const getAllFeaturesFromPoint = (point, featuresArray) => {\n    const pt = turf.point([point.lng, point.lat])\n    const result = featuresArray.map(feature => {\n        let polygonProps = {}\n        for (let i= 0, n = feature.features.length; i < n; i++) {\n            const poly = turf.multiPolygon(feature.features[i].geometry.coordinates)\n            if (turf.booleanPointInPolygon(pt, poly)) {\n                polygonProps = {...feature.features[i].properties}\n                break\n            }\n        }\n        return {\n            year: feature.name.split('_')[1],\n            ...polygonProps\n        }\n    })\n    return result\n}\n\n\nexport const getBoundingBox = data => {\n    var bounds = {}, coords, point, latitude, longitude;\n  \n    // We want to use the “features” key of the FeatureCollection (see above)\n    // data = data.features;\n  \n    // Loop through each “feature”\n    // for (var i = 0; i < data.length; i++) {\n  \n      // Pull out the coordinates of this feature\n      coords = data.geometry.coordinates[0];\n  \n      // For each individual coordinate in this feature's coordinates…\n      for (var j = 0; j < coords.length; j++) {\n  \n        longitude = coords[j][0];\n        latitude = coords[j][1];\n  \n        // Update the bounds recursively by comparing the current\n        // xMin/xMax and yMin/yMax with the coordinate\n        // we're currently checking\n        bounds.xMin = bounds.xMin < longitude ? bounds.xMin : longitude;\n        bounds.xMax = bounds.xMax > longitude ? bounds.xMax : longitude;\n        bounds.yMin = bounds.yMin < latitude ? bounds.yMin : latitude;\n        bounds.yMax = bounds.yMax > latitude ? bounds.yMax : latitude;\n      }\n  \n    // }\n  \n    // Returns an object that contains the bounds of this GeoJSON\n    // data. The keys of this object describe a box formed by the\n    // northwest (xMin, yMin) and southeast (xMax, yMax) coordinates.\n    return bounds;\n  }","import React, { Component } from 'react'\nimport mapboxgl from 'mapbox-gl'\nimport { getBoundingBox } from '../utils/features'\n\nclass MapboxMap extends Component {\n    componentDidMount() {\n        // set map properties\n        const { token, center, zoom, minZoom, styleID, mapLayers, selectedDCCA, onMapClicked, onMapPanned, color } = this.props\n\n        const mapConfig = {\n            container: 'map',\n            style: `mapbox://styles/${styleID}`,\n            center: center,\n            zoom: zoom,\n            minZoom: minZoom\n        }\n\n        mapboxgl.accessToken = token\n        this.map = new mapboxgl.Map(mapConfig)\n\n        this.map.on('load', () => {\n            // Get the map style and set it in the state tree\n            const style = this.map.getStyle()\n            //   this.props.setStyle(style)\n\n            \n            let hoveredStateId = null\n            let clickedStateId = null\n\n            mapLayers.forEach((layer, index) => {\n                this.map.addSource(layer.name, {\n                    type: 'geojson',\n                    data: layer,\n                    generateId: true\n                    // When enabled, the feature.id property will be auto assigned based on its index in the features array, over-writing any previous values.\n                })\n\n                this.map.addLayer({\n                    id: `${layer.name}-lines`,\n                    type: 'line',\n                    source: layer.name,\n                    layout: {\n                        'visibility': layer.checked ? 'visible': 'none'\n                    },\n                    paint: {\n                        'line-color': color[index],\n                        'line-width': 2\n                    }\n                })\n\n                this.map.addLayer({\n                    id: `${layer.name}-hovers`,\n                    type: 'fill',\n                    source: layer.name,\n                    layout: {\n                        'visibility': layer.checked ? 'visible': 'none'\n                    },\n                    paint: {\n                        \"fill-color\": \"#000\",\n                        \"fill-opacity\": [\"case\",\n                            [\"boolean\", [\"feature-state\", \"hover\"], false],\n                            0.1,\n                            0\n                        ]\n                    }\n                })\n\n                this.map.addLayer({\n                    id: `${layer.name}-highlight`,\n                    type: 'fill',\n                    source: layer.name,\n                    layout: {\n                        'visibility': layer.checked ? 'visible': 'none'\n                    },\n                    paint: {\n                        \"fill-color\": color[index],\n                        \"fill-opacity\": [\"case\",\n                            [\"boolean\", [\"feature-state\", \"highlight\"], false],\n                            0.3,\n                            0\n                        ]\n                    }\n                })\n\n                // When the user moves their mouse over the state-fill layer, we'll update the\n                // feature state for the feature under the mouse.\n                this.map.on(\"mousemove\", `${layer.name}-hovers`, function (e) {\n                    if (e.features.length > 0) {\n                        if (hoveredStateId) {\n                            this.setFeatureState({ source: layer.name, id: hoveredStateId }, { hover: false })\n                        }\n                        hoveredStateId = e.features[0].id\n                        this.setFeatureState({ source: layer.name, id: hoveredStateId }, { hover: true })\n                    }\n                })\n\n                // When the mouse leaves the state-fill layer, update the feature state of the\n                // previously hovered feature.\n                this.map.on(\"mouseleave\", `${layer.name}-hovers`, function () {\n                    if (hoveredStateId) {\n                        this.setFeatureState({ source: layer.name, id: hoveredStateId }, { hover: false })\n                    }\n                    hoveredStateId = null\n                })\n\n                this.map.on(\"click\", `${layer.name}-highlight`, function (e) {\n\n                    if (clickedStateId) {\n                        this.setFeatureState({ source: layer.name, id: clickedStateId }, { highlight: false })\n                        clickedStateId = null\n                    }\n                    clickedStateId = e.features[0].id\n                    this.setFeatureState({ source: layer.name, id: clickedStateId }, { highlight: true })\n    \n                    \n                    let bounds = getBoundingBox(e.features[0])\n    \n                    bounds = new mapboxgl.LngLatBounds(new mapboxgl.LngLat(bounds.xMin, bounds.yMin), new mapboxgl.LngLat(bounds.xMax, bounds.yMax))\n    \n                    this.fitBounds(bounds, {\n                        padding: 50,\n                        maxZoom: 13.5\n                    })\n    \n                })\n\n            })\n\n            this.map.on('click', e => {\n                onMapClicked(e)\n            })\n\n            this.map.on('move', () => {\n                const { lng, lat } = this.map.getCenter()\n                onMapPanned(lng.toFixed(4), lat.toFixed(4), this.map.getZoom().toFixed(2))\n            })\n\n\n\n        })\n\n    }\n\n    componentDidUpdate(prevProps) {\n        if (this.props.mapLayers !== prevProps.mapLayers) {\n\n            const status = this.props.mapLayers.map(layer => {\n                return {\n                    name: layer.name,\n                    visibility: layer.checked ? 'visible' : 'none'\n                }\n            })\n\n            status.forEach(layer => {\n                if (this.map.getLayer(`${layer.name}-lines`)) {\n                    this.map.setLayoutProperty(`${layer.name}-lines`, 'visibility', layer.visibility)\n                    this.map.setLayoutProperty(`${layer.name}-hovers`, 'visibility', layer.visibility)\n                    this.map.setLayoutProperty(`${layer.name}-highlight`, 'visibility', layer.visibility)\n                }\n            })\n        }\n\n        if (this.props.selectedDCCA !== prevProps.selectedDCCA) {\n            console.log(this.props.selectedDCCA)\n        }\n    }\n\n    render() {\n        return (\n            <div id='map'\n                style={{\n                    position: 'absolute',\n                    top: 0,\n                    bottom: 0,\n                    width: '100%',\n                    height: '100%',\n                }}\n            ></div>\n        )\n    }\n}\n\nexport default MapboxMap","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { withStyles } from '@material-ui/core/styles'\nimport Card from '@material-ui/core/Card'\nimport CardContent from '@material-ui/core/CardContent'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\nimport Avatar from '@material-ui/core/Avatar'\nimport Button from '@material-ui/core/Button'\nimport PersonIcon from '@material-ui/icons/Person'\nimport StarIcon from '@material-ui/icons/Star'\nimport Typography from '@material-ui/core/Typography'\n\nconst styles = {\n    card: {    \n        width: '400px',\n        position: 'absolute',\n        top: '15%',\n        left: '100px'\n    },\n    pos: {\n        marginBottom: 12,\n    },\n}\n\n\nconst candiNumMapping = {\n        1: '①',\n        2: '②',\n        3: '③',\n        4: '④',\n        5: '⑤',\n        6: '⑥',\n        7: '⑦',\n        8: '⑧',\n        9: '⑨',\n        10: '⑩'\n}\n\nconst SimpleCard = props => {\n    const { classes, electors, year, cacode } = props\n\n    const yearIndex = electors.findIndex(o => o.year === parseInt(year))\n\n    const result = yearIndex > -1 ? electors[yearIndex].election.find(e => e.cacode === cacode) : false\n    \n    return (\n        <React.Fragment>\n            {result && <Card className={classes.card}>\n                <CardContent>\n                    <Typography variant=\"subtitle1\" color=\"textSecondary\" >\n                        {year}\n                    </Typography>\n                    <Typography variant=\"h6\">\n                        {result.cacode} {result.cname}\n                    </Typography>\n                    <Typography variant=\"subtitle2\">\n                        {result.ename}\n                    </Typography>\n                    <List>\n                    {\n                        result.candidates.map(candi => <ListItem alignItems=\"flex-start\" key={`${candi.number}`}>\n                            <ListItemAvatar>\n                                <Avatar>\n                                    <PersonIcon />\n                                </Avatar>\n                            </ListItemAvatar>\n                            <ListItemText\n                                primary={`${candi.number > 0 ? candiNumMapping[candi.number] : ''} ${candi.cName} ${candi.eName}`}\n                                secondary={candi.vote > 0 ? `${candi.vote}票` : '自動當選'}\n                            />\n                            {candi.win &&\n                            <ListItemSecondaryAction>\n                                <StarIcon color=\"secondary\" />\n                            </ListItemSecondaryAction>}\n                        </ListItem>)\n\n                    }\n                </List>\n                </CardContent>\n            </Card>}\n        </React.Fragment>\n    )\n}\n\nSimpleCard.propTypes = {\n    classes: PropTypes.object.isRequired,\n}\n\nexport default withStyles(styles)(SimpleCard)","import React, { Component } from 'react'\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport List from '@material-ui/core/List'\nimport Typography from '@material-ui/core/Typography'\nimport ListItem from '@material-ui/core/ListItem'\nimport { withStyles } from '@material-ui/core/styles'\nimport NavBar from '../../layout/NavBar'\nimport MapboxMap from '../../components/MapboxMap'\nimport InfoCard from '../../components/InfoCard'\nimport createMuiTheme from '../../ui/theme'\nimport { getAllFeaturesFromPoint } from '../../utils/features'\nimport Button from '@material-ui/core/Button'\n\nimport dc2003 from '../../data/DCCA_2003'\nimport dc2007 from '../../data/DCCA_2007'\nimport dc2011 from '../../data/DCCA_2011'\nimport dc2015 from '../../data/DCCA_2015'\nimport dc2019 from '../../data/DCCA_2019'\nimport electors from '../../data/electors'\n\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider'\n\nconst theme = createMuiTheme\n\nconst styles = theme => ({\n  content: {\n    flexGrow: 1\n  },\n  toolbar: theme.mixins.toolbar,\n  yearButton: {\n    position: 'absolute',\n    width: 100,\n    top: '15%'\n  }\n})\n\nconst TOKEN = 'pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4M29iazA2Z2gycXA4N2pmbDZmangifQ.-g_vE53SD2WrJ6tFX7QHmA'\nconst LONG = 114.2029\nconst LAT = 22.3844\nconst ZOOM = 11\nconst STYLE_ID = 'mapbox/streets-v9'\nconst MIN_ZOOM = 10\n\nconst color = [\n  '#6e40e6',\n  '#f49600',\n  '#ff5d55',\n  '#005ecd',\n  '#ad0000'\n]\n\nclass MapPage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      dccaList: [dc2003, dc2007, dc2011, dc2015, dc2019],\n      open: false,\n      map: {\n        center: [LONG, LAT],\n        zoom: ZOOM,\n        styleID: STYLE_ID,\n        lastClick: null\n      },\n      selectedDCCA: null\n    }\n  }\n\n  componentDidMount() {\n    this.onYearBtnClicked('DCCA_2011')\n    this.onYearBtnClicked('DCCA_2015')\n  }\n\n  onMapPanned = (lng, lat, zoom) => {\n    this.setState({\n      map: {\n        center: [lng, lat],\n        zoom,\n      }\n    })\n  }\n\n  onMapClicked = (e) => {\n    this.setState({\n      map: {\n        lastClick : [e.lngLat.lng, e.lngLat.lat]\n      },\n      selectedDCCA: getAllFeaturesFromPoint(e.lngLat, this.state.dccaList)\n    })\n  }\n\n  onYearBtnClicked = (name) => {\n    const idx = this.state.dccaList.findIndex(dcca => dcca.name === name)\n    let dccaList = [...this.state.dccaList]\n    dccaList.forEach(dcca => {dcca.checked = false})\n    dccaList[idx].checked = true\n    this.setState({ dccaList })\n  }\n\n  render() {\n    const { map: {center, zoom, lastClick}, selectedDCCA, dccaList } = this.state\n    const { classes, map } = this.props\n\n    const currentFeature = dccaList.length > 0 ? dccaList.find(dcca => dcca.checked) : null\n    const currentYear = currentFeature ? currentFeature.name.split('_')[1] : null\n    return (\n      <MuiThemeProvider theme={theme}>\n        <CssBaseline />\n        <main className={classes.content}>\n          <div className={classes.toolbar} />\n          {dccaList &&\n            <MapboxMap\n              mapLayers={dccaList}\n              token={TOKEN}\n              center={center}\n              zoom={zoom}\n              showPopUp={true}\n              styleID={STYLE_ID}\n              minZoom={MIN_ZOOM}\n              color={color}\n              onMapClicked={this.onMapClicked}\n              onMapPanned={this.onMapPanned}\n              selectedDCCA={selectedDCCA}\n            />}\n            <InfoCard \n            electors={electors}\n            year={currentYear}\n            cacode={currentYear && selectedDCCA && selectedDCCA.find(feature => feature.year === currentYear).CACODE}\n            />\n            <div className={classes.yearButton}>\n              <List>\n                {dccaList.map((dcca, index) => <ListItem key={`${dcca.name}`}>\n                  <Button\n                    onClick={() => this.onYearBtnClicked(dcca.name)}\n                    key={dcca.name} variant=\"contained\"\n                    style={{\n                      backgroundColor: dccaList.findIndex(d => d.name === dcca.name && d.checked === true) > -1 ? color[index] : '#e0e0e0'\n                    }}\n                    className={classes.button}>\n                    {dcca.name.split('_')[1]}\n                  </Button>\n                </ListItem>)}\n              </List>\n            </div>\n        </main>\n      </MuiThemeProvider>\n    )\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(MapPage)","import React, { Component } from 'react'\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport { withStyles } from '@material-ui/core/styles'\nimport NavBar from './layout/NavBar'\nimport createMuiTheme from './ui/theme'\nimport { BrowserRouter as Router, Route } from \"react-router-dom\"\nimport mapPage from './pages/map'\n\nimport './App.css'\n\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider'\n\nconst theme = createMuiTheme\n\nconst styles = theme => ({\n  root: {\n    display: 'flex',\n  }\n})\nclass App extends Component {\n  constructor(props) {\n    super(props)\n  }\n\n  render() {\n    const { classes } = this.props\n    return (\n      <Router>\n        <MuiThemeProvider theme={theme}>\n          <div className={classes.root}>\n            <CssBaseline />\n            <NavBar />\n            <Route exact path=\"/\" component={mapPage} />\n            <Route exact path=\"/map\" component={mapPage} />\n          </div>\n        </MuiThemeProvider>\n      </Router>\n    )\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(App)","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n      <App />,\n    document.getElementById('root')\n)\n\n\n"],"sourceRoot":""}