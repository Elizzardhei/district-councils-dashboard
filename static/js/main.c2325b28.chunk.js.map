{"version":3,"sources":["../node_modules/encoding/lib sync","constants/dcregion.js","components/charts/StackedNormalizedHorizontalBarChart.js","components/CampCompareChartContainer.js","components/atoms/Text.js","pages/index.js","utils/features.js","pages/search/AddressSearcher.js","reducers/drawer.js","ContextStore.js","pages/search/DistrictSelector.js","pages/search/index.js","components/molecules/ScrollableTabs.js","ui/responsive.js","pages/profile/index.js","components/OLMap.js","components/district/DistrictCard.js","components/district/MainAreas.js","components/BorderLinearProgress.js","components/district/CandidateList.js","components/district/VoterTurnoutChart.js","components/charts/WaffleChart.js","components/district/Metrics.js","queries/gql.js","pages/district/index.js","components/DCCACompareMap.js","components/molecules/Card.js","components/atoms/Tag.js","components/atoms/UnstyledLink.js","components/district/Councillor.js","components/molecules/Dialog.js","components/district/CouncillorSelection.js","components/district/DCCAOverview.js","components/charts/GroupedBarChart.js","components/DistrictNewVoterChartContainer.js","pages/battleground/index.js","ui/theme/index.js","pages/notfound/index.js","pages/test/index.js","ui/theme/main.js","components/organisms/MobileAppBar.js","App.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","DCREGION","A","zh_hk","en_us","B","C","D","E","F","G","H","J","K","L","M","N","P","Q","R","S","T","StackedNormalizedHorizontalBarChart","data","margin","height","length","series","d3","columns","slice","offset","color","domain","map","d","key","range","unknown","y","name","padding","x","svg","append","attr","style","selectAll","enter","join","i","bandwidth","call","g","concat","ticks","width","remove","tickSizeOuter","this","props","drawChart","react_default","a","createElement","Fragment","Component","Container","styled","div","_templateObject","FETCH_CAMP_DATA","gql","_templateObject2","CampCompareChartContainer","react_apollo_esm","query","variables","year","_ref2","loading","error","dataForD3","res","建制","count","泛民","其他","total","Object","values","reduce","acc","c","convertToD3Compatible","candidates","byCodes","_","groupBy","candidate","cacode","r","defineProperty","camp","p","val","assign","forEach","k","groupDataByRegionAndCamp","dc_candidates","console","log","charts_StackedNormalizedHorizontalBarChart","StyledSubtTitle","Typography","Text_templateObject","theme","subtextColor","TitleText","variant","SubTitleText","StyledDivier","Divider","pages_templateObject","pages_templateObject2","TopSection","_templateObject3","ExpandedRow","Box","_templateObject4","TabButton","Button","_templateObject5","main","backgroundColor","LandingIcon","_templateObject6","NoteHeader","_templateObject7","NoteContent","_templateObject8","IndexPage","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","state","autoCompleteList","type","onClick","onTabSelected","pages_Container","Text_TitleText","Text_SubTitleText","components_CampCompareChartContainer","renderNote","renderFooter","withStyles","withTheme","getAllFeaturesFromPoint","point","featuresArray","arguments","undefined","dc2003","dc2007","dc2011","dc2015","dc2019","pt","turf","lng","lat","feature","polygonProps","n","features","poly","geometry","coordinates","objectSpread","properties","split","renderInputComponent","inputProps","classes","_inputProps$inputRef","inputRef","ref","other","objectWithoutProperties","TextField","fullWidth","InputProps","node","input","disableUnderline","endAdornment","InputAdornment","position","IconButton","className","searchButton","aria-label","Search_default","renderSuggestion","suggestion","_ref","isHighlighted","matches","match","label","parts","parse","MenuItem","selected","component","part","index","highlight","String","fontWeight","text","getSuggestionValue","IntegrationAutosuggest","value","suggestions","handleSuggestionsFetchRequested","getSuggestions","then","result","setState","handleSuggestionsClearRequested","handleChange","event","_ref3","newValue","handleSuggestionSelected","_ref4","suggestionValue","suggestionIndex","sectionIndex","method","handleAddressSelected","coordinate","inputValue","trim","toLowerCase","AddressParser","records","filter","record","fullAddress","LANG_ZH","_this2","autosuggestProps","onSuggestionsFetchRequested","onSuggestionsClearRequested","onSuggestionSelected","root","dist_default","placeholder","onChange","popperNode","InputLabelProps","shrink","suggestionsList","suggestInput","renderSuggestionsContainer","options","Paper","square","containerProps","children","React","flexGrow","container","suggestionsContainerOpen","zIndex","marginTop","spacing","display","listStyleType","borderRadius","boxShadow","textDecoration","DRAWER_OPEN","DRAWER_CLOSE","drawer","action","open","drawerInitialState","ContextStore","createContext","DistrictSelector_templateObject","DistrictContainer","DistrictSelector_templateObject2","DistrictSelector_templateObject3","withRouter","dispatch","useContext","DistrictSelector_Container","area","ExpansionPanel","dccode","ExpansionPanelSummary","aria-controls","dname_chi","ExpansionPanelDetails","district","dcca","history","push","search_templateObject","search_templateObject2","search_templateObject3","ContentRowContainer","search_templateObject4","ContentContainer","search_templateObject5","AddressSearchContainer","search_templateObject6","secondaryBackgroundColor","TabContainer","search_templateObject7","search_templateObject8","active","NavBarButton","_templateObject9","_React$useState","useState","selectedTab","_React$useState2","slicedToArray","setSelectedTab","lastest","pop","CACODE","onDrawerClose","tab","search_Container","Close_default","fontSize","search_TabButton","search_StyledDivier","AddressSearcher","search_DistrictSelector","TabPanel","role","hidden","aria-labelledby","a11yProps","ScrollableTabsButtonAuto","setValue","person","allMeetings","flatten","councilors","meeting_attendances","AppBar","Tabs","indicatorColor","textColor","scrollButtons","Tab","Table","TableHead","TableRow","TableCell","align","TableBody","m","scope","meeting","meet_name","meet_type","meet_year","attended","bps","createBreakpoints","createMuiTheme","GET_PEOPLE_PROFILE","profile_templateObject","FlexRowContainer","profile_templateObject2","up","profile_templateObject3","CandidateHeaderContainer","profile_templateObject4","CandidateAvatar","Avatar","profile_templateObject5","PersonName","profile_templateObject6","YearDiv","profile_templateObject7","profile_templateObject8","profile_templateObject9","_templateObject10","PersonHighlight","_templateObject11","ElectionHistoryPaper","_templateObject12","ElectionHistoryContentGrid","Grid","_templateObject13","ElectionHistoryContentSpan","_templateObject14","ElectionHistoryContentHeaderSpan","_templateObject15","ElectionDetailButton","_templateObject16","ProfilePage","_templateObject17","_templateObject18","handleElectionDetailButton","election","yob","item","xs","md","constituency","name_zh","vote_percentage","is_won","params","homeUrl","dcd_people","currentTerm","lastElection","personHighlight","estimated_yob","title","political_affiliation","career","occupation","src","uuid","imgProps","onError","target","marginBottom","name_en","term_to","Date","dc_name_zh","MapContainer","OLMap_templateObject","regionStyle","Style","fill","Fill","stroke","Stroke","Text","font","highlightStyle","OLMap","handleMapClick","_this$props","changeDistrict","selectedFeature","getFeatures","highlightFeature","get","getView","fit","getGeometry","getExtent","duration","featuresLayer","_this$props2","dc","find","isDCDataExist","featureSource","VectorSource","GeoJSON","readFeatures","VectorLayer","source","getText","setText","getProperties","CNAME","layers","TileLayer","XYZ","url","Map","refs","mapContainer","view","View","projection","center","zoom","featureOverlay","extent","size","getSize","select","Select","addInteraction","on","highlightedFeature","getSource","removeFeature","addFeature","DistrictCard_templateObject","down","InnerContainer","DistrictCard_templateObject2","YearText","DistrictCard_templateObject3","RegionText","DistrictCard_templateObject4","CodeText","DistrictCard_templateObject5","DistrictCard_templateObject6","SeperatedRow","DistrictCard_templateObject7","DistrictCard","onPrevElection","ArrowBack_default","getFullYear","onNextElection","ArrowForward_default","stations","councilor","DistrictCard_Container","border","renderPrevElectionButton","gutterBottom","renderNextElectionButton","DistrictCard_StyledDivier","station","MainAreas_templateObject","MainAreas","areas","MainAreas_Container","flexWrap","alignContent","mr","useStyles","makeStyles","BorderLinearProgress","lighten","bgcolor","bar","LinearProgress","CustomizedProgressBars","fontBoldStyle","css","CandidateList_templateObject","fontNormalStyle","CandidateList_templateObject2","OvalButton","CandidateList_templateObject3","CandidateList_templateObject4","RowsContainer","CandidateList_templateObject5","CandidateList_templateObject6","FlexColumn","CandidateList_templateObject7","AvatarColumn","CandidateList_templateObject8","NameColumn","CandidateList_templateObject9","PoliticalColumn","CandidateList_templateObject10","CandidateList_templateObject11","CandidateListTitle","CandidateList_templateObject12","CandidateName","CandidateList_templateObject13","BlueVoteContainer","CandidateList_templateObject14","RedVoteContainer","CandidateList_templateObject15","ContentHeader","CandidateList_templateObject16","Content","CandidateList_templateObject17","CandidateList","CandidateList_Container","maxWidth","sort","b","candidate_number","CandidateList_StyledDivier","CandidateList_FlexRowContainer","handleCandidateSelected","votes","parseFloat","zingchart","MODULESDIR","chartJSON","chartData","male","female","titles","isNaN","parseInt","stacked","stack-type","subtitle","bold","font-size","font-color","background-color","plot","bar-width","hover-state","visible","animation","delay","sequence","valueBox","rules","rule","decimals","scale-x","tick","guide","scale-y","short","line-color","line-style","tooltip","VoterTurnoutChart","render","nextProps","nextState","JSON","stringify","exec","WaffleChart","squareValue","theData","population","units","Math","round","percentage","floor","Array","groupIndex","squareSize","row","col","legend","QUERY_FETCH_VOTES","Metrics_templateObject","Metrics_templateObject2","_data$dc_constituenci","dc_constituencies","vote_stat","voteStats","voteStat","total_votes","total_voters","total_voted_voters","population_excluded_foreign_worker","population_excluded_foreign_worker_lte_age_15","_ref$person","getDataForWaffleChart","stats","station_stats","barVote","cur","age","gender","Metrics_Container","district_VoterTurnoutChart","charts_WaffleChart","CONSTITUENCIES_DATA","QUERY_CONSTITUENCIES","gql_templateObject","QUERY_CONSTITUENCY_STATS","gql_templateObject2","FullWidthBox","district_templateObject","LowerBackgroundContainer","district_templateObject2","district_templateObject3","DistrictCardContainer","district_templateObject4","DistrictPage","candidateId","handleChangeDistrict","_this$props$match$par","_this$props$match$par2","_this$props$match$par3","district_FlexRowContainer","sm","components_OLMap","dcd_constituencies","district_DistrictCard","bind","district_MainAreas","main_areas","Metrics","district_CandidateList","DCCACompareMap_templateObject","DCCACompareMap","DCCACompareMap_MapContainer","StyledCard","Card","Card_templateObject","PlainCard","StyledChip","Chip","Tag_templateObject","Tag","handleClick","Link","UnstyledLink_templateObject","UnstyledNavLink","NavLink","UnstyledLink_templateObject2","StyledAvatar","Councillor_templateObject","Councillor","to","Card_PlainCard","Tag_Tag","wrap","pr","alignSelf","StyledDialogTitle","MuiDialogTitle","Dialog_templateObject","StyledDialogContent","MuiDialogContent","Dialog_templateObject2","DialogTitle","onClose","alignItems","DialogContent","PlainDialog","handleClose","content","actions","Dialog","Dialog_DialogTitle","Dialog_DialogContent","DialogActions","CustomizedDialogs","setOpen","Add_default","Dialog_PlainDialog","DCCAOverview_templateObject","DCCAOverview","tags","voterData","new_voters_percentage","aggregations","new_voters","all_voters","toFixed","DCCAOverview_Container","tag","marginLeft","GroupedBarChart","_useState","_useState2","dimensions","setDimensions","d3Container","useRef","useEffect","max","maxBy","current","chart","yScale","x0","s","x1","scale","tickSize","tickFormat","labels","useLayoutEffect","clientWidth","DistrictNewVoterChartContainer","stat","category_2","subtype","v","getDataForChat","vote_stats","groupVoteStat","VOTERS","NEW_VOTERS","BattleGroundPage","showMap","predecessors","predecessor","district_DCCAOverview","ExpandMore_default","Collapse","in","components_DCCACompareMap","district_Councillor","suggestDistricts","typography","useNextVariants","fontFamily","h1","h2","h3","h4","h5","h6","body1","palette","primary","light","dark","secondary","background","default","button","NotFoundPage","MuiThemeProvider_default","href","test_templateObject","test","test_FlexRowContainer","body2","contrastText","styledComponentTheme","StyledAppBar","MobileAppBar_templateObject","StyledToolbar","Toolbar","MobileAppBar_templateObject2","AppBarTitle","MobileAppBar_templateObject3","MobileAppBar","disableGutters","Menu_default","client","ApolloClient","uri","paper","App_templateObject","Root","App_templateObject2","App","_React$useReducer","useReducer","drawerReducer","_React$useReducer2","drawerState","drawerDispatch","styled_components_browser_esm","src_ContextStore","Provider","App_ContentContainer","CssBaseline","organisms_MobileAppBar","react_router","exact","path","TestPage","NotfoundPage","Drawer","anchor","search","ReactDOM","react_router_dom","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.c2325b28.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 357;","// deprecated. should use the data from server\nexport const DCREGION = {\n  A: {\n    zh_hk: '中西區',\n    en_us: 'Central and Western',\n  },\n  B: {\n    zh_hk: '灣仔',\n    en_us: 'Wan Chai',\n  },\n  C: {\n    zh_hk: '東區',\n    en_us: 'Eastern',\n  },\n  D: {\n    zh_hk: '南區',\n    en_us: 'Southern',\n  },\n  E: {\n    zh_hk: '油尖旺',\n    en_us: 'Yau Tsim Mong',\n  },\n  F: {\n    zh_hk: '深水埗',\n    en_us: 'Sham Shui Po',\n  },\n  G: {\n    zh_hk: '九龍城',\n    en_us: 'Kowloon City',\n  },\n  H: {\n    zh_hk: '黃大仙',\n    en_us: 'Wong Tai Sin',\n  },\n  J: {\n    zh_hk: '觀塘',\n    en_us: 'Kwun Tong',\n  },\n  K: {\n    zh_hk: '荃灣',\n    en_us: 'Tsuen Wan',\n  },\n  L: {\n    zh_hk: '屯門',\n    en_us: 'Tuen Mun',\n  },\n  M: {\n    zh_hk: '元朗',\n    en_us: 'Yuen Long',\n  },\n  N: {\n    zh_hk: '北區',\n    en_us: 'North',\n  },\n  P: {\n    zh_hk: '大埔',\n    en_us: 'Tai Po',\n  },\n  Q: {\n    zh_hk: '西貢',\n    en_us: 'Sai Kung',\n  },\n  R: {\n    zh_hk: '沙田',\n    en_us: 'Sha Tin',\n  },\n  S: {\n    zh_hk: '葵青',\n    en_us: 'Kwai Tsing',\n  },\n  T: {\n    zh_hk: '離島',\n    en_us: 'Islands',\n  },\n}\n","import React, { Component } from 'react'\nimport * as d3 from 'd3'\n\nconst ROW_HEIGHT = 50\n\nclass StackedNormalizedHorizontalBarChart extends Component {\n  drawChart(data) {\n    const margin = { top: 30, right: 10, bottom: 0, left: 50 }\n    const height = data.length * ROW_HEIGHT + margin.top + margin.bottom\n    const width = 1000\n\n    const series = d3\n      .stack()\n      .keys(data.columns.slice(1))\n      .offset(d3.stackOffsetExpand)(data)\n\n    const yAxis = g =>\n      g\n        .style('font', '24px times')\n        .attr('transform', `translate(${margin.left},0)`)\n        .call(d3.axisLeft(y).tickSizeOuter(0))\n        .call(g => g.selectAll('.domain').remove())\n\n    const xAxis = g =>\n      g\n        .style('font', '24px times')\n        .attr('transform', `translate(0,${margin.top})`)\n        .call(d3.axisTop(x).ticks(width / 100, '%'))\n        .call(g => g.selectAll('.domain').remove())\n\n    const color = d3\n      .scaleOrdinal()\n      .domain(series.map(d => d.key))\n      .range(['#ea3c53', '#eeeeee', '#63b9e9'])\n      .unknown('#ccc')\n\n    const y = d3\n      .scaleBand()\n      .domain(data.map(d => d.name))\n      .range([margin.top, height - margin.bottom])\n      .padding(0.1)\n\n    const x = d3.scaleLinear().range([margin.left, width - margin.right])\n\n    const svg = d3\n      .select('#stacked')\n      .append('svg')\n      .attr('viewBox', [0, 0, width, height])\n      .style('overflow', 'visible')\n\n    svg\n      .append('g')\n      .selectAll('g')\n      .data(series)\n      .enter()\n      .append('g')\n      .attr('fill', d => color(d.key))\n      .selectAll('rect')\n      .data(d => d)\n      .join('rect')\n      .attr('x', d => x(d[0]))\n      .attr('y', (d, i) => y(d.data.name))\n      .attr('width', d => x(d[1]) - x(d[0]))\n      .attr('height', y.bandwidth())\n\n    svg.append('g').call(xAxis)\n\n    svg.append('g').call(yAxis)\n  }\n\n  componentDidMount() {\n    const { data } = this.props\n    this.drawChart(data)\n  }\n\n  render() {\n    return (\n      <>\n        <div id=\"stacked\" style={{ height: 'auto', width: '100%' }}></div>\n      </>\n    )\n  }\n}\n\nexport default StackedNormalizedHorizontalBarChart\n","import React from 'react'\nimport styled from 'styled-components'\nimport gql from 'graphql-tag'\nimport { Query } from 'react-apollo'\nimport _ from 'lodash'\nimport { DCREGION } from '../constants/dcregion'\nimport StackedNormalizedHorizontalBarChart from 'components/charts/StackedNormalizedHorizontalBarChart'\n\nconst Container = styled.div`\n  && {\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n  }\n`\n\nconst FETCH_CAMP_DATA = gql`\n  query fetch_camp_data($year: Int!) {\n    dcd_candidates(where: { is_won: { _eq: true }, year: { _eq: $year } }) {\n      cacode\n      camp\n      person {\n        name_zh\n      }\n    }\n  }\n`\n\nfunction groupDataByRegionAndCamp(candidates) {\n  const byCodes = _.groupBy(candidates, candidate => candidate.cacode[0])\n  return Object.keys(byCodes).map(code => ({\n    code,\n    count: byCodes[code]\n      .map(r => ({ [r.camp]: 1 }))\n      .reduce((p, c) => {\n        const val = Object.assign(p)\n        Object.keys(c).forEach(k => (val[k] = c[k] + (val[k] ? val[k] : 0)))\n        return val\n      }, {}),\n  }))\n}\n\nfunction convertToD3Compatible(data) {\n  var res = data.map(d => {\n    return {\n      name: DCREGION[d.code].zh_hk,\n      建制: d.count['建制'] || 0,\n      泛民: d.count['泛民'] || 0,\n      其他: d.count['其他'] || 0,\n      total: Object.values(d.count).reduce((acc, c) => {\n        acc += c\n        return acc\n      }, 0),\n    }\n  })\n  res['columns'] = ['name', '建制', '其他', '泛民']\n  return res\n}\n\nconst CampCompareChartContainer = props => {\n  return (\n    <Query query={FETCH_CAMP_DATA} variables={{ year: 2015 }}>\n      {({ loading, error, data }) => {\n        if (loading) return null\n        if (error) return `Error! ${error}`\n        const dataFroGraph = groupDataByRegionAndCamp(data.dc_candidates)\n        const dataForD3 = convertToD3Compatible(dataFroGraph)\n        console.log(dataForD3)\n        return (\n          <Container>\n            <StackedNormalizedHorizontalBarChart\n              data={dataForD3}\n            ></StackedNormalizedHorizontalBarChart>\n          </Container>\n        )\n      }}\n    </Query>\n  )\n}\nexport default CampCompareChartContainer\n","import styled from 'styled-components'\nimport Typography from '@material-ui/core/Typography'\nimport React from 'react'\n\nconst StyledSubtTitle = styled(Typography)`\n  && {\n    color: ${props => props.theme.subtextColor};\n  }\n`\n\nexport const TitleText = props => {\n  return <Typography variant=\"h2\" {...props} />\n}\n\nexport const SubTitleText = props => {\n  return <StyledSubtTitle variant=\"h3\" {...props} />\n}\n","import React, { Component } from 'react'\n\nimport { withStyles } from '@material-ui/core/styles'\nimport Box from '@material-ui/core/Box'\nimport Button from '@material-ui/core/Button'\nimport Divider from '@material-ui/core/Divider'\nimport Typography from '@material-ui/core/Typography'\nimport CampCompareChartContainer from 'components/CampCompareChartContainer'\nimport styled from 'styled-components'\n\nimport { TitleText, SubTitleText } from 'components/atoms/Text'\n\nconst styles = theme => ({})\n\nconst StyledDivier = styled(Divider)`\n  && {\n    background-color: #ececec;\n    width: 100%;\n    margin-top: 30px;\n    margin-bottom: 20px;\n  }\n`\n\nconst Container = styled.div`\n  width: 100%;\n  padding-top: 30px;\n  margin: auto;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: baseline;\n  padding-left: 16px;\n  padding-right: 16px;\n  flex-grow: 1;\n`\n\nconst TopSection = styled(Container)`\n  && {\n    background-color: #f2f2f3;\n  }\n`\n\nconst ExpandedRow = styled(Box)`\n  && {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n    flex-grow: 1;\n  }\n`\n\nconst TabButton = styled(Button)`\n  && {\n    width: 136px;\n    height: 52px;\n    border-radius: 2px;\n    box-shadow: 1px 1px 6px 1px rgba(51, 51, 51, 0.1);\n    background-color: ${props => props.theme.main.backgroundColor};\n    text-align: center;\n\n    &:hover {\n      text-decoration: none;\n    }\n  }\n`\n\nconst LandingIcon = styled.div`\n  margin-top: 70px;\n  margin-left: auto;\n  margin-right: auto;\n  width: 200px;\n  height: 128px;\n  background: url('/static/images/landingIcon.svg') no-repeat;\n  background-size: cover;\n`\n\nconst NoteHeader = styled(TitleText)`\n  && {\n    text-align: center;\n    width: 100%;\n  }\n`\n\nconst NoteContent = styled(Typography)`\n  && {\n    width: 100%;\n  }\n`\n\nclass IndexPage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      autoCompleteList: [],\n    }\n  }\n\n  async componentDidMount() {}\n\n  renderNote() {\n    return (\n      <>\n        <NoteHeader>為什麼你的一票很重要？</NoteHeader>\n        <NoteContent>\n          除非你有投票權、競選公職權，並且參與政治，否則政府不會回應你的利益。如果自己支持的人當選，即使自己的一票不會影響勝選結果，\n        </NoteContent>\n      </>\n    )\n  }\n\n  onTabSelected(type) {}\n\n  renderFooter() {\n    return <></>\n  }\n\n  render() {\n    return (\n      <>\n        <TopSection>\n          <ExpandedRow>\n            <TabButton onClick={this.onTabSelected('district')}>\n              <Typography variant=\"h4\">找選區</Typography>\n            </TabButton>\n            <TabButton onClick={this.onTabSelected('people')}>\n              <Typography variant=\"h4\">找議員</Typography>\n            </TabButton>\n          </ExpandedRow>\n          <LandingIcon />\n        </TopSection>\n        <Container>\n          <ExpandedRow>\n            <TitleText>議會觀測</TitleText>\n            <SubTitleText>了解更多</SubTitleText>\n          </ExpandedRow>\n          <CampCompareChartContainer />\n          <StyledDivier />\n          <ExpandedRow>\n            <TitleText>熱門議題</TitleText>\n            <SubTitleText>所有議題</SubTitleText>\n          </ExpandedRow>\n          <StyledDivier />\n          {this.renderNote()}\n          {this.renderFooter()}\n        </Container>\n      </>\n    )\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(IndexPage)\n","import * as turf from '@turf/turf'\n\nimport dc2003 from '../data/DCCA_2003'\nimport dc2007 from '../data/DCCA_2007'\nimport dc2011 from '../data/DCCA_2011'\nimport dc2015 from '../data/DCCA_2015'\nimport dc2019 from '../data/DCCA_2019'\n\nexport const getAllFeaturesFromPoint = (\n  point,\n  featuresArray = [dc2003, dc2007, dc2011, dc2015, dc2019]\n) => {\n  const pt = turf.point([point.lng, point.lat])\n  const result = featuresArray.map(feature => {\n    let polygonProps = {}\n    for (let i = 0, n = feature.features.length; i < n; i++) {\n      const poly = turf.multiPolygon(feature.features[i].geometry.coordinates)\n      if (turf.booleanPointInPolygon(pt, poly)) {\n        polygonProps = { ...feature.features[i].properties }\n        break\n      }\n    }\n    return {\n      year: feature.name.split('_')[1],\n      ...polygonProps,\n    }\n  })\n  return result\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Autosuggest from 'react-autosuggest'\nimport match from 'autosuggest-highlight/match'\nimport parse from 'autosuggest-highlight/parse'\nimport TextField from '@material-ui/core/TextField'\nimport Paper from '@material-ui/core/Paper'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport { withStyles } from '@material-ui/core/styles'\nimport IconButton from '@material-ui/core/IconButton'\nimport SearchIcon from '@material-ui/icons/Search'\nimport InputAdornment from '@material-ui/core/InputAdornment'\nimport * as AddressParser from 'hk-address-parser-lib'\nimport { getAllFeaturesFromPoint } from '../../utils/features'\n\nfunction renderInputComponent(inputProps) {\n  const { classes, inputRef = () => {}, ref, ...other } = inputProps\n\n  return (\n    <>\n      <TextField\n        fullWidth\n        InputProps={{\n          inputRef: node => {\n            ref(node)\n            inputRef(node)\n          },\n          classes: {\n            input: classes.input,\n          },\n          disableUnderline: true,\n          endAdornment: (\n            <InputAdornment position=\"end\">\n              <IconButton className={classes.searchButton} aria-label=\"Search\">\n                <SearchIcon />\n              </IconButton>\n            </InputAdornment>\n          ),\n        }}\n        {...other}\n      />\n    </>\n  )\n}\n\nfunction renderSuggestion(suggestion, { query, isHighlighted }) {\n  const matches = match(suggestion.label, query)\n  const parts = parse(suggestion.label, matches)\n\n  return (\n    <MenuItem selected={isHighlighted} component=\"div\">\n      {parts.map((part, index) =>\n        part.highlight ? (\n          <span key={String(index)} style={{ fontWeight: 500 }}>\n            {part.text}\n          </span>\n        ) : (\n          <strong key={String(index)} style={{ fontWeight: 300 }}>\n            {part.text}\n          </strong>\n        )\n      )}\n    </MenuItem>\n  )\n}\n\nfunction getSuggestionValue(suggestion) {\n  return suggestion.label\n}\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n  },\n  container: {\n    position: 'relative',\n  },\n  suggestionsContainerOpen: {\n    position: 'absolute',\n    zIndex: 1,\n    marginTop: theme.spacing(1),\n    // left: 0,\n    // right: 0,\n  },\n  suggestion: {\n    display: 'block',\n  },\n  suggestionsList: {\n    margin: 0,\n    padding: 0,\n    listStyleType: 'none',\n  },\n  suggestInput: {\n    height: '60px',\n    borderRadius: '4px',\n    boxShadow: '0 2px 16px 0 rgba(0, 0, 0, 0.1)',\n    backgroundColor: '#ffffff',\n    padding: '10px 20px',\n  },\n  input: {\n    textDecoration: 'none',\n  },\n  searchButton: {\n    color: '#ffd731',\n  },\n})\n\nclass IntegrationAutosuggest extends React.Component {\n  state = {\n    value: '',\n    suggestions: [],\n  }\n\n  async getSuggestions(value) {\n    const inputValue = value.trim().toLowerCase()\n    const inputLength = inputValue.length\n\n    if (inputLength > 0) {\n      const records = await AddressParser.parse(inputValue)\n      const result = records\n        .filter((_, index) => index < 10)\n        .map(record => ({\n          coordinate: record.coordinate(),\n          label: record.fullAddress(AddressParser.Address.LANG_ZH),\n        }))\n\n      return result\n    }\n\n    return []\n  }\n\n  handleSuggestionsFetchRequested = ({ value }) => {\n    this.getSuggestions(value).then(result => {\n      this.setState({\n        suggestions: result,\n      })\n    })\n  }\n\n  handleSuggestionsClearRequested = () => {\n    this.setState({\n      suggestions: [],\n    })\n  }\n\n  handleChange = name => (event, { newValue }) => {\n    this.setState({\n      [name]: newValue,\n    })\n  }\n\n  handleSuggestionSelected = (\n    event,\n    { suggestion, suggestionValue, suggestionIndex, sectionIndex, method }\n  ) => {\n    this.props.handleAddressSelected(\n      getAllFeaturesFromPoint(suggestion.coordinate)\n    )\n  }\n\n  render() {\n    const { classes } = this.props\n\n    const autosuggestProps = {\n      renderInputComponent,\n      suggestions: this.state.suggestions,\n      onSuggestionsFetchRequested: this.handleSuggestionsFetchRequested,\n      onSuggestionsClearRequested: this.handleSuggestionsClearRequested,\n      onSuggestionSelected: this.handleSuggestionSelected,\n      getSuggestionValue,\n      renderSuggestion,\n    }\n\n    return (\n      <div className={classes.root}>\n        <Autosuggest\n          {...autosuggestProps}\n          inputProps={{\n            classes,\n            placeholder: '尋找選區...',\n            value: this.state.value,\n            onChange: this.handleChange('value'),\n            inputRef: node => {\n              this.popperNode = node\n            },\n            InputLabelProps: {\n              shrink: true,\n            },\n          }}\n          theme={{\n            suggestionsList: classes.suggestionsList,\n            suggestion: classes.suggestion,\n            input: classes.suggestInput,\n          }}\n          renderSuggestionsContainer={options => (\n            <Paper\n              square\n              {...options.containerProps}\n              style={{\n                width: '100%',\n              }}\n            >\n              {options.children}\n            </Paper>\n          )}\n        />\n      </div>\n    )\n  }\n}\n\nIntegrationAutosuggest.propTypes = {\n  classes: PropTypes.object.isRequired,\n}\n\nexport default withStyles(styles)(IntegrationAutosuggest)\n","export const DRAWER_OPEN = 'drawer_open'\nexport const DRAWER_CLOSE = 'drawer_close'\n\nexport default (state, action) => {\n  switch (action.type) {\n    case DRAWER_OPEN:\n      return { open: true }\n    default:\n      return { open: false }\n  }\n}\n","import React from 'react'\nimport drawerReducer from 'reducers/drawer'\n\nexport const drawerInitialState = {\n  open: false,\n}\n\nconst ContextStore = React.createContext({\n  drawer: drawerInitialState,\n})\n\nexport const ContextStoreProvider = props => {\n  const [drawerState, drawerDispatch] = React.useReducer(\n    drawerReducer,\n    drawerInitialState\n  )\n\n  return (\n    <ContextStore.Provider\n      value={{\n        drawer: {\n          state: drawerState,\n          dispatch: drawerDispatch,\n        },\n      }}\n      {...props}\n    />\n  )\n}\n\nexport default ContextStore\n","import React, { useState } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport area from '../../data/area'\nimport district from '../../data/district'\nimport Button from '@material-ui/core/Button'\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel'\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary'\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails'\nimport { DRAWER_CLOSE } from 'reducers/drawer'\nimport ContextStore from 'ContextStore'\nimport { withRouter } from 'react-router-dom'\n\nconst Container = styled.div`\n  && {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n`\n\nconst SideBar = styled(Box)`\n  && {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    min-width: 200px;\n    max-width: 200px;\n  }\n`\n\nconst DistrictContainer = styled(Button)`\n  && {\n    width: 120px;\n    justify-content: left;\n  }\n`\n\nconst DistrictSelector = props => {\n  const {\n    drawer: { dispatch },\n  } = React.useContext(ContextStore)\n  const renderDCCA = code => {\n    if (!code) return null\n    return (\n      <div>\n        {Object.keys(district['2019'][code]).map(dcca => {\n          return (\n            <DistrictContainer\n              key={district['2019'][code][dcca].code}\n              onClick={() => {\n                dispatch({ type: DRAWER_CLOSE })\n                props.history.push(`/district/2019/${dcca}`)\n              }}\n              color=\"secondary\"\n            >\n              <Typography variant=\"h6\">\n                {district['2019'][code][dcca].name}\n              </Typography>\n            </DistrictContainer>\n          )\n        })}\n      </div>\n    )\n  }\n\n  return (\n    <Container>\n      {area.map(a => (\n        <ExpansionPanel key={a.dccode}>\n          <ExpansionPanelSummary\n            aria-controls=\"panel1a-content\"\n            id=\"panel1a-header\"\n          >\n            <Typography>{a.dname_chi}</Typography>\n          </ExpansionPanelSummary>\n          <ExpansionPanelDetails>{renderDCCA(a.dccode)}</ExpansionPanelDetails>\n        </ExpansionPanel>\n      ))}\n    </Container>\n  )\n}\n\nexport default withRouter(DistrictSelector)\n","import React from 'react'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport AddressSearcher from './AddressSearcher'\nimport DistrictSelector from './DistrictSelector'\nimport IconButton from '@material-ui/core/IconButton'\nimport CloseIcon from '@material-ui/icons/Close'\nimport Button from '@material-ui/core/Button'\nimport Typography from '@material-ui/core/Typography'\nimport Divider from '@material-ui/core/Divider'\nimport { withRouter } from 'react-router-dom'\nimport ContextStore from 'ContextStore'\nimport { DRAWER_CLOSE } from 'reducers/drawer'\n\nconst StyledDivier = styled(Divider)`\n  && {\n    background-color: #ececec;\n    width: 100%;\n  }\n`\n\nconst Container = styled(Box)`\n  && {\n    width: 100%;\n  }\n`\n\nconst ExpandedRow = styled(Box)`\n  && {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n    flex-grow: 1;\n  }\n`\n\nconst ContentRowContainer = styled(ExpandedRow)`\n  && {\n    flex-flow: column;\n  }\n`\n\nconst ContentContainer = styled(Box)`\n  && {\n    width: 100%;\n    justify-content: center;\n  }\n`\n\nconst AddressSearchContainer = styled(Box)`\n  && {\n    width: 100%;\n    padding: 21px 16px 21px 16px;\n    background-color: ${props => props.theme.secondaryBackgroundColor};\n  }\n`\n\nconst TabContainer = styled(Box)`\n  && {\n    display: flex;\n    width: 100%;\n    justify-content: center;\n  }\n`\n\nconst TabButton = styled(Button)`\n  && {\n    margin: 10px 10px 0px 10px;\n    padding-bottom: 15px;\n\n    color: ${props =>\n      props.active === 'active'\n        ? props.theme.subtextColor\n        : props.theme.main.color};\n    border-bottom: ${props =>\n      props.active === 'active'\n        ? `1px solid ${props.theme.subtextColor}`\n        : 'none'};\n  }\n`\n\nconst NavBarButton = styled(IconButton)`\n  && {\n    position: fixed;\n    top: 0px;\n    right: 0px;\n  }\n`\n\nfunction SearchPage(props) {\n  const {\n    drawer: { dispatch },\n  } = React.useContext(ContextStore)\n  const [selectedTab, setSelectedTab] = React.useState(\n    props.selectedTab || 'district'\n  )\n\n  // async function onAddressFieldChanged(evt) {\n  //   const { value } = evt.target\n  //   const records = await AddressParser.parse(value)\n  //   this.setState({\n  //     autoCompleteList: records,\n  //   })\n  // }\n\n  // function handlePeopleSelected(result) {\n  //   props.history.push(`profile/${result.id}`)\n  // }\n\n  function handleAddressSelected(result) {\n    if (!result) return\n\n    const lastest = result.pop()\n\n    /* TODO: \n      Use context (?) to store the Global district result array\n      When user select click previous button in district page, \n      the CACODE should follow follow the above result\n    */\n\n    props.history.push(`/district/${lastest.year}/${lastest.CACODE}`)\n\n    props.onDrawerClose()\n  }\n\n  function onTabSelected(tab) {\n    return () => {\n      setSelectedTab(tab)\n    }\n  }\n\n  function renderSearchDistrict() {\n    return (\n      <ContentRowContainer>\n        <AddressSearchContainer>\n          <AddressSearcher handleAddressSelected={handleAddressSelected} />\n        </AddressSearchContainer>\n        <DistrictSelector />\n      </ContentRowContainer>\n    )\n  }\n\n  function renderSearchPeople() {\n    return (\n      <ContentRowContainer>\n        <AddressSearchContainer>\n          <AddressSearcher handleAddressSelected={handleAddressSelected} />\n        </AddressSearchContainer>\n        <ContentContainer>\n          <DistrictSelector />\n        </ContentContainer>\n      </ContentRowContainer>\n    )\n  }\n\n  return (\n    <Container>\n      <NavBarButton\n        color=\"inherit\"\n        component=\"span\"\n        aria-label=\"Menu\"\n        onClick={() => {\n          dispatch({ type: DRAWER_CLOSE })\n        }}\n      >\n        <CloseIcon fontSize=\"small\" />\n      </NavBarButton>\n      <TabContainer>\n        <TabButton\n          active={selectedTab === 'district' ? 'active' : 'inactive'}\n          onClick={onTabSelected('district')}\n        >\n          <Typography variant=\"h3\">找選區</Typography>\n        </TabButton>\n        <TabButton\n          active={selectedTab === 'people' ? 'active' : 'inactive'}\n          onClick={onTabSelected('people')}\n        >\n          <Typography variant=\"h3\">找候選人</Typography>\n        </TabButton>\n      </TabContainer>\n      <StyledDivier />\n      {selectedTab === 'district'\n        ? renderSearchDistrict()\n        : renderSearchPeople()}\n    </Container>\n  )\n}\n\nexport default withRouter(SearchPage)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport AppBar from '@material-ui/core/AppBar'\nimport Tabs from '@material-ui/core/Tabs'\nimport Tab from '@material-ui/core/Tab'\nimport Typography from '@material-ui/core/Typography'\nimport Box from '@material-ui/core/Box'\nimport Table from '@material-ui/core/Table'\nimport TableBody from '@material-ui/core/TableBody'\nimport TableCell from '@material-ui/core/TableCell'\nimport TableHead from '@material-ui/core/TableHead'\nimport TableRow from '@material-ui/core/TableRow'\nimport _ from 'lodash'\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props\n\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`scrollable-auto-tabpanel-${index}`}\n      aria-labelledby={`scrollable-auto-tab-${index}`}\n      {...other}\n    >\n      <Box p={3}>{children}</Box>\n    </Typography>\n  )\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  value: PropTypes.any.isRequired,\n}\n\nfunction a11yProps(index) {\n  return {\n    id: `scrollable-auto-tab-${index}`,\n    'aria-controls': `scrollable-auto-tabpanel-${index}`,\n  }\n}\n\nexport default function ScrollableTabsButtonAuto(props) {\n  const [value, setValue] = React.useState(0)\n  const { person } = props\n\n  // Get all the me\n  const allMeetings = _.flatten(\n    person.councilors.map(c => c.meeting_attendances)\n  )\n  function handleChange(event, newValue) {\n    setValue(newValue)\n  }\n\n  return (\n    <>\n      <AppBar position=\"static\">\n        <Tabs\n          value={value}\n          onChange={handleChange}\n          indicatorColor=\"primary\"\n          textColor=\"primary\"\n          variant=\"scrollable\"\n          scrollButtons=\"auto\"\n          aria-label=\"scrollable auto tabs example\"\n        >\n          <Tab label=\"Item One\" {...a11yProps(0)} />\n          <Tab label=\"會議記錄\" {...a11yProps(1)} />\n          <Tab label=\"Item Three\" {...a11yProps(2)} />\n          <Tab label=\"Item Four\" {...a11yProps(3)} />\n          <Tab label=\"Item Five\" {...a11yProps(4)} />\n          <Tab label=\"Item Six\" {...a11yProps(5)} />\n          <Tab label=\"Item Seven\" {...a11yProps(6)} />\n        </Tabs>\n      </AppBar>\n      <TabPanel value={value} index={0}>\n        Item One\n      </TabPanel>\n      <TabPanel value={value} index={1}>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell align=\"right\">會議</TableCell>\n              <TableCell align=\"right\">性質</TableCell>\n              <TableCell align=\"right\">年份</TableCell>\n              <TableCell align=\"right\">與席</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {allMeetings.map((m, index) => (\n              <TableRow key={index}>\n                <TableCell component=\"th\" scope=\"row\">\n                  {m.meeting.meet_name}\n                </TableCell>\n                <TableCell align=\"right\">{m.meeting.meet_type}</TableCell>\n                <TableCell align=\"right\">{m.meeting.meet_year}</TableCell>\n                <TableCell align=\"right\">\n                  {m.attended}/{m.total}\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TabPanel>\n      <TabPanel value={value} index={2}>\n        Item Three\n      </TabPanel>\n      <TabPanel value={value} index={3}>\n        Item Four\n      </TabPanel>\n      <TabPanel value={value} index={4}>\n        Item Five\n      </TabPanel>\n      <TabPanel value={value} index={5}>\n        Item Six\n      </TabPanel>\n      <TabPanel value={value} index={6}>\n        Item Seven\n      </TabPanel>\n    </>\n  )\n}\n","import createBreakpoints from '@material-ui/core/styles/createBreakpoints'\nimport createMuiTheme from '@material-ui/core/styles/createMuiTheme'\n\nexport const bps = createBreakpoints({})\n\nexport const headingFontFamily = 'Source Serif Pro, sans-serif'\nexport const bodyFontFamily = 'PT Serif, sans-serif'\n\nexport const fontFamily = ['PingFangTC-Semibold', 'PingFangTC-Medium']\n\nexport const typography = {}\n\nexport const theme = createMuiTheme()\n","import React, { Component } from 'react'\nimport Box from '@material-ui/core/Box'\nimport styled, { css } from 'styled-components'\nimport Typography from '@material-ui/core/Typography'\nimport Avatar from '@material-ui/core/Avatar'\nimport Paper from '@material-ui/core/Paper'\nimport Grid from '@material-ui/core/Grid'\nimport ScrollableTabsButtonAuto from '../../components/molecules/ScrollableTabs'\nimport gql from 'graphql-tag'\nimport { Query } from 'react-apollo'\nimport { bps } from 'ui/responsive'\n\n// TODO: add age, camp & political_affiliation\nconst GET_PEOPLE_PROFILE = gql`\n  query($id: Int!) {\n    dcd_people(where: { id: { _eq: $id } }) {\n      id\n      uuid\n      name_zh\n      name_en\n      gender\n      estimated_yob\n      councilors {\n        year\n        cacode\n        term_from\n        term_to\n        career\n        district {\n          dc_name_zh\n        }\n        political_affiliation\n        post\n        constituency {\n          id\n          name_zh\n        }\n        meeting_attendances(\n          order_by: { meeting: { meet_year: desc }, total: desc }\n        ) {\n          meeting {\n            meet_name\n            meet_type\n            meet_year\n          }\n          attended\n          total\n        }\n      }\n      candidates {\n        candidate_number\n        is_won\n        occupation\n        political_affiliation\n        age\n        cacode\n        camp\n        election_type\n        year\n      }\n    }\n  }\n`\n\nconst DistrictName = styled.div`\n   {\n    font-size: 14px;\n    font-weight: 600;\n    color: #ffffff;\n    ${bps.up('sm')} {\n      font-size: 20px;\n    }\n\n    ${bps.up('md')} {\n      font-size: 36px;\n    }\n  }\n`\n\nconst FlexRowContainer = styled(Box)`\n  && {\n    width: 100%;\n  }\n`\n\nconst CandidateHeaderContainer = styled(FlexRowContainer)`\n  && {\n    height: 116px;\n    position: relative;\n    display: flex;\n    background: linear-gradient(#f6416e 84px, rgba(255, 255, 255, 0) 32px);\n  }\n`\n\nconst CandidateAvatar = styled(Avatar)`\n  && {\n    position: absolute;\n    left: 16px;\n    bottom: 8px;\n    width: 84px;\n    height: 84px;\n  }\n`\n\nconst PersonName = styled.div`\n   {\n    position: absolute;\n    left: 116px;\n    top: 32px;\n  }\n`\n\nconst BasicInfoHeader = styled.div`\n  && {\n    font-size: 32px;\n    font-weight: 600;\n    width: 100%;\n\n    ${bps.up('md')} {\n      margin-left: 65px;\n    }\n  }\n`\nconst ElectionHistoryContainer = styled(FlexRowContainer)`\n  && {\n    padding: 20px;\n    background-color: #fafafa;\n    ${bps.up('sm')} {\n      padding-left: 40px;\n    }\n\n    ${bps.up('md')} {\n      padding-left: 120px;\n      height: 100%;\n    }\n  }\n`\nconst ElectionHistoryHeader = styled.div`\n  && {\n    font-size: 32px;\n    font-weight: 600;\n    color: #333333;\n    margin-top: 4px;\n  }\n`\n\nconst YearDiv = styled.div`\n  && {\n    font-size: 24px;\n    font-weight: 600;\n    color: #9b9b9b;\n    margin-bottom: 20px;\n  }\n`\n\nconst PersonHighlight = styled.div`\n  && {\n    display: flex;\n  }\n`\nconst ElectionHistoryPaper = styled(Paper)`\n  && {\n    padding: 20px;\n  }\n`\n\nconst ElectionHistoryContentGrid = styled(Grid)`\n  && {\n    padding: 15px;\n  }\n`\n\nconst ElectionHistoryContentSpan = styled(Grid)`\n  && {\n    font-size: 18px;\n    color: #4a4a4a;\n  }\n`\n\nconst ElectionHistoryContentHeaderSpan = styled(ElectionHistoryContentSpan)`\n  && {\n    font-weight: 500;\n  }\n`\nconst ElectionDetailButton = styled.div`\n  && {\n    padding: 15px;\n    font-weight: 600;\n    color: #ffb700;\n    width: 100%;\n    text-align: center;\n    border-radius: 4px;\n    border: 2px solid #ffb700;\n    cursor: pointer;\n  }\n`\n\nconst BasicInfoGridHeader = styled(Grid)`\n  && {\n    font-weight: 600;\n    color: #4a4a4a;\n    font-size: 18px;\n  }\n`\n\nconst BasicInfoGridContent = styled(Grid)`\n  && {\n    color: #4a4a4a;\n    font-size: 18px;\n  }\n`\nclass ProfilePage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  async componentDidMount() {}\n\n  handleElectionDetailButton = (year, code) => {\n    this.props.history.push(`/district/${year}/${code}`)\n  }\n\n  renderElectionInfoCard(election, yob) {\n    return (\n      <Grid item xs={12} md={4}>\n        <YearDiv>{`${election.year}年`}</YearDiv>\n        <ElectionHistoryPaper>\n          <ElectionHistoryContentGrid container spacing={1}>\n            <ElectionHistoryContentHeaderSpan item xs={12} md={4}>\n              地區\n            </ElectionHistoryContentHeaderSpan>\n            <ElectionHistoryContentSpan item xs={12} md={8}>\n              {' '}\n              {election.constituency && election.constituency.name\n                ? election.constituency.name\n                : '-'}{' '}\n            </ElectionHistoryContentSpan>\n          </ElectionHistoryContentGrid>\n          <hr />\n          <ElectionHistoryContentGrid container spacing={1}>\n            <ElectionHistoryContentHeaderSpan item xs={12} md={4}>\n              選區\n            </ElectionHistoryContentHeaderSpan>\n            <ElectionHistoryContentSpan item xs={12} md={8}>\n              {`${election.constituency.name_zh} （${election.cacode}）`}\n            </ElectionHistoryContentSpan>\n          </ElectionHistoryContentGrid>\n          <hr />\n          <ElectionHistoryContentGrid container spacing={1}>\n            <ElectionHistoryContentHeaderSpan item xs={12} md={4}>\n              陣營\n            </ElectionHistoryContentHeaderSpan>\n            <ElectionHistoryContentSpan item xs={12} md={8}>\n              {election.camp ? election.camp : '-'}\n            </ElectionHistoryContentSpan>\n          </ElectionHistoryContentGrid>\n          <hr />\n          <ElectionHistoryContentGrid container spacing={1}>\n            <ElectionHistoryContentHeaderSpan item xs={12} md={4}>\n              得票率\n            </ElectionHistoryContentHeaderSpan>\n            <ElectionHistoryContentSpan item xs={12} md={8}>\n              {`${election.vote_percentage}% （${\n                election.is_won ? '當選' : '落敗'\n              }）`}\n            </ElectionHistoryContentSpan>\n          </ElectionHistoryContentGrid>\n          <ElectionHistoryContentGrid container spacing={1}>\n            <ElectionDetailButton\n              onClick={() => {\n                this.handleElectionDetailButton(election.year, election.cacode)\n              }}\n            >\n              查看選舉資料\n            </ElectionDetailButton>\n          </ElectionHistoryContentGrid>\n        </ElectionHistoryPaper>\n      </Grid>\n    )\n  }\n\n  render() {\n    const {\n      match: {\n        params: { id },\n      },\n    } = this.props\n\n    // todo: use ENV_VAR\n    const homeUrl = 'https://cswbrian.github.io/district-councils-dashboard/'\n\n    return (\n      <Query query={GET_PEOPLE_PROFILE} variables={{ id }}>\n        {({ loading, error, data }) => {\n          if (loading) return null\n          if (error) return `Error! ${error}`\n          const person = data.dcd_people[0]\n\n          const currentTerm =\n            person.councilors && person.councilors[person.councilors.length - 1]\n          const lastElection =\n            person.candidates && person.candidates[person.candidates.length - 1]\n\n          const personHighlight = []\n\n          if (person.estimated_yob) {\n            personHighlight.push({\n              title: '年齡',\n              text: `${2019 - person.estimated_yob}歲`,\n            })\n          }\n\n          if (currentTerm && currentTerm.political_affiliation) {\n            personHighlight.push({\n              title: '報稱政治聯繫',\n              text: `${currentTerm.political_affiliation}`,\n            })\n          } else if (lastElection && lastElection.political_affiliation) {\n            personHighlight.push({\n              title: '報稱政治聯繫',\n              text:\n                `${lastElection.political_affiliation}` +\n                (lastElection.camp && `（${lastElection.camp}）`),\n            })\n          }\n\n          personHighlight.push({\n            title: '職業',\n            text:\n              (currentTerm && currentTerm.career) || lastElection.occupation,\n          })\n\n          return (\n            <>\n              <CandidateHeaderContainer>\n                <Box>\n                  <CandidateAvatar\n                    src={`${homeUrl}/static/images/avatar/${person.uuid}.jpg`}\n                    imgProps={{\n                      onError: e => {\n                        e.target.src = `${homeUrl}/static/images/avatar/default.png`\n                      },\n                    }}\n                  />\n                </Box>\n                <Box>\n                  <PersonName>\n                    <Typography\n                      variant=\"h3\"\n                      style={{ marginBottom: '2px', color: 'white' }}\n                    >\n                      {person.name_zh || ''}\n                    </Typography>\n                    <Typography\n                      variant=\"h5\"\n                      style={{ marginBottom: '8px', color: 'white' }}\n                    >\n                      {person.name_en || ''}\n                    </Typography>\n                    {currentTerm &&\n                      currentTerm.term_to &&\n                      Date.parse(new Date()) <\n                        Date.parse(currentTerm.term_to) && (\n                        <Typography\n                          variant=\"h6\"\n                          color=\"secondary\"\n                        >{`現任${currentTerm.district.dc_name_zh}區議員（${currentTerm.constituency.name_zh}）`}</Typography>\n                      )}\n                  </PersonName>\n                </Box>\n              </CandidateHeaderContainer>\n\n              <PersonHighlight>\n                {personHighlight.map((highlight, index) => (\n                  <Box key={index} p={2}>\n                    <Typography variant=\"h5\">{highlight.text}</Typography>\n                    <Typography variant=\"h6\">{highlight.title}</Typography>\n                  </Box>\n                ))}\n              </PersonHighlight>\n\n              <ScrollableTabsButtonAuto person={person} />\n              {/* <ElectionHistoryContainer>\n                <Grid container spacing={3}>\n                  <Grid item xs={12}>\n                    <ElectionHistoryHeader>區議會選舉</ElectionHistoryHeader>\n                  </Grid>\n\n                  {person.elections\n                    .sort((a, b) => b.year - a.year)\n                    .map(election =>\n                      this.renderElectionInfoCard(\n                        election,\n                        person.estimated_yob\n                      )\n                    )}\n                </Grid>\n              </ElectionHistoryContainer> */}\n            </>\n          )\n        }}\n      </Query>\n    )\n  }\n}\n\nexport default ProfilePage\n","import React, { Component } from 'react'\nimport Map from 'ol/Map'\nimport View from 'ol/View'\nimport TileLayer from 'ol/layer/Tile'\nimport VectorLayer from 'ol/layer/Vector'\nimport VectorSource from 'ol/source/Vector'\nimport XYZ from 'ol/source/XYZ'\nimport GeoJSON from 'ol/format/GeoJSON'\nimport { Style, Stroke, Fill, Text } from 'ol/style'\nimport Select from 'ol/interaction/Select'\nimport styled from 'styled-components'\n\nimport dc2003 from '../data/DCCA_2003'\nimport dc2007 from '../data/DCCA_2007'\nimport dc2011 from '../data/DCCA_2011'\nimport dc2015 from '../data/DCCA_2015'\nimport dc2019 from '../data/DCCA_2019'\n\nconst MapContainer = styled.div`\n  width: 100%;\n  height: 100%;\n`\n\nconst regionStyle = new Style({\n  fill: new Fill({\n    color: 'rgba(255, 255, 255, 0.2)',\n  }),\n  stroke: new Stroke({\n    color: '#319FD3',\n    width: 1,\n  }),\n  text: new Text({\n    font: '16px Calibri,sans-serif',\n    fill: new Fill({\n      color: '#000',\n    }),\n    stroke: new Stroke({\n      color: '#fff',\n      width: 2,\n    }),\n  }),\n})\n\nconst highlightStyle = new Style({\n  stroke: new Stroke({\n    color: '#f00',\n    width: 1,\n  }),\n  fill: new Fill({\n    color: 'rgba(255,0,0,0.1)',\n  }),\n  text: new Text({\n    font: '16px Calibri,sans-serif',\n    fill: new Fill({\n      color: '#000',\n    }),\n    stroke: new Stroke({\n      color: '#f00',\n      width: 2,\n    }),\n  }),\n})\n\nclass OLMap extends Component {\n  featureOverlay\n  highlightedFeature\n\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  componentDidMount() {\n    const { year, code } = this.props\n    const dc = [dc2003, dc2007, dc2011, dc2015, dc2019].find(\n      d => d.name === `DCCA_${year}`\n    )\n    let isDCDataExist = dc ? true : false\n    let featuresLayer\n\n    if (isDCDataExist) {\n      this.featureSource = new VectorSource({\n        features: new GeoJSON().readFeatures(dc),\n      })\n\n      featuresLayer = new VectorLayer({\n        source: this.featureSource,\n        style: feature => {\n          regionStyle.getText().setText(feature.getProperties().CNAME)\n          return regionStyle\n        },\n      })\n    }\n\n    // create map object with feature layer\n    const layers = [\n      //default OSM layer\n      new TileLayer({\n        source: new XYZ({\n          url:\n            'https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}',\n        }),\n      }),\n    ]\n\n    if (isDCDataExist) {\n      layers.push(featuresLayer)\n    }\n\n    const map = new Map({\n      target: this.refs.mapContainer,\n      layers,\n      view: new View({\n        projection: 'EPSG:4326',\n        center: [114.2029, 22.3844],\n        zoom: 13,\n      }),\n    })\n\n    this.featureOverlay = new VectorLayer({\n      source: new VectorSource(),\n      map: map,\n      style: function(feature) {\n        highlightStyle.getText().setText(`${feature.getProperties().CNAME}`)\n        return highlightStyle\n      },\n    })\n\n    if (isDCDataExist) {\n      // Fit to feature\n      const features = this.featureSource.getFeatures()\n      for (let i = 0; i < features.length; i++) {\n        if (features[i].getProperties().CACODE === code) {\n          const extent = features[i].getGeometry().getExtent()\n          map.getView().fit(extent, {\n            size: map.getSize(),\n            padding: [10, 10, 10, 10],\n          })\n\n          this.highlightFeature(features[i])\n          break\n        }\n      }\n    }\n\n    this.setState({\n      map,\n      view: map.getView(),\n      featuresLayer: isDCDataExist ? featuresLayer : null,\n    })\n\n    const select = new Select()\n\n    if (select !== null) {\n      map.addInteraction(select)\n      select.on('select', this.handleMapClick)\n    }\n  }\n\n  highlightFeature(feature) {\n    if (this.highlightedFeature) {\n      this.featureOverlay.getSource().removeFeature(this.highlightedFeature)\n    }\n\n    this.featureOverlay.getSource().addFeature(feature)\n    this.highlightedFeature = feature\n  }\n\n  handleMapClick = e => {\n    const { year, changeDistrict } = this.props\n    const selectedFeature = e.target.getFeatures().item(0)\n\n    if (selectedFeature) {\n      this.highlightFeature(selectedFeature)\n      changeDistrict(year, selectedFeature.get('CACODE'))\n      this.state.map.getView().fit(selectedFeature.getGeometry().getExtent(), {\n        duration: 200,\n      })\n    }\n  }\n\n  render() {\n    return <MapContainer ref=\"mapContainer\"> </MapContainer>\n  }\n}\n\nexport default OLMap\n","import React, { Component } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport Paper from '@material-ui/core/Paper'\nimport IconButton from '@material-ui/core/IconButton'\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward'\nimport Divider from '@material-ui/core/Divider'\nimport Box from '@material-ui/core/Box'\nimport PropTypes from 'prop-types'\nimport { bps } from 'ui/responsive'\n\nconst Container = styled(Paper)`\n  && {\n    width: 400px;\n    height: 400px;\n    background-color: #f6f6f6;\n    padding: 0;\n\n    ${bps.down('md')} {\n      width: 100%;\n    }\n  }\n`\n\nconst InnerContainer = styled(Box)`\n  && {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    align-items: baseline;\n    padding-left: 32px;\n    padding-right: 32px;\n  }\n`\n\nconst YearText = styled(Typography)`\n  && {\n    font-family: Avenir;\n    font-size: 30px;\n    font-weight: 900;\n    color: #333333;\n  }\n`\n\nconst RegionText = styled(Typography)`\n  && {\n    width: 100%;\n    font-family: PingFangTC-Medium;\n    font-size: 20px;\n    font-weight: 500;\n    color: #ffb700;\n  }\n`\n\nconst CodeText = styled(Typography)`\n  && {\n    margin-left: 10px;\n    font-family: PingFangTC-Light;\n    font-size: 40px;\n    font-weight: 300;\n    color: #9b9b9b;\n  }\n`\n\nconst StyledDivier = styled(Divider)`\n  && {\n    margin-top: 40px;\n    background-color: #cecece;\n    width: 100%;\n  }\n`\n\nconst SeperatedRow = styled(Box)`\n  && {\n    margin-top: 20px;\n    display: flex;\n    width: 100%;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n  }\n`\n\nclass DistrictCard extends Component {\n  static propTypes = {\n    year: PropTypes.number.isRequired,\n    code: PropTypes.string.isRequired,\n    name_zh: PropTypes.string.isRequired,\n    name_en: PropTypes.string.isRequired,\n    onPrevElection: PropTypes.func.isRequired,\n    onNextElection: PropTypes.func.isRequired,\n    councilors: PropTypes.array.isRequired,\n    district: PropTypes.object.isRequired,\n  }\n\n  renderPrevElectionButton(year) {\n    return year > 1999 ? (\n      <IconButton aria-label=\"arrow_back\" onClick={this.props.onPrevElection}>\n        <ArrowBackIcon />\n      </IconButton>\n    ) : (\n      // if there is no next button, show a 48x48 empty box to align the 2 elements on the right\n      <div style={{ width: '48px', height: '48px' }}></div>\n    )\n  }\n\n  renderNextElectionButton(year) {\n    const nextElectionYear = year + 4\n    const currentYear = new Date().getFullYear()\n    return nextElectionYear <= currentYear ? (\n      <IconButton\n        aria-label=\"arrow_forward\"\n        onClick={this.props.onNextElection}\n      >\n        <ArrowForwardIcon />\n      </IconButton>\n    ) : (\n      // if there is no next button, show a 48x48 empty box to align the 2 elements on the left\n      <div style={{ width: '48px', height: '48px' }}></div>\n    )\n  }\n\n  render() {\n    const { name_zh, year, code, councilors, district, stations } = this.props\n    const councilor = councilors.length > 0 ? councilors[0] : {}\n    return (\n      <Container>\n        <InnerContainer border={0} color=\"primary.minor\">\n          <SeperatedRow>\n            {this.renderPrevElectionButton(year)}\n            <YearText variant=\"button\" gutterBottom>\n              {year}\n            </YearText>\n            {this.renderNextElectionButton(year)}\n          </SeperatedRow>\n          <RegionText>{district.dc_name_zh}</RegionText>\n          <Typography variant=\"h3\">{name_zh}</Typography>\n          <CodeText>{code}</CodeText>\n          <StyledDivier />\n          <SeperatedRow>\n            <Typography variant=\"h6\">區議員</Typography>\n            <Typography>\n              {councilor.person ? councilor.person.name_zh : '-'}\n            </Typography>\n          </SeperatedRow>\n          <SeperatedRow>\n            <Typography variant=\"h6\">政治聯繫</Typography>\n            <Typography>{councilor.political_affiliation || '-'}</Typography>\n          </SeperatedRow>\n          <SeperatedRow>\n            <Typography variant=\"h6\">投票站</Typography>\n            {stations.map((station, index) => (\n              <Typography key={index} variant=\"subtitle2\">\n                {station.name_zh}\n              </Typography>\n            ))}\n          </SeperatedRow>\n        </InnerContainer>\n      </Container>\n    )\n  }\n}\n\nexport default DistrictCard\n","import React, { Component } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport PropTypes from 'prop-types'\n\nconst Container = styled.div`\n   {\n    padding: 16px;\n  }\n`\n\nclass MainAreas extends Component {\n  static propTypes = {\n    areas: PropTypes.array.isRequired,\n  }\n\n  render() {\n    const { areas } = this.props\n    return (\n      <Container>\n        <Typography variant=\"h6\" gutterBottom>\n          主要屋邨 / 地區\n        </Typography>\n        <Box display=\"flex\" flexWrap=\"wrap\" alignContent=\"flex-start\">\n          {areas.map((area, index) => (\n            <Box mr={1} key={index}>\n              <Typography variant=\"body1\">\n                {`${Object.keys(area)[0]} ${area[Object.keys(area)[0]]}`}\n              </Typography>\n            </Box>\n          ))}\n        </Box>\n      </Container>\n    )\n  }\n}\n\nexport default MainAreas\n","import React from 'react'\nimport { lighten, makeStyles, withStyles } from '@material-ui/core/styles'\nimport LinearProgress from '@material-ui/core/LinearProgress'\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n  },\n  margin: {\n    margin: theme.spacing(1),\n  },\n}))\n\nconst BorderLinearProgress = withStyles({\n  root: {\n    height: 20,\n    width: 100,\n    backgroundColor: props => lighten(props.bgcolor, 0.5),\n  },\n  bar: {\n    borderRadius: 20,\n    backgroundColor: props => props.bgcolor,\n  },\n})(LinearProgress)\n\nexport default function CustomizedProgressBars(props) {\n  const classes = useStyles()\n  return (\n    <React.Fragment>\n      <BorderLinearProgress\n        className={classes.margin}\n        variant=\"determinate\"\n        color=\"secondary\"\n        value={props.value}\n        bgcolor={props.color}\n      />\n    </React.Fragment>\n  )\n}\n","import React, { Component } from 'react'\nimport Divider from '@material-ui/core/Divider'\nimport styled, { css } from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport PropTypes from 'prop-types'\nimport CustomizedProgressBars from '../../components/BorderLinearProgress'\nimport Avatar from '@material-ui/core/Avatar'\nimport { bps } from 'ui/responsive'\n\nconst fontBoldStyle = css`\n  font-family: 'PingFangTC-Medium';\n  font-style: normal;\n  font-stretch: normal;\n  line-height: normal;\n  letter-spacing: normal;\n`\n\nconst fontNormalStyle = css`\n  font-family: 'PingFangTC';\n  font-style: normal;\n  font-stretch: normal;\n  line-height: normal;\n  letter-spacing: normal;\n`\n\nconst OvalButton = styled.div`\n  width: 95px;\n  height: 95px;\n  background: url('/static/images/electedIcon.png');\n`\n\nconst Container = styled.div`\n   {\n    padding: 0px 15px 100px 25px;\n  }\n`\n\nconst RowsContainer = styled.div`\n   {\n    margin-top: 30px;\n    border-radius: 8px;\n    box-shadow: 0 2px 10px 0 rgba(0, 0, 0, 0.2);\n    background-color: #ffffff;\n    ${bps.down('sm')} {\n      margin-left: 10px;\n      margin-right: 10px;\n    }\n  }\n`\n\nconst FlexRowContainer = styled(Box)`\n  && {\n    display: flex;\n    flex-wrap: wrap;\n    align-content: flex-start;\n    width: 1440px;\n    margin: auto;\n    cursor: pointer;\n    ${bps.down('sm')} {\n      width: 1440px;\n      margin: auto;\n    }\n  }\n`\n\nconst FlexColumn = styled(Box)`\n  && {\n    height: 149px;\n    align-items: center;\n    display: flex;\n    padding-left: 40px;\n    ${bps.down('sm')} {\n      height: 80px;\n    }\n  }\n`\n\nconst AvatarColumn = styled(FlexColumn)`\n  && {\n    width: 100px;\n    ${bps.down('sm')} {\n      width: 100%;\n      height: 149px;\n    }\n  }\n`\n\nconst NameColumn = styled(FlexColumn)`\n  && {\n    width: 200px;\n    ${bps.down('sm')} {\n      width: 100%;\n    }\n  }\n`\n\nconst PoliticalColumn = styled(FlexColumn)`\n  && {\n    flex-direction: column;\n    justify-content: center;\n    align-items: flex-start;\n    width: 180px;\n    ${bps.down('sm')} {\n      width: 100%;\n    }\n  }\n`\n\nconst StyledDivier = styled(Divider)`\n  && {\n    margin-left: 30px;\n    margin-right: 30px;\n    ${bps.down('sm')} {\n      margin-top: 30px;\n    }\n  }\n`\nconst CandidateListTitle = styled.div`\n   {\n    ${fontBoldStyle}\n    font-size: 32px;\n    font-weight: 600;\n    color: #333333;\n  }\n`\n\nconst CandidateName = styled.div`\n   {\n    ${fontBoldStyle}\n    font-size: 24px;\n    font-weight: 500;\n    color: #333333;\n  }\n`\n\nconst BlueVoteContainer = styled.div`\n   {\n    ${fontBoldStyle}\n    font-size: 18px;\n    font-weight: 500;\n    color: #306ece;\n  }\n`\n\nconst RedVoteContainer = styled.div`\n   {\n    ${fontBoldStyle}\n    font-size: 18px;\n    font-weight: 500;\n    color: #f6416e;\n  }\n`\n\nconst ContentHeader = styled.div`\n   {\n    ${fontBoldStyle}\n    font-size: 18px;\n    font-weight: 600;\n    color: #4a4a4a;\n  }\n`\n\nconst Content = styled.div`\n   {\n    ${fontNormalStyle}\n    font-size: 18px;\n    color: #4a4a4a;\n  }\n`\n\nclass CandidateList extends Component {\n  static propTypes = {\n    candidates: PropTypes.array.isRequired,\n    year: PropTypes.number.isRequired,\n    code: PropTypes.string.isRequired,\n  }\n\n  // todo: use ENV_VAR\n  homeUrl = 'https://cswbrian.github.io/district-councils-dashboard/'\n\n  render() {\n    const { candidates } = this.props\n\n    return (\n      <Container maxWidth=\"lg\">\n        <CandidateListTitle>議員候選人</CandidateListTitle>\n        <RowsContainer>\n          {candidates\n            .sort((a, b) => a.candidate_number - b.candidate_number)\n            .map((candidate, index) => (\n              <React.Fragment key={index}>\n                {index > 0 ? <StyledDivier /> : null}\n                <FlexRowContainer\n                  style={{ width: '100%' }}\n                  key={candidate.candidate_number}\n                  onClick={() => {\n                    this.props.handleCandidateSelected(candidate.person.id)\n                  }}\n                >\n                  <AvatarColumn>\n                    <Avatar\n                      src={`${this.homeUrl}/static/images/avatar/${candidate.person.uuid}.jpg`}\n                      imgProps={{\n                        onError: e => {\n                          e.target.src =\n                            this.homeUrl + '/static/images/avatar/default.png'\n                        },\n                      }}\n                      style={{\n                        width: '66px',\n                        height: '88px',\n                        borderRadius: 0,\n                      }}\n                    ></Avatar>\n                  </AvatarColumn>\n                  <NameColumn p={1}>\n                    <CandidateName>\n                      {candidate.candidate_number !== 0 &&\n                        `${candidate.candidate_number}. `}\n                      {candidate.person.name_zh || candidate.person.name_en}\n                    </CandidateName>\n                  </NameColumn>\n                  <PoliticalColumn>\n                    <ContentHeader>陣營</ContentHeader>\n                    {'\\n'}\n                    <Content>{candidate.camp}</Content>\n                  </PoliticalColumn>\n                  <PoliticalColumn>\n                    <ContentHeader>政治聯繫</ContentHeader>\n                    {'\\n'}\n                    <Content>{candidate.political_affiliation}</Content>\n                  </PoliticalColumn>\n                  {candidate.candidate_number !== 0 && (\n                    <>\n                      <PoliticalColumn>\n                        {candidate.is_won && (\n                          <BlueVoteContainer>\n                            {`${candidate.votes}票 (${candidate.vote_percentage}%)`}\n                          </BlueVoteContainer>\n                        )}\n                        {!candidate.is_won && (\n                          <RedVoteContainer>\n                            {`${candidate.votes}票 (${candidate.vote_percentage}%)`}\n                          </RedVoteContainer>\n                        )}\n                      </PoliticalColumn>\n                      <FlexColumn>\n                        <ContentHeader style={{ color: '#9b9b9b' }}>\n                          得票率\n                        </ContentHeader>\n                        <Content>\n                          <CustomizedProgressBars\n                            value={parseFloat(candidate.vote_percentage)}\n                            color={candidate.is_won ? '#306ece' : '#f6416e'}\n                          />\n                        </Content>\n                      </FlexColumn>\n                    </>\n                  )}\n                  <FlexColumn>\n                    {candidate.is_won && <OvalButton />}\n                    {!candidate.is_won && (\n                      <div\n                        style={{\n                          width: '95px',\n                          height: '95px',\n                        }}\n                      ></div>\n                    )}\n                  </FlexColumn>\n                </FlexRowContainer>\n              </React.Fragment>\n            ))}\n        </RowsContainer>\n      </Container>\n    )\n  }\n}\n\nexport default CandidateList\n","import React, { Component } from 'react'\nimport zingchart from 'zingchart'\n\n// MUST define modulesdir for VoterTurnoutChart\n// https://www.zingchart.com/docs/api/modules/standard/#modules__modules_list\nzingchart.MODULESDIR = 'https://cdn.zingchart.com/modules/'\n\nconst chartJSON = chartData => {\n  const data = { male: [], female: [] }\n\n  Object.values(chartData.data).forEach(value => {\n    data['male'].push(value['male'])\n    data['female'].push(value['female'])\n  })\n\n  // TODO: replace this hacky code\n  const titles = Object.keys(chartData.data).map(\n    key =>\n      key\n        .split('_')\n        .filter(val => !isNaN(parseInt(val)))\n        .join('-') + '歲'\n  )\n  titles[titles.length - 1] += '及以上'\n  // Demo\n  // https://codepen.io/pen/?editors=1010\n\n  return {\n    type: 'bar',\n    stacked: true,\n    'stack-type': 'normal',\n    title: {\n      text: '投票人士年齡分布',\n      x: '40px',\n      y: '5px',\n      align: 'left',\n    },\n    subtitle: {\n      text: '佔全部',\n      x: '175px',\n      y: '5px',\n      align: 'left',\n      bold: false,\n      'font-size': '10px',\n      'font-color': '#7E7E7E',\n      'background-color': 'none',\n    },\n    plot: {\n      'bar-width': '25px',\n      'hover-state': {\n        visible: false,\n      },\n      animation: {\n        delay: 300,\n        sequence: 1,\n      },\n      valueBox: {\n        text: '%total',\n        rules: [\n          {\n            rule: '%stack-top == 0',\n            visible: 0,\n          },\n        ],\n        decimals: 0,\n      },\n    },\n    'scale-x': {\n      values: titles,\n      tick: {\n        visible: false,\n      },\n      guide: {\n        visible: false,\n      },\n      item: {\n        'font-color': '#8B8B8B',\n      },\n    },\n    'scale-y': {\n      short: true,\n      'line-color': '#7E7E7E',\n      tick: {\n        visible: false,\n      },\n      guide: {\n        'line-style': 'solid',\n      },\n      item: {\n        'font-color': '#8B8B8B',\n      },\n    },\n    series: [\n      {\n        values: data.male,\n        'background-color': '#003f5c',\n      },\n      {\n        values: data.female,\n        'background-color': '#ff6361',\n      },\n    ],\n    tooltip: {\n      visible: false,\n    },\n  }\n}\n\nclass VoterTurnoutChart extends Component {\n  componentDidMount() {\n    zingchart.render({\n      id: this.props.id,\n      // data: this.props.data,\n      data: chartJSON(this.props.data),\n    })\n  }\n\n  //Used to check the values being passed in to avoid unnecessary changes.\n  shouldComponentUpdate(nextProps, nextState) {\n    //Lazy object comparison\n    return !(JSON.stringify(nextProps.data) === JSON.stringify(this.props.data))\n  }\n\n  componentWillUpdate(nextProps) {\n    zingchart.exec(this.props.id, 'setdata', {\n      data: chartJSON(nextProps.data), //nextProps.data,\n    })\n  }\n\n  render() {\n    return (\n      <div\n        id={this.props.id}\n        style={{\n          width: this.props.width || '100%',\n          height: this.props.height || '450px',\n        }}\n      ></div>\n    )\n  }\n}\n\nexport default VoterTurnoutChart\n","import React, { Component } from 'react'\nimport * as d3 from 'd3'\n\n/**\n * Idea from https://gist.github.com/XavierGimenez/8070956\n */\n\nclass WaffleChart extends Component {\n  drawChart(data) {\n    var total = 0\n    var width,\n      height,\n      widthSquares = 20,\n      heightSquares = 20,\n      squareSize = 20,\n      squareValue = 0,\n      gap = 1,\n      theData = []\n    var color = d3.scaleOrdinal(d3.schemeCategory10)\n    //total\n\n    total = d3.sum(data, function(d) {\n      return d.population\n    })\n    //value of a square\n    squareValue = total / (widthSquares * heightSquares)\n    //remap data\n    data.forEach(function(d, i) {\n      d.population = +d.population\n      d.units = Math.round(d.population / squareValue)\n      d.percentage = Math.floor((d.population * 100) / total)\n      theData = theData.concat(\n        Array(d.units + 1)\n          .join(1)\n          .split('')\n          .map(function() {\n            return {\n              squareValue: squareValue,\n              units: d.units,\n              population: d.population,\n              percentage: d.percentage,\n              groupIndex: i,\n            }\n          })\n      )\n    })\n    width = squareSize * widthSquares + widthSquares * gap + 25\n    height = squareSize * heightSquares + heightSquares * gap + 25\n    d3.select('#waffle')\n      .append('svg')\n      .attr('width', width)\n      .attr('height', height)\n      .append('g')\n      .selectAll('div')\n      .data(theData)\n      .enter()\n      .append('rect')\n      .attr('width', squareSize)\n      .attr('height', squareSize)\n      .attr('fill', function(d) {\n        return color(d.groupIndex)\n      })\n      .attr('y', function(d, i) {\n        // const row = i % heightSquares;\n        // return (heightSquares * squareSize) - ((row * squareSize) + (row * gap))\n        const row = Math.floor(i / widthSquares)\n        return row * squareSize + row * gap\n      })\n      .attr('x', function(d, i) {\n        //group n squares for column\n        // const col = Math.floor(i / heightSquares);\n        // return (col * squareSize) + (col * gap);\n        const col = i % widthSquares\n        return col * squareSize + col * gap\n      })\n      .append('title')\n      .text(function(d, i) {\n        return (\n          data[d.groupIndex].name +\n          ' | ' +\n          d.population +\n          ' , ' +\n          d.percentage +\n          '%'\n        )\n      })\n    //add legend with categorical data\n    var legend = d3\n      .select('#legend')\n      .append('svg')\n      .attr('width', 300)\n      .attr('height', 200)\n      .append('g')\n      .selectAll('div')\n      .data(data)\n      .enter()\n      .append('g')\n      .attr('transform', function(d, i) {\n        return 'translate(0,' + i * 20 + ')'\n      })\n    legend\n      .append('rect')\n      .attr('width', 18)\n      .attr('height', 18)\n      .style('fill', function(d, i) {\n        return color(i)\n      })\n    legend\n      .append('text')\n      .attr('x', 25)\n      .attr('y', 13)\n      .text(function(d) {\n        return d.name\n      })\n    //add value of a unit square\n    var legend2 = d3\n      .select('#legend')\n      .select('svg')\n      .append('g')\n      .attr('transform', 'translate(200,0)')\n    legend2\n      .append('text')\n      .attr('y', '14')\n      .attr('font-size', '18px')\n      .text('Total: ' + total)\n      .attr('fill', '#444444')\n  }\n\n  componentDidMount() {\n    this.drawChart(this.props.data)\n  }\n\n  render() {\n    return (\n      <>\n        <div id=\"waffle\"></div>\n\n        <div id=\"legend\"></div>\n      </>\n    )\n  }\n}\n\nexport default WaffleChart\n","import React, { Component } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport PropTypes from 'prop-types'\nimport gql from 'graphql-tag'\nimport { Query } from 'react-apollo'\nimport VoterTurnoutChart from './VoterTurnoutChart'\nimport WaffleChart from '../charts/WaffleChart'\n\n// TODO: change this to dcd data\nconst QUERY_FETCH_VOTES = gql`\n  query($year: Int!, $code: String!) {\n    dc_constituencies(where: { year: { _eq: $year }, code: { _eq: $code } }) {\n      candidates_aggregate {\n        aggregate {\n          sum {\n            votes\n          }\n        }\n      }\n      candidates {\n        votes\n        person {\n          name_zh\n          name_en\n        }\n      }\n      vote_stat {\n        total_votes\n        total_voters\n        total_voted_voters\n        population_excluded_foreign_worker\n        population_excluded_foreign_worker_lte_age_15\n        population_excluded_foreign_worker_lte_age_20\n      }\n      station_stats {\n        station_code\n        name_en\n        name_zh\n        votes {\n          votes\n          age\n          gender\n        }\n      }\n    }\n  }\n`\nconst Container = styled.div`\n   {\n    padding: 0px 15px 100px 25px;\n  }\n`\n\nconst getDataForWaffleChart = (voteStat, candidates) => {\n  const {\n    total_votes,\n    total_voters,\n    total_voted_voters,\n    population_excluded_foreign_worker,\n    population_excluded_foreign_worker_lte_age_15,\n    // population_excluded_foreign_worker_lte_age_20\n  } = voteStat\n\n  // check first the data\n  // TODO: the data should be good enough to remove this checking\n  if (\n    population_excluded_foreign_worker_lte_age_15 < total_voters ||\n    total_voters === 0 ||\n    total_voted_voters === 0\n  ) {\n    return []\n  }\n\n  const voteStats = [\n    {\n      name: '不能投票',\n      // population: population_excluded_foreign_worker - population_excluded_foreign_worker_lte_age_15,\n      population: population_excluded_foreign_worker - total_voters,\n    },\n    {\n      name: '沒有投票',\n      population:\n        population_excluded_foreign_worker_lte_age_15 - total_voted_voters,\n      // total_votes - total_voted_voters = registered but didn't vote?\n    },\n    {\n      name: '投票失效',\n      population: total_voted_voters - total_votes,\n      // total_votes - total_voted_voters = registered but didn't vote?\n    },\n  ]\n\n  candidates.forEach(({ votes, person: { name_zh, name_en } }) => {\n    voteStats.push({\n      name: `投給${name_zh || name_en}`,\n      population: votes,\n      // total_votes - total_voted_voters = registered but didn't vote?\n    })\n  })\n\n  return voteStats\n}\n\nclass MainAreas extends Component {\n  static propTypes = {\n    year: PropTypes.number.isRequired,\n    code: PropTypes.string.isRequired,\n    district: PropTypes.object.isRequired,\n  }\n\n  render() {\n    const { year, code } = this.props\n    return (\n      <Query\n        query={QUERY_FETCH_VOTES}\n        variables={{ year: parseInt(year, 10), code }}\n      >\n        {({ loading, error, data }) => {\n          if (loading) return null\n          if (error) return `Error! ${error}`\n          const { candidates, vote_stat } = data.dc_constituencies[0]\n\n          let voteStats = []\n          if (vote_stat) {\n            voteStats = getDataForWaffleChart(vote_stat, candidates)\n          }\n\n          const stats = data.dc_constituencies[0].station_stats\n          const barVote = { data: {} }\n          barVote.total = stats.reduce((acc, cur) => {\n            const sub_total = cur.votes.reduce((acc, cur) => {\n              if (typeof barVote.data[cur.age] === 'undefined') {\n                barVote.data[cur.age] = {}\n              }\n              if (typeof barVote.data[cur.age][cur.gender] === 'undefined') {\n                barVote.data[cur.age][cur.gender] = 0\n              }\n              barVote.data[cur.age][cur.gender] += cur.votes\n              return acc + cur.votes\n            }, 0)\n            return acc + sub_total\n          }, 0)\n          return (\n            <Container>\n              <Typography variant=\"h4\">人口資料</Typography>\n              <VoterTurnoutChart\n                id={`${year}_${code}_voter_turnout`}\n                data={barVote}\n              />\n              {voteStats.length > 0 ? (\n                <WaffleChart\n                  id={`${year}_${code}_voter_treemap`}\n                  data={voteStats}\n                />\n              ) : (\n                ''\n              )}\n            </Container>\n          )\n        }}\n      </Query>\n    )\n  }\n}\n\nexport default MainAreas\n","// TODO: split this\nimport gql from 'graphql-tag'\n\nconst CONSTITUENCIES_DATA = `\nname_zh\nname_en\ndistrict {\n  dc_name_en\n  dc_name_zh\n  area_name_en\n  area_name_zh\n}\ncode\ndeviation_percentage\nexpected_population\nmain_areas\nvote_stats {\n  count\n  type\n  subtype\n  category_1\n  category_2\n}\nstations {\n  station_code\n  name_en\n  name_zh\n  location\n}\ntags {\n  tag\n}\ncouncilors {\n  political_affiliation\n  person {\n    id\n    uuid\n    name_zh\n    name_en\n  }\n}\ncandidates {\n  candidate_number\n  political_affiliation\n  camp\n  person {\n    id\n    uuid\n    name_zh\n    name_en\n  }\n  vote_percentage\n  votes\n  is_won\n}\n`\n\nexport const QUERY_CONSTITUENCIES = gql`\nquery($year: Int!, $code: String!) {\n  dcd_constituencies(where: { year: { _eq: $year }, code: { _eq: $code } }) {\n    ${CONSTITUENCIES_DATA}\n    predecessors {\n      predecessor {\n        ${CONSTITUENCIES_DATA}\n      }\n    }\n  }  \n}\n`\n\nexport const QUERY_CONSTITUENCY_STATS = gql`\n  query($year: Int!, $code: String!) {\n    dcd_constituencies(where: { year: { _eq: $year }, code: { _eq: $code } }) {\n      vote_stats {\n        count\n        type\n        subtype\n        category_1\n        category_2\n      }\n    }\n  }\n`\n","import React, { Component } from 'react'\nimport Box from '@material-ui/core/Box'\nimport OLMap from '../../components/OLMap'\nimport { Query } from 'react-apollo'\nimport DistrictCard from 'components/district/DistrictCard'\nimport MainAreas from 'components/district/MainAreas'\nimport CandidateList from 'components/district/CandidateList'\nimport Metrics from 'components/district/Metrics'\nimport styled from 'styled-components'\nimport { bps } from 'ui/responsive'\n\nimport { QUERY_CONSTITUENCIES } from 'queries/gql'\n\nconst FullWidthBox = styled(Box)`\n  && {\n    padding-top: 4rem;\n    width: 100%;\n  }\n`\n\nconst LowerBackgroundContainer = styled(Box)`\n  && {\n    width: 100vw;\n    position: relative;\n    margin-left: -50vw;\n    left: 50%;\n    background-color: #fafafa;\n  }\n`\n\nconst FlexRowContainer = styled(Box)`\n  && {\n    display: flex;\n    flex-wrap: wrap;\n    align-content: flex-start;\n    ${bps.up('md')} {\n      width: 100%;\n    }\n\n    ${bps.up('lg')} {\n      width: 1440px;\n    }\n    margin: auto;\n  }\n`\n\nconst DistrictCardContainer = styled(Box)`\n  && {\n    padding-left: 30px;\n    margin: 0px;\n    width: 400px;\n    height: 400px;\n\n    ${bps.down('md')} {\n      margin: 10px;\n      width: 100%;\n      padding: 0px;\n    }\n  }\n`\n\nclass DistrictPage extends Component {\n  shouldComponentUpdate(nextProps, nextState) {\n    //  if (this.props.route.path === nextProps.route.path) return false;\n    return true\n  }\n\n  handleCandidateSelected = candidateId => {\n    this.props.history.push(`/profile/${candidateId}`)\n  }\n\n  handleChangeDistrict = (year, code) => {\n    if (!year || !code) return\n    this.props.history.push(`/district/${year}/${code}`)\n  }\n\n  onPrevElection() {\n    const {\n      match: {\n        params: { year, code },\n      },\n    } = this.props\n    this.props.history.push(`/district/${parseInt(year, 10) - 4}/${code}`)\n  }\n\n  onNextElection() {\n    const {\n      match: {\n        params: { year, code },\n      },\n    } = this.props\n    this.props.history.push(`/district/${parseInt(year, 10) + 4}/${code}`)\n  }\n\n  render() {\n    const {\n      match: {\n        params: { year, code },\n      },\n    } = this.props\n\n    return (\n      <>\n        <FlexRowContainer>\n          <Box\n            width={{ sm: '100%', md: '960px' }}\n            height={{ sm: '300px', md: '400px' }}\n          >\n            <OLMap\n              year={year}\n              code={code}\n              changeDistrict={this.handleChangeDistrict}\n            />\n          </Box>\n          <Query query={QUERY_CONSTITUENCIES} variables={{ year, code }}>\n            {({ loading, error, data }) => {\n              if (loading) return null\n              if (error) return `Error! ${error}`\n              const district = data.dcd_constituencies[0]\n              return (\n                <>\n                  <DistrictCardContainer>\n                    <DistrictCard\n                      {...district}\n                      year={parseInt(year, 10)}\n                      code={code}\n                      onNextElection={this.onNextElection.bind(this)}\n                      onPrevElection={this.onPrevElection.bind(this)}\n                    />\n                  </DistrictCardContainer>\n                  <FullWidthBox>\n                    <MainAreas areas={district.main_areas || []} />\n                  </FullWidthBox>\n                  <LowerBackgroundContainer>\n                    <FlexRowContainer>\n                      <FullWidthBox>\n                        <Metrics\n                          year={parseInt(year, 10)}\n                          code={code}\n                          district={district}\n                        ></Metrics>\n                      </FullWidthBox>\n                      <FullWidthBox>\n                        <CandidateList\n                          candidates={district.candidates}\n                          year={parseInt(year, 10)}\n                          code={code}\n                          handleCandidateSelected={this.handleCandidateSelected}\n                        />\n                      </FullWidthBox>\n                    </FlexRowContainer>\n                  </LowerBackgroundContainer>\n                </>\n              )\n            }}\n          </Query>\n        </FlexRowContainer>\n      </>\n    )\n  }\n}\n\nexport default DistrictPage\n","import React, { Component } from 'react'\nimport Map from 'ol/Map'\nimport View from 'ol/View'\nimport TileLayer from 'ol/layer/Tile'\nimport VectorLayer from 'ol/layer/Vector'\nimport VectorSource from 'ol/source/Vector'\nimport XYZ from 'ol/source/XYZ'\nimport GeoJSON from 'ol/format/GeoJSON'\nimport { Style, Stroke, Fill, Text } from 'ol/style'\nimport Select from 'ol/interaction/Select'\nimport styled from 'styled-components'\n\nimport dc2003 from '../data/DCCA_2003'\nimport dc2007 from '../data/DCCA_2007'\nimport dc2011 from '../data/DCCA_2011'\nimport dc2015 from '../data/DCCA_2015'\nimport dc2019 from '../data/DCCA_2019'\n\nconst MapContainer = styled.div`\n  width: 100%;\n  height: 100%;\n`\n\nconst regionStyle = new Style({\n  fill: new Fill({\n    color: 'rgba(255, 255, 255, 0.2)',\n  }),\n  stroke: new Stroke({\n    color: '#319FD3',\n    width: 1,\n  }),\n  text: new Text({\n    font: '16px Calibri,sans-serif',\n    fill: new Fill({\n      color: '#000',\n    }),\n    stroke: new Stroke({\n      color: '#fff',\n      width: 2,\n    }),\n  }),\n})\n\nconst highlightStyle = new Style({\n  stroke: new Stroke({\n    color: '#f00',\n    width: 1,\n  }),\n  fill: new Fill({\n    color: 'rgba(255,0,0,0.1)',\n  }),\n  text: new Text({\n    font: '16px Calibri,sans-serif',\n    fill: new Fill({\n      color: '#000',\n    }),\n    stroke: new Stroke({\n      color: '#f00',\n      width: 2,\n    }),\n  }),\n})\n\nclass DCCACompareMap extends Component {\n  featureOverlay\n  highlightedFeature\n\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  componentDidMount() {\n    const { year, code } = this.props\n    const dc = [dc2003, dc2007, dc2011, dc2015, dc2019].find(\n      d => d.name === `DCCA_${year}`\n    )\n    let isDCDataExist = dc ? true : false\n    let featuresLayer\n\n    if (isDCDataExist) {\n      this.featureSource = new VectorSource({\n        features: new GeoJSON().readFeatures(dc),\n      })\n\n      featuresLayer = new VectorLayer({\n        source: this.featureSource,\n        style: feature => {\n          regionStyle.getText().setText(feature.getProperties().CNAME)\n          return regionStyle\n        },\n      })\n    }\n\n    // create map object with feature layer\n    const layers = [\n      //default OSM layer\n      new TileLayer({\n        source: new XYZ({\n          url:\n            'https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}',\n        }),\n      }),\n    ]\n\n    if (isDCDataExist) {\n      layers.push(featuresLayer)\n    }\n\n    const map = new Map({\n      target: this.refs.mapContainer,\n      layers,\n      view: new View({\n        projection: 'EPSG:4326',\n        center: [114.2029, 22.3844],\n        zoom: 13,\n      }),\n    })\n\n    this.featureOverlay = new VectorLayer({\n      source: new VectorSource(),\n      map: map,\n      style: function(feature) {\n        highlightStyle.getText().setText(`${feature.getProperties().CNAME}`)\n        return highlightStyle\n      },\n    })\n\n    if (isDCDataExist) {\n      // Fit to feature\n      const features = this.featureSource.getFeatures()\n      for (let i = 0; i < features.length; i++) {\n        if (features[i].getProperties().CACODE === code) {\n          const extent = features[i].getGeometry().getExtent()\n          map.getView().fit(extent, {\n            size: map.getSize(),\n            padding: [10, 10, 10, 10],\n          })\n\n          this.highlightFeature(features[i])\n          break\n        }\n      }\n    }\n\n    this.setState({\n      map,\n      view: map.getView(),\n      featuresLayer: isDCDataExist ? featuresLayer : null,\n    })\n\n    const select = new Select()\n\n    if (select !== null) {\n      map.addInteraction(select)\n      select.on('select', this.handleMapClick)\n    }\n  }\n\n  highlightFeature(feature) {\n    if (this.highlightedFeature) {\n      this.featureOverlay.getSource().removeFeature(this.highlightedFeature)\n    }\n\n    this.featureOverlay.getSource().addFeature(feature)\n    this.highlightedFeature = feature\n  }\n\n  handleMapClick = e => {\n    const { year, changeDistrict } = this.props\n    const selectedFeature = e.target.getFeatures().item(0)\n\n    if (selectedFeature) {\n      this.highlightFeature(selectedFeature)\n      changeDistrict(year, selectedFeature.get('CACODE'))\n      this.state.map.getView().fit(selectedFeature.getGeometry().getExtent(), {\n        duration: 200,\n      })\n    }\n  }\n\n  render() {\n    return <MapContainer ref=\"mapContainer\"> </MapContainer>\n  }\n}\n\nexport default DCCACompareMap\n","import styled from 'styled-components'\nimport Card from '@material-ui/core/Card'\nimport React from 'react'\n\nconst StyledCard = styled(Card)`\n  && {\n    padding: 16px;\n    margin: 16px;\n    background-color: #fafafa;\n  }\n`\n\nexport const PlainCard = props => {\n  return <StyledCard {...props}>{props.children}</StyledCard>\n}\n","import styled from 'styled-components'\nimport Chip from '@material-ui/core/Chip'\nimport React from 'react'\n\nconst StyledChip = styled(Chip)`\n  && {\n    color: ${props => props.color};\n  }\n`\n\nexport const Tag = props => {\n  return (\n    <StyledChip\n      label={props.value}\n      variant=\"outlined\"\n      color=\"secondary\"\n      // avatar={<Avatar>MB</Avatar>}\n      onClick={props.handleClick}\n    />\n  )\n}\n","import styled from 'styled-components'\nimport { NavLink } from 'react-router-dom'\nimport Link from '@material-ui/core/Link'\n\nexport const UnstyledLink = styled(Link)`\n  text-decoration: unset;\n  color: unset;\n  font-style: unset;\n  cursor: pointer;\n`\n\nexport const UnstyledNavLink = styled(NavLink)`\n  text-decoration: unset;\n  color: unset;\n  font-style: unset;\n  cursor: pointer;\n`\n","import React, { Component } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport styled from 'styled-components'\nimport Grid from '@material-ui/core/Grid'\nimport Box from '@material-ui/core/Box'\nimport PropTypes from 'prop-types'\nimport Avatar from '@material-ui/core/Avatar'\nimport { PlainCard } from '../molecules/Card'\nimport { Tag } from '../atoms/Tag'\nimport { UnstyledNavLink } from '../atoms/UnstyledLink'\n\nconst StyledAvatar = styled(Avatar)`\n  && {\n    margin: 10px;\n    width: 60px;\n    height: 60px;\n  }\n`\n\nclass Councillor extends Component {\n  static propTypes = {\n    // areas: PropTypes.array.isRequired\n  }\n\n  homeUrl = 'https://cswbrian.github.io/district-councils-dashboard'\n\n  render() {\n    const { councilor } = this.props\n    return (\n      <UnstyledNavLink to={`/profile/${councilor.person.id}`}>\n        <PlainCard>\n          <Box display=\"flex\">\n            <Box flexGrow={1}>\n              <Typography variant=\"h6\" gutterBottom>\n                現任區議員\n              </Typography>\n            </Box>\n            <Box>\n              <Tag value=\"自動當選\" />\n            </Box>\n          </Box>\n\n          <Grid container wrap=\"nowrap\" spacing={0}>\n            <Grid item>\n              <StyledAvatar\n                src={`${this.homeUrl}/static/images/avatar/${councilor.person.uuid}.jpg`}\n                imgProps={{\n                  onError: e => {\n                    e.target.src =\n                      this.homeUrl + '/static/images/avatar/default.png'\n                  },\n                }}\n              />\n            </Grid>\n            <Grid item xs>\n              <Typography variant=\"h4\" gutterBottom>\n                {councilor.person.name_zh}\n              </Typography>\n              <Box display=\"flex\">\n                <Box pr={1} alignSelf=\"flex-end\">\n                  <Typography variant=\"body2\">報稱政治聯繫</Typography>\n                </Box>\n                <Box>\n                  <Typography variant=\"body1\">\n                    {councilor.political_affiliation}\n                  </Typography>\n                </Box>\n              </Box>\n            </Grid>\n          </Grid>\n        </PlainCard>\n      </UnstyledNavLink>\n    )\n  }\n}\n\nexport default Councillor\n","import styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport Typography from '@material-ui/core/Typography'\nimport Dialog from '@material-ui/core/Dialog'\nimport MuiDialogTitle from '@material-ui/core/DialogTitle'\nimport MuiDialogContent from '@material-ui/core/DialogContent'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport IconButton from '@material-ui/core/IconButton'\nimport CloseIcon from '@material-ui/icons/Close'\nimport React from 'react'\n\nconst StyledDialogTitle = styled(MuiDialogTitle)`\n  && {\n    padding: 16px;\n    min-width: 50%;\n  }\n`\nconst StyledDialogContent = styled(MuiDialogContent)`\n  && {\n    padding: 16px;\n    min-width: 50%;\n  }\n`\n\nconst DialogTitle = props => {\n  const { children, onClose } = props\n  return (\n    <StyledDialogTitle>\n      <Box display=\"flex\" alignItems=\"center\">\n        <Box flexGrow={1}>{children}</Box>\n        <Box>\n          {onClose ? (\n            <IconButton\n              aria-label=\"close\"\n              onClick={onClose}\n              style={{ padding: 0 }}\n            >\n              <CloseIcon />\n            </IconButton>\n          ) : null}\n        </Box>\n      </Box>\n    </StyledDialogTitle>\n  )\n}\n\nconst DialogContent = props => {\n  const { children } = props\n  return <StyledDialogContent>{children}</StyledDialogContent>\n}\n\nexport const PlainDialog = props => {\n  const { open, handleClose, title, content, actions } = props\n  return (\n    <Dialog\n      onClose={handleClose}\n      aria-labelledby=\"customized-dialog-title\"\n      open={open}\n    >\n      <DialogTitle id=\"customized-dialog-title\" onClose={handleClose}>\n        {title}\n      </DialogTitle>\n      <DialogContent>{content}</DialogContent>\n      <DialogActions>{actions}</DialogActions>\n    </Dialog>\n  )\n}\n","import React from 'react'\nimport { PlainDialog } from '../molecules/Dialog'\nimport Box from '@material-ui/core/Box'\nimport Typography from '@material-ui/core/Typography'\nimport { PlainCard } from '../molecules/Card'\nimport AddIcon from '@material-ui/icons/Add'\n\nexport default function CustomizedDialogs() {\n  const [open, setOpen] = React.useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  return (\n    <>\n      <PlainCard onClick={handleClickOpen}>\n        <Box display=\"flex\">\n          <Box flexGrow={1}>\n            <Typography variant=\"h6\" gutterBottom>\n              現任區議員\n            </Typography>\n\n            <Typography variant=\"h6\">\n              此為新設選區，按此選擇現任區議員\n            </Typography>\n          </Box>\n          <Box>\n            <AddIcon style={{ fontSize: 48 }} />\n          </Box>\n        </Box>\n      </PlainCard>\n      <PlainDialog\n        open={open}\n        handleClose={handleClose}\n        title=\"此選區於2019年設立\"\n        content=\"content\"\n        actions=\"actions\"\n      ></PlainDialog>\n    </>\n  )\n}\n","import React, { Component } from 'react'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\nimport Typography from '@material-ui/core/Typography'\nimport Paper from '@material-ui/core/Paper'\nimport IconButton from '@material-ui/core/IconButton'\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward'\nimport { Tag } from '../atoms/Tag'\n\nconst Container = styled(Paper)`\n  && {\n    width: 100%;\n    padding: 16px;\n    box-shadow: none;\n  }\n`\n\nclass DCCAOverview extends Component {\n  static propTypes = {\n    // year: PropTypes.number.isRequired,\n    // code: PropTypes.string.isRequired,\n    // name_zh: PropTypes.string.isRequired,\n    // name_en: PropTypes.string.isRequired,\n    // onPrevElection: PropTypes.func.isRequired,\n    // onNextElection: PropTypes.func.isRequired,\n    // candidates: PropTypes.array.isRequired,\n  }\n\n  renderPrevElectionButton(year) {\n    return year > 1999 ? (\n      <IconButton aria-label=\"arrow_back\" onClick={this.props.onPrevElection}>\n        <ArrowBackIcon />\n      </IconButton>\n    ) : (\n      // if there is no next button, show a 48x48 empty box to align the 2 elements on the right\n      <div style={{ width: '48px', height: '48px' }}></div>\n    )\n  }\n\n  renderNextElectionButton(year) {\n    const nextElectionYear = year + 4\n    const currentYear = new Date().getFullYear()\n    return nextElectionYear <= currentYear ? (\n      <IconButton\n        aria-label=\"arrow_forward\"\n        onClick={this.props.onNextElection}\n      >\n        <ArrowForwardIcon />\n      </IconButton>\n    ) : (\n      // if there is no next button, show a 48x48 empty box to align the 2 elements on the left\n      <div style={{ width: '48px', height: '48px' }}></div>\n    )\n  }\n\n  render() {\n    const { name_zh, year, code, dc_name_zh, tags, voterData } = this.props\n\n    const new_voters_percentage = (\n      (100 * voterData.aggregations.new_voters) /\n      voterData.aggregations.all_voters\n    ).toFixed(2)\n    return (\n      <Container>\n        <Box display=\"flex\">\n          <Box flexGrow={1}>\n            <Typography variant=\"h6\" gutterBottom>\n              {year} {dc_name_zh}\n            </Typography>\n          </Box>\n          <Box>\n            {tags.map((tag, index) => (\n              <Tag key={index} value={tag.tag} />\n            ))}\n          </Box>\n        </Box>\n        <Typography variant=\"h3\" style={{ display: 'inline-block' }}>\n          {name_zh}\n        </Typography>\n        <Typography\n          variant=\"h5\"\n          style={{ display: 'inline-block', marginLeft: '8px' }}\n        >\n          {code}\n        </Typography>\n        <Typography variant=\"h6\">\n          選民人數 {voterData.aggregations.all_voters}{' '}\n          {`(${\n            new_voters_percentage > 0 ? '+' : '-'\n          }${new_voters_percentage}%)`}\n        </Typography>\n      </Container>\n    )\n  }\n}\n\nexport default DCCAOverview\n","import React, { useRef, useState, useEffect, useLayoutEffect } from 'react'\nimport * as d3 from 'd3'\nimport _ from 'lodash'\n\nexport default props => {\n  const [dimensions, setDimensions] = useState({ width: 0, height: 0 })\n\n  const d3Container = useRef(null)\n\n  const drawChart = data => {\n    if (dimensions.width === 0) {\n      return\n    }\n\n    const color = d3.scaleOrdinal().range(['#ca0020', '#f4a582'])\n\n    const margin = { top: 20, right: 20, bottom: 30, left: 40 }\n\n    const width = dimensions.width - margin.left - margin.right\n    const height = dimensions.width - margin.top - margin.bottom\n\n    const max = _.maxBy(data, r => _.max(r.values)).values[0]\n\n    const svg = d3\n      .select(d3Container.current)\n      .attr('width', width + margin.left + margin.right)\n      .attr('height', height + margin.top + margin.bottom)\n\n    svg.selectAll('g').remove()\n    const chart = svg\n      .append('g')\n      .attr('transform', `translate(${margin.left}, ${margin.top})`)\n\n    const yScale = d3\n      .scaleLinear()\n      .range([height, 0])\n      .domain([0, max + 100]) // space for showing legend\n\n    chart.append('g').call(d3.axisLeft(yScale))\n\n    const x0 = d3\n      .scaleBand()\n      .range([0, width])\n      .domain(data.map(s => s.label))\n      .padding(0.1)\n\n    const x1 = d3\n      .scaleBand()\n      .domain(d3.range(2))\n      .range([0, x0.bandwidth() - 10])\n\n    chart\n      .append('g')\n      .attr('transform', `translate(0, ${height})`)\n      .call(d3.axisBottom(x0))\n\n    // draw the lines\n    chart\n      .append('g')\n      .attr('class', 'grid')\n      .call(\n        d3\n          .axisLeft()\n          .scale(yScale)\n          .tickSize(-width, 0, 0)\n          .tickFormat('')\n      )\n\n    const slice = svg\n      .selectAll('.slice')\n      .data(data)\n      .enter()\n      .append('g')\n      .attr('class', 'g')\n      .attr(\n        'transform',\n        d => `translate(${x0(d.label) + margin.left},${margin.top})`\n      )\n\n    slice\n      .selectAll('rect')\n      .data(d => d.values)\n      .enter()\n      .append('rect')\n      .attr('width', x1.bandwidth())\n      .attr('x', (d, i) => x1(i))\n      .attr('y', d => yScale(d))\n      .attr('height', d => height - yScale(d))\n      .style('fill', (d, i) => color(i))\n\n    //Legend\n    const legend = svg\n      .selectAll('.legend')\n      .data(data[0].labels)\n      .enter()\n      .append('g')\n      .attr('class', 'legend')\n      .attr('transform', (d, i) => `translate(0, ${i * 20})`)\n\n    legend\n      .append('rect')\n      .attr('x', width)\n      .attr('width', 18)\n      .attr('height', 18)\n      .style('fill', function(d) {\n        return color(d)\n      })\n\n    legend\n      .append('text')\n      .attr('x', width - 6)\n      .attr('y', 9)\n      .attr('dy', '.35em')\n      .style('text-anchor', 'end')\n      .text(function(d) {\n        return d\n      })\n  }\n\n  useEffect(() => {\n    drawChart(props.data)\n  })\n\n  useLayoutEffect(() => {\n    if (d3Container.current) {\n      setDimensions({\n        width: d3Container.current.clientWidth,\n      })\n    }\n  }, [])\n\n  return (\n    <>\n      <svg\n        ref={d3Container}\n        style={{ height: dimensions.width, width: '100%' }}\n      ></svg>\n    </>\n  )\n}\n","import React from 'react'\nimport GroupedBarChart from 'components/charts/GroupedBarChart'\nimport { Query } from 'react-apollo'\nimport _ from 'lodash'\nimport { QUERY_CONSTITUENCY_STATS } from 'queries/gql'\n\nexport default props => {\n  const getDataForChat = voteStats => {\n    /**\n     * voteStats = [{\n     *  type: \"BY_GENDER_AGE\",\n     *  subtype: \"VOTERS/NEW_VOTERS\",\n     *  category_1: \"FEMALE/MALE\",\n     *  category_2: \"21-25\"\n     * }]\n     */\n\n    const data = _.values(_.groupBy(voteStats, stat => stat.category_2))\n    data.forEach(row => {\n      row.label = row[0].category_2\n      row.values = _.values(_.groupBy(row, r => r.subtype)).map(r =>\n        r.map(v => v.count).reduce((c, v) => c + v, 0)\n      )\n      row.values = [row.values[0] - row.values[1], row.values[0]]\n      row.labels = ['2018', '2019']\n    })\n\n    /**\n     * [{\n     *  label: \"21-22\",\n     *  values: [200, 159] // -> 2019 vs 2018\n     * }]\n     */\n\n    return data\n  }\n\n  return (\n    // TODO: support page other than battleground page\n    <Query\n      query={QUERY_CONSTITUENCY_STATS}\n      variables={{ year: 2019, code: props.code }}\n    >\n      {({ loading, error, data }) => {\n        if (loading) return null\n        if (error) return `Error! ${error}`\n        if (data.dcd_constituencies.length === 0) {\n          console.error(`cannot find constituency. code: ${props.code}`)\n          return `Error!`\n        }\n        // transform the data to desire format\n        const chartData = getDataForChat(data.dcd_constituencies[0].vote_stats)\n\n        return <GroupedBarChart data={chartData} />\n      }}\n    </Query>\n  )\n}\n","import React, { Component } from 'react'\nimport Box from '@material-ui/core/Box'\nimport DCCACompareMap from '../../components/DCCACompareMap'\nimport { Query } from 'react-apollo'\nimport MainAreas from 'components/district/MainAreas'\nimport Councillor from 'components/district/Councillor'\nimport CouncillorSelection from 'components/district/CouncillorSelection'\nimport DCCAOverview from 'components/district/DCCAOverview'\nimport Button from '@material-ui/core/Button'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport Collapse from '@material-ui/core/Collapse'\nimport _ from 'lodash'\nimport { QUERY_CONSTITUENCIES } from 'queries/gql'\nimport DistrictNewVoterChartContainer from 'components/DistrictNewVoterChartContainer'\n\nconst groupVoteStat = voteStats => {\n  const data = _.groupBy(voteStats, stat => stat.subtype)\n  data.aggregations = {\n    all_voters: data.VOTERS.map(v => v.count).reduce((c, v) => c + v, 0),\n    new_voters: data.NEW_VOTERS.map(v => v.count).reduce((c, v) => c + v, 0),\n  }\n  return data\n}\nclass BattleGroundPage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      showMap: false,\n    }\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    //  if (this.props.route.path === nextProps.route.path) return false;\n    return true\n  }\n\n  handleCandidateSelected = candidateId => {\n    this.props.history.push(`/profile/${candidateId}`)\n  }\n\n  handleChangeDistrict = (year, code) => {\n    if (!year || !code) return\n    this.props.history.push(`/district/${year}/${code}`)\n  }\n\n  onPrevElection() {\n    const {\n      match: {\n        params: { code },\n      },\n    } = this.props\n    this.props.history.push(`/district/2015/${code}`)\n  }\n\n  onNextElection() {\n    const {\n      match: {\n        params: { year, code },\n      },\n    } = this.props\n    this.props.history.push(`/district/${parseInt(year, 10) + 4}/${code}`)\n  }\n\n  render() {\n    const { showMap } = this.state\n    const {\n      match: {\n        params: { year = 2019, code },\n      },\n    } = this.props\n\n    return (\n      <>\n        <Query query={QUERY_CONSTITUENCIES} variables={{ year, code }}>\n          {({ loading, error, data }) => {\n            if (loading) return null\n            if (error) return `Error! ${error}`\n            const district = data.dcd_constituencies[0]\n            const last_district = district.predecessors[0].predecessor\n\n            console.log(data)\n\n            return (\n              <>\n                <DCCAOverview\n                  year={year}\n                  name_zh={district.name_zh}\n                  dc_name_zh={district.district.dc_name_zh}\n                  code={district.code}\n                  tags={district.tags}\n                  voterData={groupVoteStat(district.vote_stats)}\n                />\n                <Button onClick={() => this.setState({ showMap: !showMap })}>\n                  {showMap ? '隱藏地圖' : '顯示地圖'}\n                  <ExpandMoreIcon />\n                </Button>\n                <Collapse in={showMap}>\n                  <Box\n                    width={{ sm: '100%', md: '960px' }}\n                    height={{ sm: '300px', md: '400px' }}\n                  >\n                    <DCCACompareMap\n                      year={year}\n                      code={code}\n                      changeDistrict={this.handleChangeDistrict}\n                    />\n                  </Box>\n                </Collapse>\n                <MainAreas areas={district.main_areas || []} />\n                {district.predecessors && district.predecessors.length === 1 ? (\n                  <Councillor\n                    councilor={\n                      district.predecessors[0].predecessor.councilors[0]\n                    }\n                  />\n                ) : (\n                  <CouncillorSelection\n                    suggestDistricts={district.predecessors}\n                  />\n                )}\n                {/* Should show as a popup */}\n                <DistrictNewVoterChartContainer code={code} />\n                {/* <LowerBackgroundContainer>\n                      <FullWidthBox>\n                        <CandidateList\n                          candidates={district.candidates}\n                          year={parseInt(year, 10)}\n                          code={code}\n                          handleCandidateSelected={this.handleCandidateSelected}\n                        />\n                      </FullWidthBox>\n                  </LowerBackgroundContainer> */}\n              </>\n            )\n          }}\n        </Query>\n      </>\n    )\n  }\n}\n\nexport default BattleGroundPage\n","import { createMuiTheme } from '@material-ui/core/styles'\n\nexport const headingFontFamily = 'PingFangTC-Medium, sans-serif'\nexport const bodyFontFamily = 'PT Serif, sans-serif'\n\nexport const fontFamily = [\n  'PingFangTC',\n  'Noto Sans TC',\n  'sans-serif',\n  '-apple-system',\n  '\"Helvetica Neue\"',\n  'Arial',\n]\n\nexport const typography = {\n  useNextVariants: true,\n  fontSize: 16,\n  fontFamily: fontFamily.join(','),\n  h1: {\n    fontFamily: headingFontFamily,\n  },\n  h2: {\n    fontFamily: headingFontFamily,\n    fontSize: 50,\n    fontWeight: 500,\n  },\n  h3: {\n    fontFamily: headingFontFamily,\n    fontSize: 40,\n    fontWeight: 500,\n  },\n  h4: {\n    fontFamily: headingFontFamily,\n    fontSize: 30,\n    fontWeight: 500,\n  },\n  h5: {\n    fontFamily: headingFontFamily,\n    fontSize: 24,\n    fontWeight: 500,\n  },\n  h6: {\n    fontFamily: headingFontFamily,\n    fontSize: 18,\n    fontWeight: 500,\n  },\n  body1: {\n    fontFamily: bodyFontFamily,\n  },\n}\n\nexport default createMuiTheme({\n  typography,\n  palette: {\n    primary: {\n      light: '#ffffff',\n      main: '#000000',\n      dark: '#cccccc',\n    },\n    secondary: {\n      light: '#2c2c2c',\n      main: '#000000',\n      dark: '#000000',\n    },\n    background: {\n      default: '#ffffff',\n    },\n    button: {\n      primary: '#ffd731',\n      secondary: '#ffd731',\n    },\n  },\n})\n","import React, { Component } from 'react'\nimport { withStyles } from '@material-ui/core/styles'\nimport createMuiTheme from '../../ui/theme'\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider'\n\nconst theme = createMuiTheme\n\nconst styles = theme => ({\n  content: {},\n})\n\nclass NotFoundPage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  render() {\n    return (\n      <MuiThemeProvider theme={theme}>\n        TODO - <a href=\"https://notfound.collaction.hk/\">404</a>\n      </MuiThemeProvider>\n    )\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(NotFoundPage)\n","import DistrictNewVoterChartContainer from 'components/DistrictNewVoterChartContainer'\nimport React from 'react'\nimport styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\n\nconst FlexRowContainer = styled(Box)`\n  && {\n    width: 100%;\n  }\n`\n\nexport default props => {\n  return (\n    <>\n      <FlexRowContainer>\n        <DistrictNewVoterChartContainer code={'A01'} />\n      </FlexRowContainer>\n    </>\n  )\n}\n","import { createMuiTheme } from '@material-ui/core/styles'\n\nexport const headingFontFamily = 'Noto Sans TC, sans-serif'\nexport const bodyFontFamily = 'Noto Sans TC, sans-serif'\n\nexport const fontFamily = [\n  'Noto Sans TC',\n  'sans-serif',\n  '-apple-system',\n  '\"Helvetica Neue\"',\n  'Arial',\n]\n\nexport const typography = {\n  useNextVariants: true,\n  fontSize: 16,\n  fontFamily: fontFamily.join(','),\n  h1: {\n    fontFamily: headingFontFamily,\n  },\n  h2: {\n    fontFamily: headingFontFamily,\n    fontSize: 24,\n    fontWeight: 500,\n  },\n  h3: {\n    fontFamily: headingFontFamily,\n    fontSize: 22,\n    fontWeight: 500,\n  },\n  h4: {\n    fontFamily: fontFamily,\n    fontSize: 18,\n    fontWeight: 500,\n  },\n  h5: {\n    fontFamily: headingFontFamily,\n    fontSize: 16,\n    fontWeight: 500,\n  },\n  h6: {\n    fontFamily: headingFontFamily,\n    fontSize: 14,\n    fontWeight: 500,\n  },\n  body1: {\n    fontFamily: bodyFontFamily,\n    fontSize: 14,\n  },\n  body2: {\n    fontFamily: bodyFontFamily,\n    fontSize: 12,\n  },\n}\n\nexport default createMuiTheme({\n  typography,\n  palette: {\n    primary: {\n      main: '#fff',\n      contrastText: '#000',\n    },\n    secondary: {\n      main: '#3e474f',\n      contrastText: '#fff',\n    },\n    button: {\n      primary: '#ffd731',\n      secondary: '#ffd731',\n    },\n  },\n})\n\nexport const styledComponentTheme = {\n  main: {\n    backgroundColor: 'white',\n    color: 'black',\n  },\n  dark: {\n    backgroundColor: '#3e474f',\n    color: 'white',\n  },\n  secondaryBackgroundColor: '#f2f2f3', // grey\n  subtextColor: '#ffb500', // organe\n}\n","import React from 'react'\nimport AppBar from '@material-ui/core/AppBar'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport IconButton from '@material-ui/core/IconButton'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport SearchIcon from '@material-ui/icons/Search'\nimport styled from 'styled-components'\nimport Typography from '@material-ui/core/Typography'\nimport Slide from '@material-ui/core/Slide'\nimport { DRAWER_OPEN } from '../../reducers/drawer'\nimport ContextStore from 'ContextStore'\nimport { UnstyledNavLink } from '../atoms/UnstyledLink'\n\nconst StyledAppBar = styled(AppBar)`\n  && {\n    width: 100%;\n    box-shadow: none;\n  }\n`\n\nconst StyledToolbar = styled(Toolbar)`\n  && {\n    display: flex;\n    justify-content: space-between;\n  }\n`\n\nconst AppBarTitle = styled(UnstyledNavLink)`\n  && {\n    text-decoration: none;\n    text-align: center;\n  }\n`\n\nfunction MobileAppBar(props) {\n  const {\n    drawer: { dispatch },\n  } = React.useContext(ContextStore)\n\n  return (\n    <>\n      <StyledAppBar position=\"sticky\" color=\"primary\">\n        <StyledToolbar disableGutters>\n          <IconButton\n            color=\"inherit\"\n            component=\"span\"\n            aria-label=\"Search\"\n            onClick={() => dispatch({ type: DRAWER_OPEN })}\n          >\n            <SearchIcon />\n          </IconButton>\n\n          <AppBarTitle to={'/'}>\n            <Typography variant=\"h3\">✋🧡⚡</Typography>\n          </AppBarTitle>\n          <IconButton\n            color=\"inherit\"\n            component=\"span\"\n            aria-label=\"Menu\"\n            // onClick={() => dispatch({ type: DRAWER_OPEN })}\n          >\n            <MenuIcon />\n          </IconButton>\n        </StyledToolbar>\n      </StyledAppBar>\n    </>\n  )\n}\n\nexport default MobileAppBar\n","import React from 'react'\nimport { Route, Switch } from 'react-router-dom'\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider'\nimport { ThemeProvider } from 'styled-components/'\nimport IndexPage from './pages'\nimport SearchPage from './pages/search'\nimport ProfilePage from './pages/profile'\nimport DistrictPage from './pages/district'\nimport BattleGroundPage from './pages/battleground'\nimport NotfoundPage from './pages/notfound'\nimport TestPage from 'pages/test'\nimport ApolloClient from 'apollo-boost'\nimport { ApolloProvider } from 'react-apollo'\nimport theme, { styledComponentTheme } from 'ui/theme/main'\nimport './App.css'\nimport Box from '@material-ui/core/Box'\nimport styled from 'styled-components'\nimport Drawer from '@material-ui/core/Drawer'\nimport MobileAppBar from './components/organisms/MobileAppBar'\nimport { makeStyles } from '@material-ui/core/styles'\nimport drawerReducer from 'reducers/drawer'\nimport ContextStore, { drawerInitialState } from 'ContextStore'\n\nconst client = new ApolloClient({\n  uri: 'https://gql.opencultures.life/graphql',\n})\n\nconst useStyles = makeStyles({\n  paper: {\n    width: '100%',\n  },\n})\n\nconst ContentContainer = styled(Box)`\n  && {\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n  }\n`\n\nconst Root = styled(Box)`\n  && {\n    display: flex;\n    margin: auto;\n    overflow: hidden;\n  }\n`\n\nconst App = props => {\n  const [drawerState, drawerDispatch] = React.useReducer(\n    drawerReducer,\n    drawerInitialState\n  )\n\n  const classes = useStyles()\n\n  return (\n    <ApolloProvider client={client}>\n      <ThemeProvider theme={styledComponentTheme}>\n        <MuiThemeProvider theme={theme}>\n          <ContextStore.Provider\n            value={{\n              drawer: {\n                state: drawerState,\n                dispatch: drawerDispatch,\n              },\n            }}\n          >\n            <Root>\n              <ContentContainer>\n                <CssBaseline />\n                <MobileAppBar />\n                <main>\n                  <Switch>\n                    <Route exact path=\"/\" component={IndexPage} />\n                    <Route path=\"/profile/:id\" component={ProfilePage} />\n                    <Route path=\"/test\" component={TestPage} />\n                    <Route\n                      path=\"/district/2019/:code\"\n                      component={BattleGroundPage}\n                    />\n                    <Route\n                      path=\"/district/:year/:code\"\n                      component={DistrictPage}\n                    />\n                    <Route component={NotfoundPage} />\n                  </Switch>\n                </main>\n              </ContentContainer>\n              <Drawer\n                anchor=\"left\"\n                open={drawerState.open}\n                variant=\"persistent\"\n                classes={{\n                  paper: classes.paper,\n                }}\n              >\n                <SearchPage />\n              </Drawer>\n            </Root>\n          </ContextStore.Provider>\n        </MuiThemeProvider>\n      </ThemeProvider>\n    </ApolloProvider>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { HashRouter as Router } from 'react-router-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <Router>\n    <App />\n  </Router>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}